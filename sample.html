<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funcgraph Visualization</title>
    <style>
        :root {
            --bg-color: #f5f5f5;
            --container-bg: white;
            --text-color: #333;
            --line-hover: #f0f0f0;
            --line-selected: #e3f2fd;
            --line-highlighted: #fff8e1;
            --line-keyboard-select: #e1f5fe;
            --border-color: #ddd;
            --summary-bg: #f8f9fa;
            --summary-text: #6c757d;
            --btn-primary: #4CAF50;
            --btn-primary-hover: #45a049;
            --btn-danger: #f44336;
            --btn-danger-hover: #d32f2f;
            --link-color: #0366d6;
            --expanded-bg: #f9f9f9;
        }
        [data-theme="dark"] {
            --bg-color: #1a1a1a;
            --container-bg: #2d2d2d;
            --text-color: #e0e0e0;
            --line-hover: #3a3a3a;
            --line-selected: #2c3e50;
            --line-highlighted: #5d4037;
            --line-keyboard-select: #01579b;
            --border-color: #444;
            --summary-bg: #2c2c2c;
            --summary-text: #aaa;
            --btn-primary: #4CAF50;
            --btn-primary-hover: #45a049;
            --btn-danger: #f44336;
            --btn-danger-hover: #d32f2f;
            --link-color: #64b5f6;
            --expanded-bg: #363636;
        }
        body {
            font-family: 'Courier New', monospace;
            background-color: var(--bg-color);
            padding: 20px;
            line-height: 1.5;
            margin: 0;
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            background: var(--container-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow-x: auto;
            transition: background-color 0.3s;
        }
        h1 {
            text-align: center;
            color: var(--text-color);
            margin-bottom: 15px;
            font-size: 26px;
            font-weight: 600;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        .title-main {
            display: inline;
        }
        .title-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }
        .version-badge {
            display: inline-block;
            color: var(--text-color);
            opacity: 0.6;
            padding: 0 6px;
            font-size: 11px;
            font-weight: 500;
        }
        [data-theme="dark"] .version-badge {
            opacity: 0.6;
        }
        .author-badge {
            display: inline-block;
            color: var(--text-color);
            font-size: 11px;
            padding: 0 6px;
            border-left: 1px solid var(--border-color);
            opacity: 0.5;
            padding-left: 10px;
        }
        .info-panel {
            margin-top: 12px;
            padding: 12px;
            background-color: rgba(0, 0, 0, 0.02);
            border-radius: 6px;
            border-left: 3px solid var(--btn-primary);
        }
        [data-theme="dark"] .info-panel {
            background-color: rgba(255, 255, 255, 0.03);
        }
        .info-toggle {
            display: flex;
            align-items: center;
            cursor: pointer;
            user-select: none;
            padding: 8px;
            margin: -8px;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-color);
            transition: opacity 0.2s;
        }
        .info-toggle:hover {
            opacity: 0.8;
        }
        .info-toggle-icon {
            display: inline-block;
            margin-right: 8px;
            transition: transform 0.3s;
            font-size: 14px;
        }
        .info-toggle-icon.expanded {
            transform: rotate(90deg);
        }
        .info-panel {
            display: none;
            margin-top: 8px;
            padding: 12px;
            background-color: rgba(0, 0, 0, 0.02);
            border-radius: 4px;
            border-left: 3px solid var(--btn-primary);
        }
        .info-panel.show {
            display: block;
        }
        [data-theme="dark"] .info-panel {
            background-color: rgba(255, 255, 255, 0.03);
        }
        .info-item {
            display: flex;
            margin-bottom: 6px;
            font-size: 11px;
            line-height: 1.5;
        }
        .info-item:last-child {
            margin-bottom: 0;
        }
        .info-label {
            min-width: 100px;
            font-weight: 600;
            color: var(--summary-text);
            margin-right: 12px;
        }
        .info-value {
            flex: 1;
            color: var(--text-color);
            word-break: break-all;
        }
        .header-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
            flex-wrap: wrap;
        }
        .theme-toggle {
            padding: 8px 12px;
            background-color: var(--btn-primary);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background-color 0.2s;
        }
        .theme-toggle:hover {
            background-color: var(--btn-primary-hover);
        }
        .line-container {
            display: flex;
            align-items: flex-start;
            padding: 2px 5px;
            border-radius: 3px;
            transition: background-color 0.2s;
            white-space: pre;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            cursor: default;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        .line-container.expandable {
            cursor: pointer;
        }
        .line-container.expandable:hover {
            background-color: var(--line-hover);
        }
        .line-container.expandable.selected {
            background-color: var(--line-selected);
        }
        .line-container.expandable.highlighted {
            background-color: var(--line-highlighted);
        }
        .line-container.expandable.keyboard-selected {
            background-color: var(--line-keyboard-select);
            outline: 2px solid var(--btn-primary);
        }
        .line-number {
            display: inline-block;
            width: 40px;
            text-align: right;
            padding-right: 10px;
            color: var(--summary-text);
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            flex-shrink: 0;
            cursor: pointer;
            border-radius: 3px;
            padding-left: 5px;
            transition: background-color 0.2s, color 0.2s;
        }
        .line-number:hover {
            background-color: var(--line-hover);
        }
        .line-content {
            flex-grow: 1;
            padding: 2px 0;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
            white-space: pre;
            font-family: 'Courier New', monospace;
        }
        .expand-btn {
            display: inline-block;
            width: 16px;
            height: 16px;
            background-color: var(--btn-primary);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 16px;
            font-size: 12px;
            margin-left: 5px;
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.2s, background-color 0.2s;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            vertical-align: middle;
            flex-shrink: 0;
        }
        .expand-btn:hover {
            opacity: 1;
            background-color: var(--btn-primary-hover);
        }
        .expanded-content {
            display: none;
            margin-left: 50px;
            padding: 10px;
            background-color: var(--expanded-bg);
            border-left: 2px solid var(--btn-primary);
            border-radius: 0 4px 4px 0;
            white-space: pre;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .location-link {
            display: block;
            padding: 3px 5px;
            color: var(--link-color);
            text-decoration: none;
            margin: 2px 0;
            border-radius: 3px;
            white-space: pre;
        }
        .location-link:hover {
            background-color: var(--line-hover);
            text-decoration: underline;
        }
        .source-line {
            display: block;
            padding: 2px 0;
            white-space: pre;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .current-line {
            background-color: var(--line-highlighted);
        }
        .summary {
            background-color: var(--summary-bg);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            padding: 8px 12px;
            margin-bottom: 0;
            font-size: 12px;
            color: var(--summary-text);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }
        .summary > div:first-child {
            flex: 1;
        }
        .summary span {
            margin: 0 5px;
        }
        .info-toggle-btn {
            display: flex;
            align-items: center;
            cursor: pointer;
            user-select: none;
            padding: 4px 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
            font-size: 16px;
            color: var(--text-color);
            white-space: nowrap;
        }
        .info-toggle-btn:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        [data-theme="dark"] .info-toggle-btn:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        .info-toggle-icon {
            display: inline-block;
            margin-right: 6px;
            transition: transform 0.3s;
            font-size: 12px;
        }
        .info-toggle-icon.expanded {
            transform: rotate(90deg);
        }
        .info-panel {
            display: none;
            margin: 0;
            padding: 12px;
            background-color: rgba(0, 0, 0, 0.02);
            border-radius: 0 0 5px 5px;
            border: 1px solid var(--border-color);
            border-top: none;
            border-left: 3px solid var(--btn-primary);
            margin-bottom: 15px;
            font-size: 11px;
        }
        .info-panel.show {
            display: block;
        }
        [data-theme="dark"] .info-panel {
            background-color: rgba(255, 255, 255, 0.03);
        }
        .info-item {
            display: flex;
            margin-bottom: 6px;
            font-size: 11px;
            line-height: 1.5;
        }
        .info-item:last-child {
            margin-bottom: 0;
        }
        .info-label {
            min-width: 100px;
            font-weight: 600;
            color: var(--summary-text);
            margin-right: 12px;
        }
        .info-value {
            flex: 1;
            color: var(--text-color);
            word-break: break-all;
        }
        .controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 8px;
            align-items: flex-end; /* Align to bottom */
        }

        /* Right buttons - vertical stack */
        .right-buttons {
            display: flex;
            flex-direction: column;
            gap: 6px;
            align-items: flex-end; /* Align to right */
        }

        /* Base button style */
        .control-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
            white-space: nowrap;
            /* Auto width based on content */
            width: auto;
            min-width: auto;
            /* Semi-transparent backgrounds */
            backdrop-filter: blur(2px);
        }
        .control-btn:hover {
            opacity: 0.85;
            transform: translateY(-1px);
        }

        /* Top button - blue */
        .control-btn:nth-child(1) {
            background-color: rgba(59, 130, 246, 0.7); /* Blue */
            color: white;
        }
        .control-btn:nth-child(1):hover {
            background-color: rgba(37, 99, 235, 0.8);
        }

        /* Copy button - green */
        .control-btn:nth-child(2) {
            background-color: rgba(34, 197, 94, 0.7); /* Green */
            color: white;
        }
        .control-btn:nth-child(2):hover {
            background-color: rgba(22, 163, 74, 0.8);
        }

        /* Expand All button - orange */
        .control-btn:nth-child(3) {
            background-color: rgba(249, 115, 22, 0.7); /* Orange */
            color: white;
        }
        .control-btn:nth-child(3):hover {
            background-color: rgba(234, 88, 12, 0.8);
        }

        /* Collapse All button - red */
        .control-btn.collapse {
            background-color: rgba(239, 68, 68, 0.7); /* Red */
            color: white;
        }
        .control-btn.collapse:hover {
            background-color: rgba(220, 38, 38, 0.8);
        }

        /* Clear button - gray with trash icon */
        .clear-btn {
            background-color: rgba(107, 114, 128, 0.7); /* Gray */
            color: white;
            padding: 8px 10px;
            font-size: 14px;
        }
        .clear-btn:hover {
            background-color: rgba(75, 85, 99, 0.8);
        }

        /* Control bar styles */
        .controls {
            display: flex;
            gap: 15px;
            align-items: flex-end; /* Align to bottom */
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        /* Right buttons - vertical stack */
        .right-buttons {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-left: auto; /* Push to right side */
            align-items: flex-end; /* Align to right */
        }

        /* Filter box styles */
        .filter-box {
            display: flex;
            gap: 8px;
            align-items: flex-end; /* Align to bottom */
            padding: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            flex-wrap: wrap;
            margin-bottom: 0;
            /* Position to align with Collapse All button */
            margin-top: 24px; /* Offset to align with bottom of right buttons */
        }
        .filter-box .clear-btn {
            margin-top: 0; /* Reset margin for clear button */
        }
        .filter-input-group {
            position: relative;
            display: flex;
            flex-direction: column;
        }
        .filter-box input {
            padding: 6px 8px;
            border: 1px solid var(--border-color);
            border-radius: 3px;
            background: rgba(200, 200, 200, 0.3); /* Semi-transparent light gray */
            color: var(--text-primary);
            font-size: 12px;
            width: 140px;
        }
        [data-theme="dark"] .filter-box input {
            background: rgba(100, 100, 100, 0.3); /* Darker semi-transparent for dark mode */
        }
        .filter-box input:focus {
            outline: none;
            border-color: var(--btn-primary);
        }
        .filter-box input::placeholder {
            color: var(--text-secondary);
        }

        /* Suggestions dropdown - pull-up menu */
        .suggestions {
            position: absolute;
            bottom: 100%; /* Pull up above the input */
            left: 0;
            right: 0;
            background: rgba(220, 220, 220, 0.95); /* Semi-transparent light gray */
            border: 1px solid var(--border-color);
            border-radius: 3px;
            max-height: 150px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 -2px 8px rgba(0,0,0,0.2); /* Shadow upward */
            margin-bottom: 4px; /* Space between input and menu */
        }
        [data-theme="dark"] .suggestions {
            background: rgba(80, 80, 80, 0.95); /* Darker semi-transparent for dark mode */
        }
        .suggestions.active {
            display: block;
        }
        .suggestion-item {
            padding: 4px 8px;
            cursor: pointer;
            font-size: 11px;
            border-bottom: 1px solid var(--border-color);
            color: #333; /* Dark text for light background */
        }
        [data-theme="dark"] .suggestion-item {
            color: #eee; /* Light text for dark background */
        }
        .suggestion-item:last-child {
            border-bottom: none;
        }
        .suggestion-item:hover {
            background: rgba(180, 180, 180, 0.8);
        }
        .suggestion-item.selected {
            background: var(--btn-primary);
            color: white;
        }

        /* Control buttons - uniform size */
        .control-btn {
            padding: 8px 12px;
            background: var(--btn-primary);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: background-color 0.2s;
            white-space: nowrap;
            min-width: 80px;
            text-align: center;
        }
        .control-btn:hover {
            background: var(--btn-primary-hover);
        }
        .control-btn.collapse {
            background: var(--btn-danger);
        }
        .control-btn.collapse:hover {
            background: var(--btn-danger-hover);
        }

        /* 移除旧的固定定位按钮样式 */
        .copy-btn, .jump-to-top, .floating-buttons {
            display: none;
        }
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background-color: var(--btn-primary);
            z-index: 2000;
            transition: width 0.3s ease;
        }
        .keyboard-hint {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 12px;
            color: var(--text-color);
            z-index: 1000;
            max-width: 300px;
            opacity: 0.9;
            display: none;
        }
        .keyboard-hint h3 {
            margin: 0 0 5px 0;
            font-size: 12px;
        }
        .keyboard-hint ul {
            margin: 0;
            padding-left: 15px;
        }
        .keyboard-hint li {
            margin: 2px 0;
        }
        .keyboard-hint kbd {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 3px;
            padding: 1px 4px;
            font-family: monospace;
            font-size: 11px;
        }
        .keyboard-hint-close {
            position: absolute;
            top: 5px;
            right: 5px;
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 14px;
            padding: 0;
            width: 20px;
            height: 20px;
            line-height: 20px;
            text-align: center;
        }
        .keyboard-hint-close:hover {
            color: var(--btn-danger);
        }
        /* 锚点目标行高亮样式 */
        .line-container:target {
            background-color: var(--line-highlighted);
            animation: pulse-highlight 1s ease-out;
        }
        @keyframes pulse-highlight {
            0% {
                background-color: var(--line-highlighted);
                box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
            }
            100% {
                background-color: transparent;
                box-shadow: none;
            }
        }
        /* Ftrace语法高亮样式 */
        .hl-cpu {
            color: #d73a49;
            font-weight: bold;
        }
        [data-theme="dark"] .hl-cpu {
            color: #f97583;
            font-weight: bold;
        }
        
        .hl-time {
            color: #005cc5;
            font-weight: normal;
        }
        [data-theme="dark"] .hl-time {
            color: #79b8ff;
            font-weight: normal;
        }
        
        .hl-unit {
            color: #6f42c1;
            font-weight: bold;
        }
        [data-theme="dark"] .hl-unit {
            color: #b392f0;
            font-weight: bold;
        }
        
        .hl-func {
            color: #6f42c1;
            font-weight: bold;
        }
        [data-theme="dark"] .hl-func {
            color: #b392f0;
            font-weight: bold;
        }
        
        .hl-addr {
            color: #032f62;
            font-family: 'Courier New', monospace;
        }
        [data-theme="dark"] .hl-addr {
            color: #79b8ff;
            font-family: 'Courier New', monospace;
        }
        
        .hl-comment {
            color: #6a737d;
            font-style: italic;
        }
        [data-theme="dark"] .hl-comment {
            color: #8b949e;
            font-style: italic;
        }
        
        .hl-symbol {
            color: #24292e;
            font-weight: bold;
        }
        [data-theme="dark"] .hl-symbol {
            color: #c9d1d9;
            font-weight: bold;
        }
        
        /* C代码简洁语法高亮 */
        .c-keyword {
            color: #d73a49;  /* 红色用于关键字 */
            font-weight: bold;
        }
        [data-theme="dark"] .c-keyword {
            color: #f97583;
            font-weight: bold;
        }
        
        .c-string {
            color: #032f62;  /* 蓝色用于字符串 */
        }
        [data-theme="dark"] .c-string {
            color: #79b8ff;
        }
        
        .c-comment {
            color: #6a737d;  /* 灰色用于注释 */
            font-style: italic;
        }
        [data-theme="dark"] .c-comment {
            color: #8b949e;
            font-style: italic;
        }
        
        .c-number {
            color: #6f42c1;  /* 紫色用于数字 */
        }
        [data-theme="dark"] .c-number {
            color: #b392f0;
        }
        
        /* Linux内核特定类型 */
        .kernel-type {
            color: #0184bc;  /* 青色用于内核类型 */
            font-weight: bold;
        }
        [data-theme="dark"] .kernel-type {
            color: #58a6ff;
            font-weight: bold;
        }
        
        /* Linux内核属性修饰符 */
        .kernel-attr {
            color: #9e1a1a;  /* 深红色用于属性 */
        }
        [data-theme="dark"] .kernel-attr {
            color: #ff7b72;
        }
        
        /* Linux内核常用宏常量 */
        .kernel-macro {
            color: #e36209;  /* 橙色用于宏常量 */
            font-weight: bold;
        }
        [data-theme="dark"] .kernel-macro {
            color: #fb8500;
            font-weight: bold;
        }
        
        .line-number {
            color: #6a737d;
            margin-right: 8px;
        }
        [data-theme="dark"] .line-number {
            color: #8b949e;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 10px;
            }
            .line-container {
                font-size: 12px;
            }
            .expanded-content {
                margin-left: 30px;
                padding: 5px;
                font-size: 11px;
            }
            .controls {
                bottom: 10px;
                right: 10px;
            }
            .copy-btn {
                bottom: 50px;
                right: 10px;
            }
            .jump-to-top {
                bottom: 90px;
                right: 10px;
            }
            .keyboard-hint {
                bottom: 10px;
                left: 10px;
                font-size: 10px;
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progressBar"></div>
    
    <div class="container">
        <h1>
            <span class="title-main">FuncGraph</span>
            <span class="title-meta">
                <span class="version-badge">v0.4</span>
                <span class="author-badge">@dolinux</span>
            </span>
        </h1>
        
        <div class="header-controls">
            <div></div> <!-- 占位元素 -->
            <button class="theme-toggle" onclick="toggleTheme()">Theme</button>
        </div>
        
        <div class="summary">
            <div>
                <span>Lines: 320</span>
                <span>•</span>
                <span>Expandable: 212</span>
                <span>•</span>
                <span>Kernel Functions: 116</span>
                <span>•</span>
                <span>Modules: 0</span>
                <span id="visibleLinesContainer" style="display: none;">
                    <span>•</span>
                    <span>Filtered: <span id="summaryVisibleLines">320</span></span>
                </span>
            </div>
            <div class="info-toggle-btn" onclick="toggleInfoPanel()">
                <span class="info-toggle-icon">▶</span>
                <span>ⓘ</span>
            </div>
        </div>

        <div class="info-panel" id="infoPanel">
                            <div style="font-weight: 600; color: var(--text-color); margin-bottom: 8px; font-size: 11px;">Environment</div>
                <div class="info-item"><div class="info-label">Python:</div><div class="info-value">3.10.12</div></div>
                <div class="info-item"><div class="info-label">OS:</div><div class="info-value">Linux 6.8.0-90-generic</div></div>
                <div class="info-item"><div class="info-label">Hostname:</div><div class="info-value">pengdl-pc</div></div>
                <div class="info-item"><div class="info-label">Processor:</div><div class="info-value">x86_64</div></div>
                <div class="info-item"><div class="info-label">Generated At:</div><div class="info-value">2026-01-14 21:32:39</div></div>
                <div style="border-top: 1px solid var(--border-color); margin: 8px 0;"></div>
                <div style="font-weight: 600; color: var(--text-color); margin-bottom: 8px; font-size: 11px;">Processing Stats</div>
                <div class="info-item"><div class="info-label">Parse Time:</div><div class="info-value">0.01s</div></div>
                <div class="info-item"><div class="info-label">Vmlinux Time:</div><div class="info-value">4.69s</div></div>
                <div class="info-item"><div class="info-label">Modules Time:</div><div class="info-value">0.00s</div></div>
                <div class="info-item"><div class="info-label">Total Lines:</div><div class="info-value">320</div></div>
                <div class="info-item"><div class="info-label">Expandable:</div><div class="info-value">212</div></div>
                <div style="font-weight: 600; color: var(--text-color); margin-bottom: 8px; font-size: 11px;">Parameters</div>
                <div class="info-item"><div class="info-label">Ftrace File:</div><div class="info-value">ftrace.txt</div></div>
                <div class="info-item"><div class="info-label">Vmlinux:</div><div class="info-value">./linux-6.18/x86_64/vmlinux</div></div>
                <div class="info-item"><div class="info-label">Kernel Src:</div><div class="info-value">/vol_1t/Qemu/x86_64/linux-6.18</div></div>
                <div class="info-item"><div class="info-label">Module Dirs:</div><div class="info-value">./linux-6.18/x86_64/modules_install/, ./modules_/</div></div>
                <div class="info-item"><div class="info-label">Module Srcs:</div><div class="info-value">./modules_/, /vol_1t/Qemu/x86_64/linux-6.18</div></div>
                <div class="info-item"><div class="info-label">Base Url:</div><div class="info-value">https://elixir.bootlin.com/linux/v6.18/source</div></div>
                <div class="info-item"><div class="info-label">Module Url:</div><div class="info-value">(none)</div></div>
                <div class="info-item"><div class="info-label">Output:</div><div class="info-value">x86_64_ftrace.txt.html</div></div>
                <div class="info-item"><div class="info-label">Auto Search:</div><div class="info-value">No</div></div>
                <div class="info-item"><div class="info-label">Fast:</div><div class="info-value">Yes</div></div>
                <div class="info-item"><div class="info-label">Use External:</div><div class="info-value">No</div></div>
                <div class="info-item"><div class="info-label">Highlight Code:</div><div class="info-value">Yes</div></div>
                <div class="info-item"><div class="info-label">Path Prefix:</div><div class="info-value">/vol_1t/Qemu/x86_64/modules/</div></div>
                <div class="info-item"><div class="info-label">Filter:</div><div class="info-value">Yes</div></div>

        </div>

        <!-- 控制按钮 - 立即显示，不用等待内容加载 -->
        <div class="controls">
            <!-- 过滤窗口占位符，稍后插入 -->
            
            <div class="filter-box">
                
            <div class="filter-input-group">
                <input type="text" id="filterCpu" placeholder="CPU regex (e.g., 0|1|2 or [0-2])" style="width: 140px;" data-suggestions="3">
                <div class="suggestions" id="cpuSuggestions"></div>
            </div>
            <div class="filter-input-group">
                <input type="text" id="filterPid" placeholder="PID regex (e.g., 1234|5678 or 0-100)" style="width: 140px;" data-suggestions="1,431">
                <div class="suggestions" id="pidSuggestions"></div>
            </div>
            <div class="filter-input-group">
                <input type="text" id="filterComm" placeholder="Comm regex (e.g., bash|python or ^idle)" style="width: 140px;" data-suggestions="bash,ret=">
                <div class="suggestions" id="commSuggestions"></div>
            </div>
                <button class="control-btn clear-btn" onclick="clearFilter()">Clear</button>
            </div>
            <div class="right-buttons">
                <button class="control-btn" onclick="scrollToTop()">Top</button>
                <button class="control-btn" onclick="copyVisibleContent(event)">Copy</button>
                <button class="control-btn" onclick="expandAll()">Expand All</button>
                <button class="control-btn collapse" onclick="collapseAll()">Collapse All</button>
            </div>
        </div>

        <div id="content">
<div class="line-container " id="L1" data-line-number="1" data-line-id="line_0" data-cpu="" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L1', event)" title="Click to copy anchor link">1</span><span class="line-content"># tracer: function_graph</span></div><div class="line-container " id="L2" data-line-number="2" data-line-id="line_1" data-cpu="" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L2', event)" title="Click to copy anchor link">2</span><span class="line-content">#</span></div><div class="line-container " id="L3" data-line-number="3" data-line-id="line_2" data-cpu="" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L3', event)" title="Click to copy anchor link">3</span><span class="line-content"># CPU  DURATION                  FUNCTION CALLS</span></div><div class="line-container " id="L4" data-line-number="4" data-line-id="line_3" data-cpu="" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L4', event)" title="Click to copy anchor link">4</span><span class="line-content"># |     |   |                     |   |   |   |</span></div><div class="line-container expandable" id="L5" data-line-number="5" data-line-id="line_4" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_4')" ondblclick="handleDoubleClick(event, 'line_4')"><span class="line-number" onclick="updateAnchor('L5', event)" title="Click to copy anchor link">5</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">pick_next_task</span><span class="hl-symbol">(</span>rq=<span class="hl-addr">0xffff88807ddad800</span>, prev=<span class="hl-addr">0xffff888007949bc0</span>, rf=<span class="hl-addr">0xffffc900013f3e00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__schedule+<span class="hl-addr">0x154</span>/<span class="hl-addr">0x700</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_4_content" style="display: none;"><div class="location-link"><strong>__schedule+0x153/0x700:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L6870" target="_blank">__schedule&nbsp;at&nbsp;kernel/sched/core.c:6870</a><div class="source-line">&nbsp;6865&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!task_is_blocked(prev));</div><div class="source-line">&nbsp;6866&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch_count = &amp;prev-&gt;nvcsw;</div><div class="source-line">&nbsp;6867&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 6868</div><div class="source-line">&nbsp;6869&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pick_again:</div><div class="source-line current-line">&gt;6870&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next = pick_next_task(rq, rq-&gt;donor, &amp;rf);</div><div class="source-line">&nbsp;6871&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rq_set_donor(rq, next);</div><div class="source-line">&nbsp;6872&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (unlikely(task_is_blocked(next))) {</div><div class="source-line">&nbsp;6873&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next = find_proxy_task(rq, next, &amp;rf);</div><div class="source-line">&nbsp;6874&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!next)</div><div class="source-line">&nbsp;6875&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">goto</span> pick_again;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L6" data-line-number="6" data-line-id="line_5" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_5')" ondblclick="handleDoubleClick(event, 'line_5')"><span class="line-number" onclick="updateAnchor('L6', event)" title="Click to copy anchor link">6</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">pick_next_task_fair</span><span class="hl-symbol">(</span>rq=<span class="hl-addr">0xffff88807ddad800</span>, prev=<span class="hl-addr">0xffff888007949bc0</span>, rf=<span class="hl-addr">0xffffc900013f3e00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__pick_next_task+<span class="hl-addr">0x3b</span>/<span class="hl-addr">0x150</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_5_content" style="display: none;"><div class="location-link"><strong>__pick_next_task+0x3a/0x150:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5969" target="_blank">__pick_next_task&nbsp;at&nbsp;kernel/sched/core.c:5969</a><div class="source-line">&nbsp;5964&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* opportunity to pull in more work from other CPUs.</div><div class="source-line">&nbsp;5965&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;5966&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (likely(!sched_class_above(prev-&gt;sched_class, &amp;fair_sched_class) &amp;&amp;</div><div class="source-line">&nbsp;5967&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rq-&gt;nr_running == rq-&gt;cfs.h_nr_queued)) {</div><div class="source-line"> 5968</div><div class="source-line current-line">&gt;5969&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p = pick_next_task_fair(rq, prev, rf);</div><div class="source-line">&nbsp;5970&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (unlikely(p == RETRY_TASK))</div><div class="source-line">&nbsp;5971&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">goto</span> restart;</div><div class="source-line"> 5972</div><div class="source-line">&nbsp;5973&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Assume the next prioritized class is idle_sched_class */</div><div class="source-line">&nbsp;5974&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!p) {</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L7" data-line-number="7" data-line-id="line_6" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_6')" ondblclick="handleDoubleClick(event, 'line_6')"><span class="line-number" onclick="updateAnchor('L7', event)" title="Click to copy anchor link">7</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.081</span> <span class="hl-unit">us</span>    |                <span class="hl-func">pick_task_fair</span><span class="hl-symbol">(</span>rq=<span class="hl-addr">0xffff88807ddad800</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-pick_next_task_fair+<span class="hl-addr">0x48</span>/<span class="hl-addr">0x3b0</span> ret=<span class="hl-addr">0x0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_6_content" style="display: none;"><div class="location-link"><strong>pick_next_task_fair+0x47/0x3b0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L8876" target="_blank">pick_next_task_fair&nbsp;at&nbsp;kernel/sched/fair.c:8876</a><div class="source-line">&nbsp;8871&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> sched_entity *se;</div><div class="source-line">&nbsp;8872&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *p;</div><div class="source-line">&nbsp;8873&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> new_tasks;</div><div class="source-line"> 8874</div><div class="source-line">&nbsp;8875&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;again:</div><div class="source-line current-line">&gt;8876&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p = pick_task_fair(rq);</div><div class="source-line">&nbsp;8877&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!p)</div><div class="source-line">&nbsp;8878&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">goto</span> idle;</div><div class="source-line">&nbsp;8879&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se = &amp;p-&gt;se;</div><div class="source-line"> 8880</div><div class="source-line">&nbsp;8881&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_FAIR_GROUP_SCHED</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L8" data-line-number="8" data-line-id="line_7" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_7')" ondblclick="handleDoubleClick(event, 'line_7')"><span class="line-number" onclick="updateAnchor('L8', event)" title="Click to copy anchor link">8</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">sched_balance_newidle</span><span class="hl-symbol">(</span>this_rq=<span class="hl-addr">0xffff88807ddad800</span>, rf=<span class="hl-addr">0xffffc900013f3e00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-pick_next_task_fair+<span class="hl-addr">0x32</span>/<span class="hl-addr">0x3b0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_7_content" style="display: none;"><div class="location-link"><strong>pick_next_task_fair+0x31/0x3b0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L8931" target="_blank">pick_next_task_fair&nbsp;at&nbsp;kernel/sched/fair.c:8931</a><div class="source-line">&nbsp;8926&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put_prev_set_next_task(rq, prev, p);</div><div class="source-line">&nbsp;8927&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> p;</div><div class="source-line"> 8928</div><div class="source-line">&nbsp;8929&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idle:</div><div class="source-line">&nbsp;8930&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rf) {</div><div class="source-line current-line">&gt;8931&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_tasks = sched_balance_newidle(rq, rf);</div><div class="source-line"> 8932</div><div class="source-line">&nbsp;8933&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;8934&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Because sched_balance_newidle() releases (and re-acquires)</div><div class="source-line">&nbsp;8935&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* rq-&gt;lock, it is possible <span class="c-keyword">for</span> any higher priority task to</div><div class="source-line">&nbsp;8936&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* appear. In that <span class="c-keyword">case</span> we must re-start the pick_next_entity()</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L9" data-line-number="9" data-line-id="line_8" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_8')" ondblclick="handleDoubleClick(event, 'line_8')"><span class="line-number" onclick="updateAnchor('L9', event)" title="Click to copy anchor link">9</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                  <span class="hl-func">__rcu_read_lock</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-sched_balance_newidle+<span class="hl-addr">0x121</span>/<span class="hl-addr">0x780</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_8_content" style="display: none;"><div class="location-link"><strong>sched_balance_newidle+0x120/0x780:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/rcupdate.h#L865" target="_blank">rcu_read_lock&nbsp;at&nbsp;include/linux/rcupdate.h:865</a><div class="source-line">&nbsp;860&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* read-side critical sections may be preempted and they may also block, but</div><div class="source-line">&nbsp;861&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* only when acquiring spinlocks that are subject to priority inheritance.</div><div class="source-line">&nbsp;862&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;863&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> __always_inline <span class="c-keyword">void</span> rcu_read_lock(<span class="c-keyword">void</span>)</div><div class="source-line">&nbsp;864&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;865&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__rcu_read_lock();</div><div class="source-line">&nbsp;866&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kernel-attr">__acquire</span>(RCU);</div><div class="source-line">&nbsp;867&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_lock_acquire(&amp;rcu_lock_map);</div><div class="source-line">&nbsp;868&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RCU_LOCKDEP_WARN(!rcu_is_watching(),</div><div class="source-line">&nbsp;869&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-string">"rcu_read_lock() used illegally <span class="c-keyword">while</span> idle"</span>);</div><div class="source-line">&nbsp;870&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L12825" target="_blank">(inlined&nbsp;by)&nbsp;sched_balance_newidle&nbsp;at&nbsp;kernel/sched/fair.c:12825</a><div class="source-line">&nbsp;12820&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* further scheduler activity on it and we're being very careful to</div><div class="source-line">&nbsp;12821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* re-start the picking loop.</div><div class="source-line">&nbsp;12822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;12823&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rq_unpin_lock(this_rq, rf);</div><div class="source-line"> 12824</div><div class="source-line current-line">&gt;12825&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_read_lock();</div><div class="source-line">&nbsp;12826&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sd = rcu_dereference_check_sched_domain(this_rq-&gt;sd);</div><div class="source-line"> 12827</div><div class="source-line">&nbsp;12828&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!get_rd_overloaded(this_rq-&gt;rd) ||</div><div class="source-line">&nbsp;12829&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(sd &amp;&amp; this_rq-&gt;avg_idle &lt; sd-&gt;max_newidle_lb_cost)) {</div><div class="source-line"> 12830</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L10" data-line-number="10" data-line-id="line_9" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_9')" ondblclick="handleDoubleClick(event, 'line_9')"><span class="line-number" onclick="updateAnchor('L10', event)" title="Click to copy anchor link">10</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.077</span> <span class="hl-unit">us</span>    |                    <span class="hl-func">rcu_preempt_read_enter</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__rcu_read_lock+<span class="hl-addr">0xe</span>/<span class="hl-addr">0x30</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_9_content" style="display: none;"><div class="location-link"><strong>__rcu_read_lock+0xd/0x30:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree_plugin.h#L414" target="_blank">__rcu_read_lock&nbsp;at&nbsp;kernel/rcu/tree_plugin.h:414</a><div class="source-line">&nbsp;409&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Just increment -&gt;rcu_read_lock_nesting, shared state will be updated</div><div class="source-line">&nbsp;410&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="c-keyword">if</span> we block.</div><div class="source-line">&nbsp;411&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;412&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">void</span> __rcu_read_lock(<span class="c-keyword">void</span>)</div><div class="source-line">&nbsp;413&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;414&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_preempt_read_enter();</div><div class="source-line">&nbsp;415&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (IS_ENABLED(CONFIG_PROVE_LOCKING))</div><div class="source-line">&nbsp;416&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WARN_ON_ONCE(rcu_preempt_depth() &gt; RCU_NEST_PMAX);</div><div class="source-line">&nbsp;417&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (IS_ENABLED(CONFIG_RCU_STRICT_GRACE_PERIOD) &amp;&amp; rcu_state.gp_kthread)</div><div class="source-line">&nbsp;418&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WRITE_ONCE(current-&gt;rcu_read_unlock_special.b.need_qs, <span class="kernel-macro">true</span>);</div><div class="source-line">&nbsp;419&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier();  /* critical section after entry code. */</div><div style="height: 10px;"></div></div><div class="line-container " id="L11" data-line-number="11" data-line-id="line_10" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L11', event)" title="Click to copy anchor link">11</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.228</span> <span class="hl-unit">us</span>    |                  <span class="hl-symbol">}</span> <span class="hl-comment">/* __rcu_read_lock */</span></span></div><div class="line-container expandable" id="L12" data-line-number="12" data-line-id="line_11" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_11')" ondblclick="handleDoubleClick(event, 'line_11')"><span class="line-number" onclick="updateAnchor('L12', event)" title="Click to copy anchor link">12</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                  <span class="hl-func">rcu_read_lock_held</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-sched_balance_newidle+<span class="hl-addr">0x3e1</span>/<span class="hl-addr">0x780</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_11_content" style="display: none;"><div class="location-link"><strong>sched_balance_newidle+0x3e0/0x780:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L12826" target="_blank">sched_balance_newidle&nbsp;at&nbsp;kernel/sched/fair.c:12826</a><div class="source-line">&nbsp;12821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* re-start the picking loop.</div><div class="source-line">&nbsp;12822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;12823&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rq_unpin_lock(this_rq, rf);</div><div class="source-line"> 12824</div><div class="source-line">&nbsp;12825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_read_lock();</div><div class="source-line current-line">&gt;12826&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sd = rcu_dereference_check_sched_domain(this_rq-&gt;sd);</div><div class="source-line"> 12827</div><div class="source-line">&nbsp;12828&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!get_rd_overloaded(this_rq-&gt;rd) ||</div><div class="source-line">&nbsp;12829&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(sd &amp;&amp; this_rq-&gt;avg_idle &lt; sd-&gt;max_newidle_lb_cost)) {</div><div class="source-line"> 12830</div><div class="source-line">&nbsp;12831&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (sd)</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L13" data-line-number="13" data-line-id="line_12" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_12')" ondblclick="handleDoubleClick(event, 'line_12')"><span class="line-number" onclick="updateAnchor('L13', event)" title="Click to copy anchor link">13</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                    <span class="hl-func">rcu_read_lock_held_common</span><span class="hl-symbol">(</span>ret=<span class="hl-addr">0xffffc900013f3d1f</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_read_lock_held+<span class="hl-addr">0x26</span>/<span class="hl-addr">0x70</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_12_content" style="display: none;"><div class="location-link"><strong>rcu_read_lock_held+0x25/0x70:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/update.c#L349" target="_blank">rcu_read_lock_held&nbsp;at&nbsp;kernel/rcu/update.c:349</a><div class="source-line">&nbsp;344&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;345&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> rcu_read_lock_held(<span class="c-keyword">void</span>)</div><div class="source-line">&nbsp;346&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;347&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool ret;</div><div class="source-line"> 348</div><div class="source-line current-line">&gt;349&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_read_lock_held_common(&amp;ret))</div><div class="source-line">&nbsp;350&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> ret;</div><div class="source-line">&nbsp;351&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> lock_is_held(&amp;rcu_lock_map);</div><div class="source-line">&nbsp;352&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;353&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL_GPL(rcu_read_lock_held);</div><div class="source-line"> 354</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L14" data-line-number="14" data-line-id="line_13" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_13')" ondblclick="handleDoubleClick(event, 'line_13')"><span class="line-number" onclick="updateAnchor('L14', event)" title="Click to copy anchor link">14</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                      <span class="hl-func">rcu_lockdep_current_cpu_online</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_read_lock_held_common+<span class="hl-addr">0x2a</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_13_content" style="display: none;"><div class="location-link"><strong>rcu_read_lock_held_common+0x29/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/update.c#L113" target="_blank">rcu_read_lock_held_common&nbsp;at&nbsp;kernel/rcu/update.c:113</a><div class="source-line">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!rcu_is_watching()) {</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ret = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;111&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line current-line">&gt;113&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!rcu_lockdep_current_cpu_online()) {</div><div class="source-line">&nbsp;114&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ret = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;115&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;117&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;118&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L15" data-line-number="15" data-line-id="line_14" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_14')" ondblclick="handleDoubleClick(event, 'line_14')"><span class="line-number" onclick="updateAnchor('L15', event)" title="Click to copy anchor link">15</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                        rcu_rdp_cpu_online.isra.0<span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_lockdep_current_cpu_online+<span class="hl-addr">0x48</span>/<span class="hl-addr">0x70</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_14_content" style="display: none;"><div class="location-link"><strong>rcu_lockdep_current_cpu_online+0x47/0x70:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree.c#L4040" target="_blank">rcu_lockdep_current_cpu_online&nbsp;at&nbsp;kernel/rcu/tree.c:4040</a><div class="source-line">&nbsp;4035&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* in rcutree_report_cpu_starting() and thus has an excuse <span class="c-keyword">for</span> rdp-&gt;grpmask</div><div class="source-line">&nbsp;4036&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* not being up to date. So arch_spin_is_locked() might have a</div><div class="source-line">&nbsp;4037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kernel-macro">false</span> positive <span class="c-keyword">if</span> it<span class="c-string">'s held by some *other* CPU, but that'</span>s</div><div class="source-line">&nbsp;4038&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* OK because that just means a <span class="kernel-macro">false</span> *negative* on the warning.</div><div class="source-line">&nbsp;4039&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;4040&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_rdp_cpu_online(rdp) || arch_spin_is_locked(&amp;rcu_state.ofl_lock))</div><div class="source-line">&nbsp;4041&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;4042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable_notrace();</div><div class="source-line">&nbsp;4043&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> ret;</div><div class="source-line">&nbsp;4044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;4045&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL_GPL(rcu_lockdep_current_cpu_online);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L16" data-line-number="16" data-line-id="line_15" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_15')" ondblclick="handleDoubleClick(event, 'line_15')"><span class="line-number" onclick="updateAnchor('L16', event)" title="Click to copy anchor link">16</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |                          <span class="hl-func">rcu_rnp_online_cpus</span><span class="hl-symbol">(</span>rnp=<span class="hl-addr">0xffffffff83781280</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-rcu_rdp_cpu_online.isra.0+<span class="hl-addr">0xe</span>/<span class="hl-addr">0x20</span> ret=<span class="hl-addr">0xff</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_15_content" style="display: none;"><div class="location-link"><strong>rcu_rdp_cpu_online.isra.0+0xd/0x20:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree.c#L3999" target="_blank">rcu_rdp_cpu_online&nbsp;at&nbsp;kernel/rcu/tree.c:3999</a><div class="source-line">&nbsp;3994&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* from RCU<span class="c-string">'s perspective?  This perspective is given by that structure'</span>s</div><div class="source-line">&nbsp;3995&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* -&gt;qsmaskinitnext field rather than by the global cpu_online_mask.</div><div class="source-line">&nbsp;3996&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;3997&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> bool rcu_rdp_cpu_online(<span class="c-keyword">struct</span> rcu_data *rdp)</div><div class="source-line">&nbsp;3998&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;3999&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> !!(rdp-&gt;grpmask &amp; rcu_rnp_online_cpus(rdp-&gt;mynode));</div><div class="source-line">&nbsp;4000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 4001</div><div class="source-line">&nbsp;4002&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool rcu_cpu_online(<span class="c-keyword">int</span> cpu)</div><div class="source-line">&nbsp;4003&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;4004&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> rcu_data *rdp = per_cpu_ptr(&amp;rcu_data, cpu);</div><div style="height: 10px;"></div></div><div class="line-container " id="L17" data-line-number="17" data-line-id="line_16" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L17', event)" title="Click to copy anchor link">17</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.225</span> <span class="hl-unit">us</span>    |                        <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_rdp_cpu_online.isra.0 ret=<span class="hl-addr">0x1</span> */</span></span></div><div class="line-container " id="L18" data-line-number="18" data-line-id="line_17" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L18', event)" title="Click to copy anchor link">18</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.377</span> <span class="hl-unit">us</span>    |                      <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_lockdep_current_cpu_online ret=true */</span></span></div><div class="line-container " id="L19" data-line-number="19" data-line-id="line_18" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L19', event)" title="Click to copy anchor link">19</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.527</span> <span class="hl-unit">us</span>    |                    <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_read_lock_held_common ret=false */</span></span></div><div class="line-container " id="L20" data-line-number="20" data-line-id="line_19" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L20', event)" title="Click to copy anchor link">20</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.692</span> <span class="hl-unit">us</span>    |                  <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_read_lock_held ret=1 */</span></span></div><div class="line-container expandable" id="L21" data-line-number="21" data-line-id="line_20" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_20')" ondblclick="handleDoubleClick(event, 'line_20')"><span class="line-number" onclick="updateAnchor('L21', event)" title="Click to copy anchor link">21</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.075</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">__msecs_to_jiffies</span><span class="hl-symbol">(</span>m=<span class="hl-addr">0x8</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-sched_balance_newidle+<span class="hl-addr">0x548</span>/<span class="hl-addr">0x780</span> ret=<span class="hl-addr">0x1</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_20_content" style="display: none;"><div class="location-link"><strong>sched_balance_newidle+0x547/0x780:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/jiffies.h#L525" target="_blank">msecs_to_jiffies&nbsp;at&nbsp;include/linux/jiffies.h:525</a><div class="source-line">&nbsp;520&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (__builtin_constant_p(m)) {</div><div class="source-line">&nbsp;521&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> ((<span class="c-keyword">int</span>)m &lt; <span class="c-number">0</span>)</div><div class="source-line">&nbsp;522&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> MAX_JIFFY_OFFSET;</div><div class="source-line">&nbsp;523&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> _msecs_to_jiffies(m);</div><div class="source-line">&nbsp;524&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="c-keyword">else</span> {</div><div class="source-line current-line">&gt;525&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> __msecs_to_jiffies(m);</div><div class="source-line">&nbsp;526&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;527&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 528</div><div class="source-line">&nbsp;529&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;530&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* secs_to_jiffies: - convert seconds to jiffies</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L12020" target="_blank">(inlined&nbsp;by)&nbsp;get_sd_balance_interval&nbsp;at&nbsp;kernel/sched/fair.c:12020</a><div class="source-line"> 12015</div><div class="source-line">&nbsp;12016&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (cpu_busy)</div><div class="source-line">&nbsp;12017&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interval *= sd-&gt;busy_factor;</div><div class="source-line"> 12018</div><div class="source-line">&nbsp;12019&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* scale ms to jiffies */</div><div class="source-line current-line">&gt;12020&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interval = msecs_to_jiffies(interval);</div><div class="source-line"> 12021</div><div class="source-line">&nbsp;12022&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;12023&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reduce likelihood of busy balancing at higher domains racing with</div><div class="source-line">&nbsp;12024&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* balancing at lower domains by preventing their balancing periods</div><div class="source-line">&nbsp;12025&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* from being multiples of each other.</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L12041" target="_blank">(inlined&nbsp;by)&nbsp;update_next_balance&nbsp;at&nbsp;kernel/sched/fair.c:12041</a><div class="source-line">&nbsp;12036&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_next_balance(<span class="c-keyword">struct</span> sched_domain *sd, unsigned long *next_balance)</div><div class="source-line">&nbsp;12037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;12038&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long interval, next;</div><div class="source-line"> 12039</div><div class="source-line">&nbsp;12040&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* used by idle balance, so cpu_busy = <span class="c-number">0</span> */</div><div class="source-line current-line">&gt;12041&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interval = get_sd_balance_interval(sd, <span class="c-number">0</span>);</div><div class="source-line">&nbsp;12042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next = sd-&gt;last_balance + interval;</div><div class="source-line"> 12043</div><div class="source-line">&nbsp;12044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (time_after(*next_balance, next))</div><div class="source-line">&nbsp;12045&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*next_balance = next;</div><div class="source-line">&nbsp;12046&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L12832" target="_blank">(inlined&nbsp;by)&nbsp;sched_balance_newidle&nbsp;at&nbsp;kernel/sched/fair.c:12832</a><div class="source-line"> 12827</div><div class="source-line">&nbsp;12828&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!get_rd_overloaded(this_rq-&gt;rd) ||</div><div class="source-line">&nbsp;12829&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(sd &amp;&amp; this_rq-&gt;avg_idle &lt; sd-&gt;max_newidle_lb_cost)) {</div><div class="source-line"> 12830</div><div class="source-line">&nbsp;12831&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (sd)</div><div class="source-line current-line">&gt;12832&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_next_balance(sd, &amp;next_balance);</div><div class="source-line">&nbsp;12833&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_read_unlock();</div><div class="source-line"> 12834</div><div class="source-line">&nbsp;12835&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">goto</span> out;</div><div class="source-line">&nbsp;12836&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;12837&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_read_unlock();</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L22" data-line-number="22" data-line-id="line_21" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_21')" ondblclick="handleDoubleClick(event, 'line_21')"><span class="line-number" onclick="updateAnchor('L22', event)" title="Click to copy anchor link">22</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                  <span class="hl-func">__rcu_read_unlock</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-sched_balance_newidle+<span class="hl-addr">0x36d</span>/<span class="hl-addr">0x780</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_21_content" style="display: none;"><div class="location-link"><strong>sched_balance_newidle+0x36c/0x780:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/rcupdate.h#L899" target="_blank">rcu_read_unlock&nbsp;at&nbsp;include/linux/rcupdate.h:899</a><div class="source-line">&nbsp;894&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;895&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RCU_LOCKDEP_WARN(!rcu_is_watching(),</div><div class="source-line">&nbsp;896&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-string">"rcu_read_unlock() used illegally <span class="c-keyword">while</span> idle"</span>);</div><div class="source-line">&nbsp;897&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_lock_release(&amp;rcu_lock_map); /* Keep acq info <span class="c-keyword">for</span> rls diags. */</div><div class="source-line">&nbsp;898&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kernel-attr">__release</span>(RCU);</div><div class="source-line current-line">&gt;899&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__rcu_read_unlock();</div><div class="source-line">&nbsp;900&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 901</div><div class="source-line">&nbsp;902&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;903&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* rcu_read_lock_bh() - mark the beginning of an RCU-bh critical section</div><div class="source-line">&nbsp;904&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L12833" target="_blank">(inlined&nbsp;by)&nbsp;sched_balance_newidle&nbsp;at&nbsp;kernel/sched/fair.c:12833</a><div class="source-line">&nbsp;12828&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!get_rd_overloaded(this_rq-&gt;rd) ||</div><div class="source-line">&nbsp;12829&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(sd &amp;&amp; this_rq-&gt;avg_idle &lt; sd-&gt;max_newidle_lb_cost)) {</div><div class="source-line"> 12830</div><div class="source-line">&nbsp;12831&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (sd)</div><div class="source-line">&nbsp;12832&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_next_balance(sd, &amp;next_balance);</div><div class="source-line current-line">&gt;12833&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_read_unlock();</div><div class="source-line"> 12834</div><div class="source-line">&nbsp;12835&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">goto</span> out;</div><div class="source-line">&nbsp;12836&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;12837&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_read_unlock();</div><div class="source-line"> 12838</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L23" data-line-number="23" data-line-id="line_22" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_22')" ondblclick="handleDoubleClick(event, 'line_22')"><span class="line-number" onclick="updateAnchor('L23', event)" title="Click to copy anchor link">23</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |                    <span class="hl-func">rcu_preempt_read_exit</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__rcu_read_unlock+<span class="hl-addr">0x17</span>/<span class="hl-addr">0x50</span> ret=0 */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_22_content" style="display: none;"><div class="location-link"><strong>__rcu_read_unlock+0x16/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree_plugin.h#L435" target="_blank">__rcu_read_unlock&nbsp;at&nbsp;kernel/rcu/tree_plugin.h:435</a><div class="source-line">&nbsp;430&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">void</span> __rcu_read_unlock(<span class="c-keyword">void</span>)</div><div class="source-line">&nbsp;431&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;432&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *t = current;</div><div class="source-line"> 433</div><div class="source-line">&nbsp;434&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier();  <span class="c-comment">// critical section before exit code.</span></div><div class="source-line current-line">&gt;435&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_preempt_read_exit() == <span class="c-number">0</span>) {</div><div class="source-line">&nbsp;436&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier();  <span class="c-comment">// critical-section exit before .s check.</span></div><div class="source-line">&nbsp;437&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (unlikely(READ_ONCE(t-&gt;rcu_read_unlock_special.s)))</div><div class="source-line">&nbsp;438&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_read_unlock_special(t);</div><div class="source-line">&nbsp;439&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;440&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (IS_ENABLED(CONFIG_PROVE_LOCKING)) {</div><div style="height: 10px;"></div></div><div class="line-container " id="L24" data-line-number="24" data-line-id="line_23" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L24', event)" title="Click to copy anchor link">24</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.224</span> <span class="hl-unit">us</span>    |                  <span class="hl-symbol">}</span> <span class="hl-comment">/* __rcu_read_unlock */</span></span></div><div class="line-container expandable" id="L25" data-line-number="25" data-line-id="line_24" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_24')" ondblclick="handleDoubleClick(event, 'line_24')"><span class="line-number" onclick="updateAnchor('L25', event)" title="Click to copy anchor link">25</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.082</span> <span class="hl-unit">us</span>    |                  nohz_newidle_balance.isra.0<span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-sched_balance_newidle+<span class="hl-addr">0x393</span>/<span class="hl-addr">0x780</span> ret=<span class="hl-addr">0xffffaf7b</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_24_content" style="display: none;"><div class="location-link"><strong>sched_balance_newidle+0x392/0x780:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L12908" target="_blank">sched_balance_newidle&nbsp;at&nbsp;kernel/sched/fair.c:12908</a><div class="source-line">&nbsp;12903&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this_rq-&gt;next_balance = next_balance;</div><div class="source-line"> 12904</div><div class="source-line">&nbsp;12905&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (pulled_task)</div><div class="source-line">&nbsp;12906&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this_rq-&gt;idle_stamp = <span class="c-number">0</span>;</div><div class="source-line">&nbsp;12907&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span></div><div class="source-line current-line">&gt;12908&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nohz_newidle_balance(this_rq);</div><div class="source-line"> 12909</div><div class="source-line">&nbsp;12910&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rq_repin_lock(this_rq, rf);</div><div class="source-line"> 12911</div><div class="source-line">&nbsp;12912&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> pulled_task;</div><div class="source-line">&nbsp;12913&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container " id="L26" data-line-number="26" data-line-id="line_25" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L26', event)" title="Click to copy anchor link">26</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">2.094</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* sched_balance_newidle ret=0 */</span></span></div><div class="line-container " id="L27" data-line-number="27" data-line-id="line_26" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L27', event)" title="Click to copy anchor link">27</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">2.513</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* pick_next_task_fair ret=<span class="hl-addr">0x0</span> */</span></span></div><div class="line-container expandable" id="L28" data-line-number="28" data-line-id="line_27" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_27')" ondblclick="handleDoubleClick(event, 'line_27')"><span class="line-number" onclick="updateAnchor('L28', event)" title="Click to copy anchor link">28</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |              <span class="hl-func">pick_task_idle</span><span class="hl-symbol">(</span>rq=<span class="hl-addr">0xffff88807ddad800</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__pick_next_task+<span class="hl-addr">0x134</span>/<span class="hl-addr">0x150</span> ret=<span class="hl-addr">0xffff888006058000</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_27_content" style="display: none;"><div class="location-link"><strong>__pick_next_task+0x133/0x150:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5975" target="_blank">__pick_next_task&nbsp;at&nbsp;kernel/sched/core.c:5975</a><div class="source-line">&nbsp;5970&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (unlikely(p == RETRY_TASK))</div><div class="source-line">&nbsp;5971&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">goto</span> restart;</div><div class="source-line"> 5972</div><div class="source-line">&nbsp;5973&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Assume the next prioritized class is idle_sched_class */</div><div class="source-line">&nbsp;5974&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!p) {</div><div class="source-line current-line">&gt;5975&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p = pick_task_idle(rq);</div><div class="source-line">&nbsp;5976&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put_prev_set_next_task(rq, prev, p);</div><div class="source-line">&nbsp;5977&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 5978</div><div class="source-line">&nbsp;5979&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> p;</div><div class="source-line">&nbsp;5980&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L29" data-line-number="29" data-line-id="line_28" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_28')" ondblclick="handleDoubleClick(event, 'line_28')"><span class="line-number" onclick="updateAnchor('L29', event)" title="Click to copy anchor link">29</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">put_prev_task_fair</span><span class="hl-symbol">(</span>rq=<span class="hl-addr">0xffff88807ddad800</span>, prev=<span class="hl-addr">0xffff888007949bc0</span>, next=<span class="hl-addr">0xffff888006058000</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__pick_next_task+<span class="hl-addr">0x104</span>/<span class="hl-addr">0x150</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_28_content" style="display: none;"><div class="location-link"><strong>__pick_next_task+0x103/0x150:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/sched.h#L2503" target="_blank">put_prev_set_next_task&nbsp;at&nbsp;kernel/sched/sched.h:2503</a><div class="source-line">&nbsp;2498&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__put_prev_set_next_dl_server(rq, prev, next);</div><div class="source-line"> 2499</div><div class="source-line">&nbsp;2500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (next == prev)</div><div class="source-line">&nbsp;2501&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 2502</div><div class="source-line current-line">&gt;2503&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev-&gt;sched_class-&gt;put_prev_task(rq, prev, next);</div><div class="source-line">&nbsp;2504&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next-&gt;sched_class-&gt;set_next_task(rq, next, <span class="kernel-macro">true</span>);</div><div class="source-line">&nbsp;2505&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2506</div><div class="source-line">&nbsp;2507&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;2508&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Helper to define a sched_class instance; each one is placed in a separate</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5993" target="_blank">(inlined&nbsp;by)&nbsp;__pick_next_task&nbsp;at&nbsp;kernel/sched/core.c:5993</a><div class="source-line">&nbsp;5988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (p)</div><div class="source-line">&nbsp;5989&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> p;</div><div class="source-line">&nbsp;5990&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="c-keyword">else</span> {</div><div class="source-line">&nbsp;5991&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p = class-&gt;pick_task(rq);</div><div class="source-line">&nbsp;5992&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (p) {</div><div class="source-line current-line">&gt;5993&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put_prev_set_next_task(rq, prev, p);</div><div class="source-line">&nbsp;5994&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> p;</div><div class="source-line">&nbsp;5995&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;5996&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;5997&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 5998</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L30" data-line-number="30" data-line-id="line_29" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_29')" ondblclick="handleDoubleClick(event, 'line_29')"><span class="line-number" onclick="updateAnchor('L30', event)" title="Click to copy anchor link">30</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">put_prev_entity</span><span class="hl-symbol">(</span>cfs_rq=<span class="hl-addr">0xffff888008e4d800</span>, prev=<span class="hl-addr">0xffff888007949c40</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-put_prev_task_fair+<span class="hl-addr">0x22</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_29_content" style="display: none;"><div class="location-link"><strong>put_prev_task_fair+0x21/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L8984" target="_blank">put_prev_task_fair&nbsp;at&nbsp;kernel/sched/fair.c:8984</a><div class="source-line">&nbsp;8979&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> sched_entity *se = &amp;prev-&gt;se;</div><div class="source-line">&nbsp;8980&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> cfs_rq *cfs_rq;</div><div class="source-line"> 8981</div><div class="source-line">&nbsp;8982&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_sched_entity(se) {</div><div class="source-line">&nbsp;8983&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cfs_rq = cfs_rq_of(se);</div><div class="source-line current-line">&gt;8984&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put_prev_entity(cfs_rq, se);</div><div class="source-line">&nbsp;8985&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;8986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 8987</div><div class="source-line">&nbsp;8988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;8989&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* sched_yield() is very simple</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L31" data-line-number="31" data-line-id="line_30" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_30')" ondblclick="handleDoubleClick(event, 'line_30')"><span class="line-number" onclick="updateAnchor('L31', event)" title="Click to copy anchor link">31</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">check_cfs_rq_runtime</span><span class="hl-symbol">(</span>cfs_rq=<span class="hl-addr">0xffff888008e4d800</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-put_prev_entity+<span class="hl-addr">0x1b</span>/<span class="hl-addr">0xa0</span> ret=false */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_30_content" style="display: none;"><div class="location-link"><strong>put_prev_entity+0x1a/0xa0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L5548" target="_blank">put_prev_entity&nbsp;at&nbsp;kernel/sched/fair.c:5548</a><div class="source-line">&nbsp;5543&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;5544&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (prev-&gt;on_rq)</div><div class="source-line">&nbsp;5545&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_curr(cfs_rq);</div><div class="source-line"> 5546</div><div class="source-line">&nbsp;5547&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* throttle cfs_rqs exceeding runtime */</div><div class="source-line current-line">&gt;5548&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_cfs_rq_runtime(cfs_rq);</div><div class="source-line"> 5549</div><div class="source-line">&nbsp;5550&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (prev-&gt;on_rq) {</div><div class="source-line">&nbsp;5551&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_stats_wait_start_fair(cfs_rq, prev);</div><div class="source-line">&nbsp;5552&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Put <span class="c-string">'current'</span> back into the tree. */</div><div class="source-line">&nbsp;5553&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__enqueue_entity(cfs_rq, prev);</div><div style="height: 10px;"></div></div><div class="line-container " id="L32" data-line-number="32" data-line-id="line_31" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L32', event)" title="Click to copy anchor link">32</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.244</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* put_prev_entity */</span></span></div><div class="line-container expandable" id="L33" data-line-number="33" data-line-id="line_32" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_32')" ondblclick="handleDoubleClick(event, 'line_32')"><span class="line-number" onclick="updateAnchor('L33', event)" title="Click to copy anchor link">33</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">put_prev_entity</span><span class="hl-symbol">(</span>cfs_rq=<span class="hl-addr">0xffff88807ddad940</span>, prev=<span class="hl-addr">0xffff8880057f4e00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-put_prev_task_fair+<span class="hl-addr">0x22</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_32_content" style="display: none;"><div class="location-link"><strong>put_prev_task_fair+0x21/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L8984" target="_blank">put_prev_task_fair&nbsp;at&nbsp;kernel/sched/fair.c:8984</a><div class="source-line">&nbsp;8979&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> sched_entity *se = &amp;prev-&gt;se;</div><div class="source-line">&nbsp;8980&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> cfs_rq *cfs_rq;</div><div class="source-line"> 8981</div><div class="source-line">&nbsp;8982&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_sched_entity(se) {</div><div class="source-line">&nbsp;8983&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cfs_rq = cfs_rq_of(se);</div><div class="source-line current-line">&gt;8984&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put_prev_entity(cfs_rq, se);</div><div class="source-line">&nbsp;8985&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;8986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 8987</div><div class="source-line">&nbsp;8988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;8989&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* sched_yield() is very simple</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L34" data-line-number="34" data-line-id="line_33" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_33')" ondblclick="handleDoubleClick(event, 'line_33')"><span class="line-number" onclick="updateAnchor('L34', event)" title="Click to copy anchor link">34</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">check_cfs_rq_runtime</span><span class="hl-symbol">(</span>cfs_rq=<span class="hl-addr">0xffff88807ddad940</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-put_prev_entity+<span class="hl-addr">0x1b</span>/<span class="hl-addr">0xa0</span> ret=false */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_33_content" style="display: none;"><div class="location-link"><strong>put_prev_entity+0x1a/0xa0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/fair.c#L5548" target="_blank">put_prev_entity&nbsp;at&nbsp;kernel/sched/fair.c:5548</a><div class="source-line">&nbsp;5543&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;5544&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (prev-&gt;on_rq)</div><div class="source-line">&nbsp;5545&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_curr(cfs_rq);</div><div class="source-line"> 5546</div><div class="source-line">&nbsp;5547&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* throttle cfs_rqs exceeding runtime */</div><div class="source-line current-line">&gt;5548&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_cfs_rq_runtime(cfs_rq);</div><div class="source-line"> 5549</div><div class="source-line">&nbsp;5550&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (prev-&gt;on_rq) {</div><div class="source-line">&nbsp;5551&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_stats_wait_start_fair(cfs_rq, prev);</div><div class="source-line">&nbsp;5552&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Put <span class="c-string">'current'</span> back into the tree. */</div><div class="source-line">&nbsp;5553&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__enqueue_entity(cfs_rq, prev);</div><div style="height: 10px;"></div></div><div class="line-container " id="L35" data-line-number="35" data-line-id="line_34" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L35', event)" title="Click to copy anchor link">35</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.224</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* put_prev_entity */</span></span></div><div class="line-container " id="L36" data-line-number="36" data-line-id="line_35" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L36', event)" title="Click to copy anchor link">36</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.719</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* put_prev_task_fair */</span></span></div><div class="line-container expandable" id="L37" data-line-number="37" data-line-id="line_36" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_36')" ondblclick="handleDoubleClick(event, 'line_36')"><span class="line-number" onclick="updateAnchor('L37', event)" title="Click to copy anchor link">37</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |              <span class="hl-func">set_next_task_idle</span><span class="hl-symbol">(</span>rq=<span class="hl-addr">0xffff88807ddad800</span>, next=<span class="hl-addr">0xffff888006058000</span>, first=<span class="hl-addr">0x1</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__pick_next_task+<span class="hl-addr">0x11d</span>/<span class="hl-addr">0x150</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_36_content" style="display: none;"><div class="location-link"><strong>__pick_next_task+0x11c/0x150:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/sched.h#L2504" target="_blank">put_prev_set_next_task&nbsp;at&nbsp;kernel/sched/sched.h:2504</a><div class="source-line"> 2499</div><div class="source-line">&nbsp;2500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (next == prev)</div><div class="source-line">&nbsp;2501&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 2502</div><div class="source-line">&nbsp;2503&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev-&gt;sched_class-&gt;put_prev_task(rq, prev, next);</div><div class="source-line current-line">&gt;2504&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next-&gt;sched_class-&gt;set_next_task(rq, next, <span class="kernel-macro">true</span>);</div><div class="source-line">&nbsp;2505&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2506</div><div class="source-line">&nbsp;2507&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;2508&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Helper to define a sched_class instance; each one is placed in a separate</div><div class="source-line">&nbsp;2509&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* section which is ordered by the linker script:</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5993" target="_blank">(inlined&nbsp;by)&nbsp;__pick_next_task&nbsp;at&nbsp;kernel/sched/core.c:5993</a><div class="source-line">&nbsp;5988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (p)</div><div class="source-line">&nbsp;5989&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> p;</div><div class="source-line">&nbsp;5990&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="c-keyword">else</span> {</div><div class="source-line">&nbsp;5991&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p = class-&gt;pick_task(rq);</div><div class="source-line">&nbsp;5992&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (p) {</div><div class="source-line current-line">&gt;5993&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put_prev_set_next_task(rq, prev, p);</div><div class="source-line">&nbsp;5994&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> p;</div><div class="source-line">&nbsp;5995&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;5996&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;5997&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 5998</div><div style="height: 10px;"></div></div><div class="line-container " id="L38" data-line-number="38" data-line-id="line_37" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L38', event)" title="Click to copy anchor link">38</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">3.977</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* pick_next_task ret=<span class="hl-addr">0xffff888006058000</span> */</span></span></div><div class="line-container expandable" id="L39" data-line-number="39" data-line-id="line_38" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_38')" ondblclick="handleDoubleClick(event, 'line_38')"><span class="line-number" onclick="updateAnchor('L39', event)" title="Click to copy anchor link">39</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |            migrate_disable_switch.isra.0<span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__schedule+<span class="hl-addr">0x1a4</span>/<span class="hl-addr">0x700</span> ret=<span class="hl-addr">0x0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_38_content" style="display: none;"><div class="location-link"><strong>__schedule+0x1a3/0x700:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L6921" target="_blank">__schedule&nbsp;at&nbsp;kernel/sched/core.c:6921</a><div class="source-line">&nbsp;6916&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* SYNC_CORE command when switching between processes, cf.</div><div class="source-line">&nbsp;6917&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the <span class="c-keyword">inline</span> comments in membarrier_arch_switch_mm().</div><div class="source-line">&nbsp;6918&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;6919&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++*switch_count;</div><div class="source-line"> 6920</div><div class="source-line current-line">&gt;6921&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;migrate_disable_switch(rq, prev);</div><div class="source-line">&nbsp;6922&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_account_irqtime(rq, prev, next);</div><div class="source-line">&nbsp;6923&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_sched_switch(prev, next, !task_on_rq_queued(prev) ||</div><div class="source-line">&nbsp;6924&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev-&gt;se.sched_delayed);</div><div class="source-line"> 6925</div><div class="source-line">&nbsp;6926&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_sched_switch(preempt, prev, next, prev_state);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L40" data-line-number="40" data-line-id="line_39" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_39')" ondblclick="handleDoubleClick(event, 'line_39')"><span class="line-number" onclick="updateAnchor('L40', event)" title="Click to copy anchor link">40</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">psi_account_irqtime</span><span class="hl-symbol">(</span>rq=<span class="hl-addr">0xffff88807ddad800</span>, curr=<span class="hl-addr">0xffff888007949bc0</span>, prev=<span class="hl-addr">0xffff888006058000</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__schedule+<span class="hl-addr">0x1b2</span>/<span class="hl-addr">0x700</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_39_content" style="display: none;"><div class="location-link"><strong>__schedule+0x1b1/0x700:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L6922" target="_blank">__schedule&nbsp;at&nbsp;kernel/sched/core.c:6922</a><div class="source-line">&nbsp;6917&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the <span class="c-keyword">inline</span> comments in membarrier_arch_switch_mm().</div><div class="source-line">&nbsp;6918&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;6919&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++*switch_count;</div><div class="source-line"> 6920</div><div class="source-line">&nbsp;6921&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;migrate_disable_switch(rq, prev);</div><div class="source-line current-line">&gt;6922&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_account_irqtime(rq, prev, next);</div><div class="source-line">&nbsp;6923&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_sched_switch(prev, next, !task_on_rq_queued(prev) ||</div><div class="source-line">&nbsp;6924&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev-&gt;se.sched_delayed);</div><div class="source-line"> 6925</div><div class="source-line">&nbsp;6926&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_sched_switch(preempt, prev, next, prev_state);</div><div class="source-line"> 6927</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L41" data-line-number="41" data-line-id="line_40" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_40')" ondblclick="handleDoubleClick(event, 'line_40')"><span class="line-number" onclick="updateAnchor('L41', event)" title="Click to copy anchor link">41</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">rcu_read_lock_sched_held</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-psi_account_irqtime+<span class="hl-addr">0x28d</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_40_content" style="display: none;"><div class="location-link"><strong>psi_account_irqtime+0x28c/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/cgroup.h#L446" target="_blank">task_css_set&nbsp;at&nbsp;include/linux/cgroup.h:446</a><div class="source-line">&nbsp;441&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</div><div class="source-line">&nbsp;442&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* See task_css_set_check().</div><div class="source-line">&nbsp;443&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;444&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> css_set *task_css_set(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;445&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;446&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css_set_check(task, <span class="kernel-macro">false</span>);</div><div class="source-line">&nbsp;447&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 448</div><div class="source-line">&nbsp;449&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;450&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* task_css - obtain css <span class="c-keyword">for</span> (task, subsys)</div><div class="source-line">&nbsp;451&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @task: the target task</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/cgroup.h#L515" target="_blank">(inlined&nbsp;by)&nbsp;task_dfl_cgroup&nbsp;at&nbsp;include/linux/cgroup.h:515</a><div class="source-line">&nbsp;510&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css(task, subsys_id)-&gt;cgroup;</div><div class="source-line">&nbsp;511&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 512</div><div class="source-line">&nbsp;513&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> cgroup *task_dfl_cgroup(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;514&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;515&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css_set(task)-&gt;dfl_cgrp;</div><div class="source-line">&nbsp;516&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 517</div><div class="source-line">&nbsp;518&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> cgroup *cgroup_parent(<span class="c-keyword">struct</span> cgroup *cgrp)</div><div class="source-line">&nbsp;519&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;520&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> cgroup_subsys_state *parent_css = cgrp-&gt;self.parent;</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L889" target="_blank">(inlined&nbsp;by)&nbsp;task_psi_group&nbsp;at&nbsp;kernel/sched/psi.c:889</a><div class="source-line"> 884</div><div class="source-line">&nbsp;885&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> psi_group *task_psi_group(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;886&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;887&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_CGROUPS</div><div class="source-line">&nbsp;888&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (static_branch_likely(&amp;psi_cgroups_enabled))</div><div class="source-line current-line">&gt;889&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> cgroup_psi(task_dfl_cgroup(task));</div><div class="source-line">&nbsp;890&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line">&nbsp;891&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> &amp;psi_system;</div><div class="source-line">&nbsp;892&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 893</div><div class="source-line">&nbsp;894&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">void</span> psi_flags_change(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task, <span class="c-keyword">int</span> clear, <span class="c-keyword">int</span> set)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L1021" target="_blank">(inlined&nbsp;by)&nbsp;psi_account_irqtime&nbsp;at&nbsp;kernel/sched/psi.c:1021</a><div class="source-line"> 1016</div><div class="source-line">&nbsp;1017&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!curr-&gt;pid)</div><div class="source-line">&nbsp;1018&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 1019</div><div class="source-line">&nbsp;1020&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lockdep_assert_rq_held(rq);</div><div class="source-line current-line">&gt;1021&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (prev &amp;&amp; task_psi_group(prev) == task_psi_group(curr))</div><div class="source-line">&nbsp;1022&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 1023</div><div class="source-line">&nbsp;1024&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irq = irq_time_read(cpu);</div><div class="source-line">&nbsp;1025&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta = (<span class="kernel-type">s64</span>)(irq - rq-&gt;psi_irq_time);</div><div class="source-line">&nbsp;1026&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (delta &lt; <span class="c-number">0</span>)</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L42" data-line-number="42" data-line-id="line_41" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_41')" ondblclick="handleDoubleClick(event, 'line_41')"><span class="line-number" onclick="updateAnchor('L42', event)" title="Click to copy anchor link">42</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">rcu_read_lock_held_common</span><span class="hl-symbol">(</span>ret=<span class="hl-addr">0xffffc900013f3da7</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_read_lock_sched_held+<span class="hl-addr">0x26</span>/<span class="hl-addr">0x90</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_41_content" style="display: none;"><div class="location-link"><strong>rcu_read_lock_sched_held+0x25/0x90:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/update.c#L124" target="_blank">rcu_read_lock_sched_held&nbsp;at&nbsp;kernel/rcu/update.c:124</a><div class="source-line"> 119</div><div class="source-line">&nbsp;120&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> rcu_read_lock_sched_held(<span class="c-keyword">void</span>)</div><div class="source-line">&nbsp;121&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;122&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool ret;</div><div class="source-line"> 123</div><div class="source-line current-line">&gt;124&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_read_lock_held_common(&amp;ret))</div><div class="source-line">&nbsp;125&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> ret;</div><div class="source-line">&nbsp;126&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> lock_is_held(&amp;rcu_sched_lock_map) || !preemptible();</div><div class="source-line">&nbsp;127&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(rcu_read_lock_sched_held);</div><div class="source-line">&nbsp;129&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L43" data-line-number="43" data-line-id="line_42" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_42')" ondblclick="handleDoubleClick(event, 'line_42')"><span class="line-number" onclick="updateAnchor('L43', event)" title="Click to copy anchor link">43</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                  <span class="hl-func">rcu_lockdep_current_cpu_online</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_read_lock_held_common+<span class="hl-addr">0x2a</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_42_content" style="display: none;"><div class="location-link"><strong>rcu_read_lock_held_common+0x29/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/update.c#L113" target="_blank">rcu_read_lock_held_common&nbsp;at&nbsp;kernel/rcu/update.c:113</a><div class="source-line">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!rcu_is_watching()) {</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ret = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;111&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line current-line">&gt;113&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!rcu_lockdep_current_cpu_online()) {</div><div class="source-line">&nbsp;114&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ret = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;115&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;117&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;118&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L44" data-line-number="44" data-line-id="line_43" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_43')" ondblclick="handleDoubleClick(event, 'line_43')"><span class="line-number" onclick="updateAnchor('L44', event)" title="Click to copy anchor link">44</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                    rcu_rdp_cpu_online.isra.0<span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_lockdep_current_cpu_online+<span class="hl-addr">0x48</span>/<span class="hl-addr">0x70</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_43_content" style="display: none;"><div class="location-link"><strong>rcu_lockdep_current_cpu_online+0x47/0x70:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree.c#L4040" target="_blank">rcu_lockdep_current_cpu_online&nbsp;at&nbsp;kernel/rcu/tree.c:4040</a><div class="source-line">&nbsp;4035&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* in rcutree_report_cpu_starting() and thus has an excuse <span class="c-keyword">for</span> rdp-&gt;grpmask</div><div class="source-line">&nbsp;4036&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* not being up to date. So arch_spin_is_locked() might have a</div><div class="source-line">&nbsp;4037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kernel-macro">false</span> positive <span class="c-keyword">if</span> it<span class="c-string">'s held by some *other* CPU, but that'</span>s</div><div class="source-line">&nbsp;4038&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* OK because that just means a <span class="kernel-macro">false</span> *negative* on the warning.</div><div class="source-line">&nbsp;4039&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;4040&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_rdp_cpu_online(rdp) || arch_spin_is_locked(&amp;rcu_state.ofl_lock))</div><div class="source-line">&nbsp;4041&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;4042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable_notrace();</div><div class="source-line">&nbsp;4043&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> ret;</div><div class="source-line">&nbsp;4044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;4045&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL_GPL(rcu_lockdep_current_cpu_online);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L45" data-line-number="45" data-line-id="line_44" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_44')" ondblclick="handleDoubleClick(event, 'line_44')"><span class="line-number" onclick="updateAnchor('L45', event)" title="Click to copy anchor link">45</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |                      <span class="hl-func">rcu_rnp_online_cpus</span><span class="hl-symbol">(</span>rnp=<span class="hl-addr">0xffffffff83781280</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-rcu_rdp_cpu_online.isra.0+<span class="hl-addr">0xe</span>/<span class="hl-addr">0x20</span> ret=<span class="hl-addr">0xff</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_44_content" style="display: none;"><div class="location-link"><strong>rcu_rdp_cpu_online.isra.0+0xd/0x20:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree.c#L3999" target="_blank">rcu_rdp_cpu_online&nbsp;at&nbsp;kernel/rcu/tree.c:3999</a><div class="source-line">&nbsp;3994&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* from RCU<span class="c-string">'s perspective?  This perspective is given by that structure'</span>s</div><div class="source-line">&nbsp;3995&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* -&gt;qsmaskinitnext field rather than by the global cpu_online_mask.</div><div class="source-line">&nbsp;3996&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;3997&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> bool rcu_rdp_cpu_online(<span class="c-keyword">struct</span> rcu_data *rdp)</div><div class="source-line">&nbsp;3998&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;3999&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> !!(rdp-&gt;grpmask &amp; rcu_rnp_online_cpus(rdp-&gt;mynode));</div><div class="source-line">&nbsp;4000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 4001</div><div class="source-line">&nbsp;4002&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool rcu_cpu_online(<span class="c-keyword">int</span> cpu)</div><div class="source-line">&nbsp;4003&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;4004&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> rcu_data *rdp = per_cpu_ptr(&amp;rcu_data, cpu);</div><div style="height: 10px;"></div></div><div class="line-container " id="L46" data-line-number="46" data-line-id="line_45" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L46', event)" title="Click to copy anchor link">46</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.225</span> <span class="hl-unit">us</span>    |                    <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_rdp_cpu_online.isra.0 ret=<span class="hl-addr">0x1</span> */</span></span></div><div class="line-container " id="L47" data-line-number="47" data-line-id="line_46" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L47', event)" title="Click to copy anchor link">47</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.375</span> <span class="hl-unit">us</span>    |                  <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_lockdep_current_cpu_online ret=true */</span></span></div><div class="line-container " id="L48" data-line-number="48" data-line-id="line_47" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L48', event)" title="Click to copy anchor link">48</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.530</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_read_lock_held_common ret=false */</span></span></div><div class="line-container " id="L49" data-line-number="49" data-line-id="line_48" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L49', event)" title="Click to copy anchor link">49</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.687</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_read_lock_sched_held ret=1 */</span></span></div><div class="line-container expandable" id="L50" data-line-number="50" data-line-id="line_49" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_49')" ondblclick="handleDoubleClick(event, 'line_49')"><span class="line-number" onclick="updateAnchor('L50', event)" title="Click to copy anchor link">50</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">rcu_read_lock_sched_held</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-psi_account_irqtime+<span class="hl-addr">0x323</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_49_content" style="display: none;"><div class="location-link"><strong>psi_account_irqtime+0x322/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/cgroup.h#L446" target="_blank">task_css_set&nbsp;at&nbsp;include/linux/cgroup.h:446</a><div class="source-line">&nbsp;441&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</div><div class="source-line">&nbsp;442&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* See task_css_set_check().</div><div class="source-line">&nbsp;443&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;444&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> css_set *task_css_set(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;445&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;446&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css_set_check(task, <span class="kernel-macro">false</span>);</div><div class="source-line">&nbsp;447&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 448</div><div class="source-line">&nbsp;449&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;450&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* task_css - obtain css <span class="c-keyword">for</span> (task, subsys)</div><div class="source-line">&nbsp;451&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @task: the target task</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/cgroup.h#L515" target="_blank">(inlined&nbsp;by)&nbsp;task_dfl_cgroup&nbsp;at&nbsp;include/linux/cgroup.h:515</a><div class="source-line">&nbsp;510&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css(task, subsys_id)-&gt;cgroup;</div><div class="source-line">&nbsp;511&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 512</div><div class="source-line">&nbsp;513&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> cgroup *task_dfl_cgroup(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;514&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;515&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css_set(task)-&gt;dfl_cgrp;</div><div class="source-line">&nbsp;516&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 517</div><div class="source-line">&nbsp;518&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> cgroup *cgroup_parent(<span class="c-keyword">struct</span> cgroup *cgrp)</div><div class="source-line">&nbsp;519&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;520&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> cgroup_subsys_state *parent_css = cgrp-&gt;self.parent;</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L889" target="_blank">(inlined&nbsp;by)&nbsp;task_psi_group&nbsp;at&nbsp;kernel/sched/psi.c:889</a><div class="source-line"> 884</div><div class="source-line">&nbsp;885&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> psi_group *task_psi_group(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;886&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;887&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_CGROUPS</div><div class="source-line">&nbsp;888&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (static_branch_likely(&amp;psi_cgroups_enabled))</div><div class="source-line current-line">&gt;889&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> cgroup_psi(task_dfl_cgroup(task));</div><div class="source-line">&nbsp;890&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line">&nbsp;891&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> &amp;psi_system;</div><div class="source-line">&nbsp;892&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 893</div><div class="source-line">&nbsp;894&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">void</span> psi_flags_change(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task, <span class="c-keyword">int</span> clear, <span class="c-keyword">int</span> set)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L1021" target="_blank">(inlined&nbsp;by)&nbsp;psi_account_irqtime&nbsp;at&nbsp;kernel/sched/psi.c:1021</a><div class="source-line"> 1016</div><div class="source-line">&nbsp;1017&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!curr-&gt;pid)</div><div class="source-line">&nbsp;1018&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 1019</div><div class="source-line">&nbsp;1020&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lockdep_assert_rq_held(rq);</div><div class="source-line current-line">&gt;1021&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (prev &amp;&amp; task_psi_group(prev) == task_psi_group(curr))</div><div class="source-line">&nbsp;1022&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 1023</div><div class="source-line">&nbsp;1024&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irq = irq_time_read(cpu);</div><div class="source-line">&nbsp;1025&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta = (<span class="kernel-type">s64</span>)(irq - rq-&gt;psi_irq_time);</div><div class="source-line">&nbsp;1026&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (delta &lt; <span class="c-number">0</span>)</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L51" data-line-number="51" data-line-id="line_50" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_50')" ondblclick="handleDoubleClick(event, 'line_50')"><span class="line-number" onclick="updateAnchor('L51', event)" title="Click to copy anchor link">51</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">rcu_read_lock_held_common</span><span class="hl-symbol">(</span>ret=<span class="hl-addr">0xffffc900013f3da7</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_read_lock_sched_held+<span class="hl-addr">0x26</span>/<span class="hl-addr">0x90</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_50_content" style="display: none;"><div class="location-link"><strong>rcu_read_lock_sched_held+0x25/0x90:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/update.c#L124" target="_blank">rcu_read_lock_sched_held&nbsp;at&nbsp;kernel/rcu/update.c:124</a><div class="source-line"> 119</div><div class="source-line">&nbsp;120&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> rcu_read_lock_sched_held(<span class="c-keyword">void</span>)</div><div class="source-line">&nbsp;121&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;122&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool ret;</div><div class="source-line"> 123</div><div class="source-line current-line">&gt;124&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_read_lock_held_common(&amp;ret))</div><div class="source-line">&nbsp;125&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> ret;</div><div class="source-line">&nbsp;126&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> lock_is_held(&amp;rcu_sched_lock_map) || !preemptible();</div><div class="source-line">&nbsp;127&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(rcu_read_lock_sched_held);</div><div class="source-line">&nbsp;129&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L52" data-line-number="52" data-line-id="line_51" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_51')" ondblclick="handleDoubleClick(event, 'line_51')"><span class="line-number" onclick="updateAnchor('L52', event)" title="Click to copy anchor link">52</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                  <span class="hl-func">rcu_lockdep_current_cpu_online</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_read_lock_held_common+<span class="hl-addr">0x2a</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_51_content" style="display: none;"><div class="location-link"><strong>rcu_read_lock_held_common+0x29/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/update.c#L113" target="_blank">rcu_read_lock_held_common&nbsp;at&nbsp;kernel/rcu/update.c:113</a><div class="source-line">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!rcu_is_watching()) {</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ret = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;111&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line current-line">&gt;113&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!rcu_lockdep_current_cpu_online()) {</div><div class="source-line">&nbsp;114&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ret = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;115&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;117&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;118&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L53" data-line-number="53" data-line-id="line_52" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_52')" ondblclick="handleDoubleClick(event, 'line_52')"><span class="line-number" onclick="updateAnchor('L53', event)" title="Click to copy anchor link">53</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                    rcu_rdp_cpu_online.isra.0<span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_lockdep_current_cpu_online+<span class="hl-addr">0x48</span>/<span class="hl-addr">0x70</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_52_content" style="display: none;"><div class="location-link"><strong>rcu_lockdep_current_cpu_online+0x47/0x70:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree.c#L4040" target="_blank">rcu_lockdep_current_cpu_online&nbsp;at&nbsp;kernel/rcu/tree.c:4040</a><div class="source-line">&nbsp;4035&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* in rcutree_report_cpu_starting() and thus has an excuse <span class="c-keyword">for</span> rdp-&gt;grpmask</div><div class="source-line">&nbsp;4036&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* not being up to date. So arch_spin_is_locked() might have a</div><div class="source-line">&nbsp;4037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kernel-macro">false</span> positive <span class="c-keyword">if</span> it<span class="c-string">'s held by some *other* CPU, but that'</span>s</div><div class="source-line">&nbsp;4038&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* OK because that just means a <span class="kernel-macro">false</span> *negative* on the warning.</div><div class="source-line">&nbsp;4039&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;4040&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_rdp_cpu_online(rdp) || arch_spin_is_locked(&amp;rcu_state.ofl_lock))</div><div class="source-line">&nbsp;4041&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;4042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable_notrace();</div><div class="source-line">&nbsp;4043&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> ret;</div><div class="source-line">&nbsp;4044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;4045&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL_GPL(rcu_lockdep_current_cpu_online);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L54" data-line-number="54" data-line-id="line_53" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_53')" ondblclick="handleDoubleClick(event, 'line_53')"><span class="line-number" onclick="updateAnchor('L54', event)" title="Click to copy anchor link">54</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.075</span> <span class="hl-unit">us</span>    |                      <span class="hl-func">rcu_rnp_online_cpus</span><span class="hl-symbol">(</span>rnp=<span class="hl-addr">0xffffffff83781280</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-rcu_rdp_cpu_online.isra.0+<span class="hl-addr">0xe</span>/<span class="hl-addr">0x20</span> ret=<span class="hl-addr">0xff</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_53_content" style="display: none;"><div class="location-link"><strong>rcu_rdp_cpu_online.isra.0+0xd/0x20:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree.c#L3999" target="_blank">rcu_rdp_cpu_online&nbsp;at&nbsp;kernel/rcu/tree.c:3999</a><div class="source-line">&nbsp;3994&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* from RCU<span class="c-string">'s perspective?  This perspective is given by that structure'</span>s</div><div class="source-line">&nbsp;3995&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* -&gt;qsmaskinitnext field rather than by the global cpu_online_mask.</div><div class="source-line">&nbsp;3996&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;3997&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> bool rcu_rdp_cpu_online(<span class="c-keyword">struct</span> rcu_data *rdp)</div><div class="source-line">&nbsp;3998&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;3999&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> !!(rdp-&gt;grpmask &amp; rcu_rnp_online_cpus(rdp-&gt;mynode));</div><div class="source-line">&nbsp;4000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 4001</div><div class="source-line">&nbsp;4002&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool rcu_cpu_online(<span class="c-keyword">int</span> cpu)</div><div class="source-line">&nbsp;4003&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;4004&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> rcu_data *rdp = per_cpu_ptr(&amp;rcu_data, cpu);</div><div style="height: 10px;"></div></div><div class="line-container " id="L55" data-line-number="55" data-line-id="line_54" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L55', event)" title="Click to copy anchor link">55</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.223</span> <span class="hl-unit">us</span>    |                    <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_rdp_cpu_online.isra.0 ret=<span class="hl-addr">0x1</span> */</span></span></div><div class="line-container " id="L56" data-line-number="56" data-line-id="line_55" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L56', event)" title="Click to copy anchor link">56</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.455</span> <span class="hl-unit">us</span>    |                  <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_lockdep_current_cpu_online ret=true */</span></span></div><div class="line-container " id="L57" data-line-number="57" data-line-id="line_56" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L57', event)" title="Click to copy anchor link">57</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.604</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_read_lock_held_common ret=false */</span></span></div><div class="line-container " id="L58" data-line-number="58" data-line-id="line_57" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L58', event)" title="Click to copy anchor link">58</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.764</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_read_lock_sched_held ret=1 */</span></span></div><div class="line-container expandable" id="L59" data-line-number="59" data-line-id="line_58" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_58')" ondblclick="handleDoubleClick(event, 'line_58')"><span class="line-number" onclick="updateAnchor('L59', event)" title="Click to copy anchor link">59</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">rcu_read_lock_sched_held</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-psi_account_irqtime+<span class="hl-addr">0x3b5</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_58_content" style="display: none;"><div class="location-link"><strong>psi_account_irqtime+0x3b4/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/cgroup.h#L446" target="_blank">task_css_set&nbsp;at&nbsp;include/linux/cgroup.h:446</a><div class="source-line">&nbsp;441&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</div><div class="source-line">&nbsp;442&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* See task_css_set_check().</div><div class="source-line">&nbsp;443&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;444&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> css_set *task_css_set(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;445&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;446&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css_set_check(task, <span class="kernel-macro">false</span>);</div><div class="source-line">&nbsp;447&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 448</div><div class="source-line">&nbsp;449&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;450&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* task_css - obtain css <span class="c-keyword">for</span> (task, subsys)</div><div class="source-line">&nbsp;451&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @task: the target task</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/cgroup.h#L515" target="_blank">(inlined&nbsp;by)&nbsp;task_dfl_cgroup&nbsp;at&nbsp;include/linux/cgroup.h:515</a><div class="source-line">&nbsp;510&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css(task, subsys_id)-&gt;cgroup;</div><div class="source-line">&nbsp;511&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 512</div><div class="source-line">&nbsp;513&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> cgroup *task_dfl_cgroup(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;514&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;515&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css_set(task)-&gt;dfl_cgrp;</div><div class="source-line">&nbsp;516&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 517</div><div class="source-line">&nbsp;518&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> cgroup *cgroup_parent(<span class="c-keyword">struct</span> cgroup *cgrp)</div><div class="source-line">&nbsp;519&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;520&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> cgroup_subsys_state *parent_css = cgrp-&gt;self.parent;</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L889" target="_blank">(inlined&nbsp;by)&nbsp;task_psi_group&nbsp;at&nbsp;kernel/sched/psi.c:889</a><div class="source-line"> 884</div><div class="source-line">&nbsp;885&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> psi_group *task_psi_group(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;886&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;887&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_CGROUPS</div><div class="source-line">&nbsp;888&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (static_branch_likely(&amp;psi_cgroups_enabled))</div><div class="source-line current-line">&gt;889&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> cgroup_psi(task_dfl_cgroup(task));</div><div class="source-line">&nbsp;890&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line">&nbsp;891&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> &amp;psi_system;</div><div class="source-line">&nbsp;892&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 893</div><div class="source-line">&nbsp;894&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">void</span> psi_flags_change(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task, <span class="c-keyword">int</span> clear, <span class="c-keyword">int</span> set)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L1033" target="_blank">(inlined&nbsp;by)&nbsp;psi_account_irqtime&nbsp;at&nbsp;kernel/sched/psi.c:1033</a><div class="source-line">&nbsp;1028&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rq-&gt;psi_irq_time = irq;</div><div class="source-line"> 1029</div><div class="source-line">&nbsp;1030&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_write_begin(cpu);</div><div class="source-line">&nbsp;1031&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = cpu_clock(cpu);</div><div class="source-line"> 1032</div><div class="source-line current-line">&gt;1033&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_group(group, task_psi_group(curr)) {</div><div class="source-line">&nbsp;1034&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!group-&gt;enabled)</div><div class="source-line">&nbsp;1035&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">continue</span>;</div><div class="source-line"> 1036</div><div class="source-line">&nbsp;1037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc = per_cpu_ptr(group-&gt;pcpu, cpu);</div><div class="source-line"> 1038</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L60" data-line-number="60" data-line-id="line_59" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_59')" ondblclick="handleDoubleClick(event, 'line_59')"><span class="line-number" onclick="updateAnchor('L60', event)" title="Click to copy anchor link">60</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">rcu_read_lock_held_common</span><span class="hl-symbol">(</span>ret=<span class="hl-addr">0xffffc900013f3da7</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_read_lock_sched_held+<span class="hl-addr">0x26</span>/<span class="hl-addr">0x90</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_59_content" style="display: none;"><div class="location-link"><strong>rcu_read_lock_sched_held+0x25/0x90:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/update.c#L124" target="_blank">rcu_read_lock_sched_held&nbsp;at&nbsp;kernel/rcu/update.c:124</a><div class="source-line"> 119</div><div class="source-line">&nbsp;120&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> rcu_read_lock_sched_held(<span class="c-keyword">void</span>)</div><div class="source-line">&nbsp;121&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;122&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool ret;</div><div class="source-line"> 123</div><div class="source-line current-line">&gt;124&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_read_lock_held_common(&amp;ret))</div><div class="source-line">&nbsp;125&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> ret;</div><div class="source-line">&nbsp;126&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> lock_is_held(&amp;rcu_sched_lock_map) || !preemptible();</div><div class="source-line">&nbsp;127&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(rcu_read_lock_sched_held);</div><div class="source-line">&nbsp;129&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L61" data-line-number="61" data-line-id="line_60" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_60')" ondblclick="handleDoubleClick(event, 'line_60')"><span class="line-number" onclick="updateAnchor('L61', event)" title="Click to copy anchor link">61</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                  <span class="hl-func">rcu_lockdep_current_cpu_online</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_read_lock_held_common+<span class="hl-addr">0x2a</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_60_content" style="display: none;"><div class="location-link"><strong>rcu_read_lock_held_common+0x29/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/update.c#L113" target="_blank">rcu_read_lock_held_common&nbsp;at&nbsp;kernel/rcu/update.c:113</a><div class="source-line">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!rcu_is_watching()) {</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ret = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;111&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line current-line">&gt;113&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!rcu_lockdep_current_cpu_online()) {</div><div class="source-line">&nbsp;114&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ret = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;115&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;117&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;118&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L62" data-line-number="62" data-line-id="line_61" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_61')" ondblclick="handleDoubleClick(event, 'line_61')"><span class="line-number" onclick="updateAnchor('L62', event)" title="Click to copy anchor link">62</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                    rcu_rdp_cpu_online.isra.0<span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_lockdep_current_cpu_online+<span class="hl-addr">0x48</span>/<span class="hl-addr">0x70</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_61_content" style="display: none;"><div class="location-link"><strong>rcu_lockdep_current_cpu_online+0x47/0x70:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree.c#L4040" target="_blank">rcu_lockdep_current_cpu_online&nbsp;at&nbsp;kernel/rcu/tree.c:4040</a><div class="source-line">&nbsp;4035&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* in rcutree_report_cpu_starting() and thus has an excuse <span class="c-keyword">for</span> rdp-&gt;grpmask</div><div class="source-line">&nbsp;4036&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* not being up to date. So arch_spin_is_locked() might have a</div><div class="source-line">&nbsp;4037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kernel-macro">false</span> positive <span class="c-keyword">if</span> it<span class="c-string">'s held by some *other* CPU, but that'</span>s</div><div class="source-line">&nbsp;4038&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* OK because that just means a <span class="kernel-macro">false</span> *negative* on the warning.</div><div class="source-line">&nbsp;4039&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;4040&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_rdp_cpu_online(rdp) || arch_spin_is_locked(&amp;rcu_state.ofl_lock))</div><div class="source-line">&nbsp;4041&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;4042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable_notrace();</div><div class="source-line">&nbsp;4043&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> ret;</div><div class="source-line">&nbsp;4044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;4045&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL_GPL(rcu_lockdep_current_cpu_online);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L63" data-line-number="63" data-line-id="line_62" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_62')" ondblclick="handleDoubleClick(event, 'line_62')"><span class="line-number" onclick="updateAnchor('L63', event)" title="Click to copy anchor link">63</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |                      <span class="hl-func">rcu_rnp_online_cpus</span><span class="hl-symbol">(</span>rnp=<span class="hl-addr">0xffffffff83781280</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-rcu_rdp_cpu_online.isra.0+<span class="hl-addr">0xe</span>/<span class="hl-addr">0x20</span> ret=<span class="hl-addr">0xff</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_62_content" style="display: none;"><div class="location-link"><strong>rcu_rdp_cpu_online.isra.0+0xd/0x20:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree.c#L3999" target="_blank">rcu_rdp_cpu_online&nbsp;at&nbsp;kernel/rcu/tree.c:3999</a><div class="source-line">&nbsp;3994&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* from RCU<span class="c-string">'s perspective?  This perspective is given by that structure'</span>s</div><div class="source-line">&nbsp;3995&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* -&gt;qsmaskinitnext field rather than by the global cpu_online_mask.</div><div class="source-line">&nbsp;3996&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;3997&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> bool rcu_rdp_cpu_online(<span class="c-keyword">struct</span> rcu_data *rdp)</div><div class="source-line">&nbsp;3998&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;3999&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> !!(rdp-&gt;grpmask &amp; rcu_rnp_online_cpus(rdp-&gt;mynode));</div><div class="source-line">&nbsp;4000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 4001</div><div class="source-line">&nbsp;4002&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool rcu_cpu_online(<span class="c-keyword">int</span> cpu)</div><div class="source-line">&nbsp;4003&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;4004&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> rcu_data *rdp = per_cpu_ptr(&amp;rcu_data, cpu);</div><div style="height: 10px;"></div></div><div class="line-container " id="L64" data-line-number="64" data-line-id="line_63" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L64', event)" title="Click to copy anchor link">64</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.226</span> <span class="hl-unit">us</span>    |                    <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_rdp_cpu_online.isra.0 ret=<span class="hl-addr">0x1</span> */</span></span></div><div class="line-container " id="L65" data-line-number="65" data-line-id="line_64" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L65', event)" title="Click to copy anchor link">65</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.376</span> <span class="hl-unit">us</span>    |                  <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_lockdep_current_cpu_online ret=true */</span></span></div><div class="line-container " id="L66" data-line-number="66" data-line-id="line_65" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L66', event)" title="Click to copy anchor link">66</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.527</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_read_lock_held_common ret=false */</span></span></div><div class="line-container " id="L67" data-line-number="67" data-line-id="line_66" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L67', event)" title="Click to copy anchor link">67</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.699</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_read_lock_sched_held ret=1 */</span></span></div><div class="line-container expandable" id="L68" data-line-number="68" data-line-id="line_67" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_67')" ondblclick="handleDoubleClick(event, 'line_67')"><span class="line-number" onclick="updateAnchor('L68', event)" title="Click to copy anchor link">68</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.105</span> <span class="hl-unit">us</span>    |              <span class="hl-func">record_times</span><span class="hl-symbol">(</span>groupc=<span class="hl-addr">0xffffe8ff3fda9340</span>, now=<span class="hl-addr">0x15e09ea887</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_account_irqtime+<span class="hl-addr">0x21b</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_67_content" style="display: none;"><div class="location-link"><strong>psi_account_irqtime+0x21a/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L1039" target="_blank">psi_account_irqtime&nbsp;at&nbsp;kernel/sched/psi.c:1039</a><div class="source-line">&nbsp;1034&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!group-&gt;enabled)</div><div class="source-line">&nbsp;1035&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">continue</span>;</div><div class="source-line"> 1036</div><div class="source-line">&nbsp;1037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc = per_cpu_ptr(group-&gt;pcpu, cpu);</div><div class="source-line"> 1038</div><div class="source-line current-line">&gt;1039&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record_times(groupc, now);</div><div class="source-line">&nbsp;1040&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;times[PSI_IRQ_FULL] += delta;</div><div class="source-line"> 1041</div><div class="source-line">&nbsp;1042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (group-&gt;rtpoll_states &amp; (<span class="c-number">1</span> &lt;&lt; PSI_IRQ_FULL))</div><div class="source-line">&nbsp;1043&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_schedule_rtpoll_work(group, <span class="c-number">1</span>, <span class="kernel-macro">false</span>);</div><div class="source-line">&nbsp;1044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L69" data-line-number="69" data-line-id="line_68" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_68')" ondblclick="handleDoubleClick(event, 'line_68')"><span class="line-number" onclick="updateAnchor('L69', event)" title="Click to copy anchor link">69</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.138</span> <span class="hl-unit">us</span>    |              <span class="hl-func">record_times</span><span class="hl-symbol">(</span>groupc=<span class="hl-addr">0xffffe8ff3fd8c980</span>, now=<span class="hl-addr">0x15e09ea887</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_account_irqtime+<span class="hl-addr">0x21b</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_68_content" style="display: none;"><div class="location-link"><strong>psi_account_irqtime+0x21a/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L1039" target="_blank">psi_account_irqtime&nbsp;at&nbsp;kernel/sched/psi.c:1039</a><div class="source-line">&nbsp;1034&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!group-&gt;enabled)</div><div class="source-line">&nbsp;1035&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">continue</span>;</div><div class="source-line"> 1036</div><div class="source-line">&nbsp;1037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc = per_cpu_ptr(group-&gt;pcpu, cpu);</div><div class="source-line"> 1038</div><div class="source-line current-line">&gt;1039&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record_times(groupc, now);</div><div class="source-line">&nbsp;1040&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;times[PSI_IRQ_FULL] += delta;</div><div class="source-line"> 1041</div><div class="source-line">&nbsp;1042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (group-&gt;rtpoll_states &amp; (<span class="c-number">1</span> &lt;&lt; PSI_IRQ_FULL))</div><div class="source-line">&nbsp;1043&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_schedule_rtpoll_work(group, <span class="c-number">1</span>, <span class="kernel-macro">false</span>);</div><div class="source-line">&nbsp;1044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L70" data-line-number="70" data-line-id="line_69" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_69')" ondblclick="handleDoubleClick(event, 'line_69')"><span class="line-number" onclick="updateAnchor('L70', event)" title="Click to copy anchor link">70</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.138</span> <span class="hl-unit">us</span>    |              <span class="hl-func">record_times</span><span class="hl-symbol">(</span>groupc=<span class="hl-addr">0xffffe8ff3fd87280</span>, now=<span class="hl-addr">0x15e09ea887</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_account_irqtime+<span class="hl-addr">0x21b</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_69_content" style="display: none;"><div class="location-link"><strong>psi_account_irqtime+0x21a/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L1039" target="_blank">psi_account_irqtime&nbsp;at&nbsp;kernel/sched/psi.c:1039</a><div class="source-line">&nbsp;1034&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!group-&gt;enabled)</div><div class="source-line">&nbsp;1035&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">continue</span>;</div><div class="source-line"> 1036</div><div class="source-line">&nbsp;1037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc = per_cpu_ptr(group-&gt;pcpu, cpu);</div><div class="source-line"> 1038</div><div class="source-line current-line">&gt;1039&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record_times(groupc, now);</div><div class="source-line">&nbsp;1040&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;times[PSI_IRQ_FULL] += delta;</div><div class="source-line"> 1041</div><div class="source-line">&nbsp;1042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (group-&gt;rtpoll_states &amp; (<span class="c-number">1</span> &lt;&lt; PSI_IRQ_FULL))</div><div class="source-line">&nbsp;1043&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_schedule_rtpoll_work(group, <span class="c-number">1</span>, <span class="kernel-macro">false</span>);</div><div class="source-line">&nbsp;1044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L71" data-line-number="71" data-line-id="line_70" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_70')" ondblclick="handleDoubleClick(event, 'line_70')"><span class="line-number" onclick="updateAnchor('L71', event)" title="Click to copy anchor link">71</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.077</span> <span class="hl-unit">us</span>    |              <span class="hl-func">record_times</span><span class="hl-symbol">(</span>groupc=<span class="hl-addr">0xffff88807dd98180</span>, now=<span class="hl-addr">0x15e09ea887</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_account_irqtime+<span class="hl-addr">0x21b</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_70_content" style="display: none;"><div class="location-link"><strong>psi_account_irqtime+0x21a/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L1039" target="_blank">psi_account_irqtime&nbsp;at&nbsp;kernel/sched/psi.c:1039</a><div class="source-line">&nbsp;1034&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!group-&gt;enabled)</div><div class="source-line">&nbsp;1035&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">continue</span>;</div><div class="source-line"> 1036</div><div class="source-line">&nbsp;1037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc = per_cpu_ptr(group-&gt;pcpu, cpu);</div><div class="source-line"> 1038</div><div class="source-line current-line">&gt;1039&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record_times(groupc, now);</div><div class="source-line">&nbsp;1040&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;times[PSI_IRQ_FULL] += delta;</div><div class="source-line"> 1041</div><div class="source-line">&nbsp;1042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (group-&gt;rtpoll_states &amp; (<span class="c-number">1</span> &lt;&lt; PSI_IRQ_FULL))</div><div class="source-line">&nbsp;1043&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_schedule_rtpoll_work(group, <span class="c-number">1</span>, <span class="kernel-macro">false</span>);</div><div class="source-line">&nbsp;1044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container " id="L72" data-line-number="72" data-line-id="line_71" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L72', event)" title="Click to copy anchor link">72</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">3.657</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* psi_account_irqtime */</span></span></div><div class="line-container expandable" id="L73" data-line-number="73" data-line-id="line_72" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_72')" ondblclick="handleDoubleClick(event, 'line_72')"><span class="line-number" onclick="updateAnchor('L73', event)" title="Click to copy anchor link">73</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">psi_task_switch</span><span class="hl-symbol">(</span>prev=<span class="hl-addr">0xffff888007949bc0</span>, next=<span class="hl-addr">0xffff888006058000</span>, sleep=<span class="hl-addr">0x1</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__schedule+<span class="hl-addr">0x60b</span>/<span class="hl-addr">0x700</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_72_content" style="display: none;"><div class="location-link"><strong>__schedule+0x60a/0x700:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/stats.h#L220" target="_blank">psi_sched_switch&nbsp;at&nbsp;kernel/sched/stats.h:220</a><div class="source-line">&nbsp;215&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool sleep)</div><div class="source-line">&nbsp;216&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;217&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (static_branch_likely(&amp;psi_disabled))</div><div class="source-line">&nbsp;218&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 219</div><div class="source-line current-line">&gt;220&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_task_switch(prev, next, sleep);</div><div class="source-line">&nbsp;221&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 222</div><div class="source-line">&nbsp;223&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="c-keyword">else</span> /* !CONFIG_PSI: */</div><div class="source-line">&nbsp;224&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> psi_enqueue(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *p, bool migrate) {}</div><div class="source-line">&nbsp;225&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> psi_dequeue(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *p, bool migrate) {}</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L6923" target="_blank">(inlined&nbsp;by)&nbsp;__schedule&nbsp;at&nbsp;kernel/sched/core.c:6923</a><div class="source-line">&nbsp;6918&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;6919&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++*switch_count;</div><div class="source-line"> 6920</div><div class="source-line">&nbsp;6921&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;migrate_disable_switch(rq, prev);</div><div class="source-line">&nbsp;6922&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_account_irqtime(rq, prev, next);</div><div class="source-line current-line">&gt;6923&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_sched_switch(prev, next, !task_on_rq_queued(prev) ||</div><div class="source-line">&nbsp;6924&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev-&gt;se.sched_delayed);</div><div class="source-line"> 6925</div><div class="source-line">&nbsp;6926&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_sched_switch(preempt, prev, next, prev_state);</div><div class="source-line"> 6927</div><div class="source-line">&nbsp;6928&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Also unlocks the rq: */</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L74" data-line-number="74" data-line-id="line_73" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_73')" ondblclick="handleDoubleClick(event, 'line_73')"><span class="line-number" onclick="updateAnchor('L74', event)" title="Click to copy anchor link">74</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.085</span> <span class="hl-unit">us</span>    |              <span class="hl-func">psi_flags_change</span><span class="hl-symbol">(</span>task=<span class="hl-addr">0xffff888007949bc0</span>, clear=20, set=0<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_task_switch+<span class="hl-addr">0xdd</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_73_content" style="display: none;"><div class="location-link"><strong>psi_task_switch+0xdc/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L982" target="_blank">psi_task_switch&nbsp;at&nbsp;kernel/sched/psi.c:982</a><div class="source-line">&nbsp;977&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (unlikely((prev-&gt;flags &amp; PF_WQ_WORKER) &amp;&amp;</div><div class="source-line">&nbsp;978&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wq_worker_last_func(prev) == psi_avgs_work))</div><div class="source-line">&nbsp;979&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wake_clock = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;980&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 981</div><div class="source-line current-line">&gt;982&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_flags_change(prev, clear, set);</div><div class="source-line"> 983</div><div class="source-line">&nbsp;984&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_group(group, task_psi_group(prev)) {</div><div class="source-line">&nbsp;985&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (group == common)</div><div class="source-line">&nbsp;986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">break</span>;</div><div class="source-line">&nbsp;987&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_group_change(group, cpu, clear, set, now, wake_clock);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L75" data-line-number="75" data-line-id="line_74" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_74')" ondblclick="handleDoubleClick(event, 'line_74')"><span class="line-number" onclick="updateAnchor('L75', event)" title="Click to copy anchor link">75</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">rcu_read_lock_sched_held</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-psi_task_switch+<span class="hl-addr">0x3b7</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_74_content" style="display: none;"><div class="location-link"><strong>psi_task_switch+0x3b6/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/cgroup.h#L446" target="_blank">task_css_set&nbsp;at&nbsp;include/linux/cgroup.h:446</a><div class="source-line">&nbsp;441&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</div><div class="source-line">&nbsp;442&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* See task_css_set_check().</div><div class="source-line">&nbsp;443&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;444&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> css_set *task_css_set(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;445&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;446&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css_set_check(task, <span class="kernel-macro">false</span>);</div><div class="source-line">&nbsp;447&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 448</div><div class="source-line">&nbsp;449&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;450&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* task_css - obtain css <span class="c-keyword">for</span> (task, subsys)</div><div class="source-line">&nbsp;451&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @task: the target task</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/cgroup.h#L515" target="_blank">(inlined&nbsp;by)&nbsp;task_dfl_cgroup&nbsp;at&nbsp;include/linux/cgroup.h:515</a><div class="source-line">&nbsp;510&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css(task, subsys_id)-&gt;cgroup;</div><div class="source-line">&nbsp;511&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 512</div><div class="source-line">&nbsp;513&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> cgroup *task_dfl_cgroup(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;514&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;515&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> task_css_set(task)-&gt;dfl_cgrp;</div><div class="source-line">&nbsp;516&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 517</div><div class="source-line">&nbsp;518&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> cgroup *cgroup_parent(<span class="c-keyword">struct</span> cgroup *cgrp)</div><div class="source-line">&nbsp;519&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;520&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> cgroup_subsys_state *parent_css = cgrp-&gt;self.parent;</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L889" target="_blank">(inlined&nbsp;by)&nbsp;task_psi_group&nbsp;at&nbsp;kernel/sched/psi.c:889</a><div class="source-line"> 884</div><div class="source-line">&nbsp;885&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">struct</span> psi_group *task_psi_group(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task)</div><div class="source-line">&nbsp;886&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;887&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_CGROUPS</div><div class="source-line">&nbsp;888&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (static_branch_likely(&amp;psi_cgroups_enabled))</div><div class="source-line current-line">&gt;889&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> cgroup_psi(task_dfl_cgroup(task));</div><div class="source-line">&nbsp;890&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line">&nbsp;891&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> &amp;psi_system;</div><div class="source-line">&nbsp;892&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 893</div><div class="source-line">&nbsp;894&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">void</span> psi_flags_change(<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *task, <span class="c-keyword">int</span> clear, <span class="c-keyword">int</span> set)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L984" target="_blank">(inlined&nbsp;by)&nbsp;psi_task_switch&nbsp;at&nbsp;kernel/sched/psi.c:984</a><div class="source-line">&nbsp;979&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wake_clock = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;980&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 981</div><div class="source-line">&nbsp;982&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_flags_change(prev, clear, set);</div><div class="source-line"> 983</div><div class="source-line current-line">&gt;984&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_group(group, task_psi_group(prev)) {</div><div class="source-line">&nbsp;985&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (group == common)</div><div class="source-line">&nbsp;986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">break</span>;</div><div class="source-line">&nbsp;987&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_group_change(group, cpu, clear, set, now, wake_clock);</div><div class="source-line">&nbsp;988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 989</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L76" data-line-number="76" data-line-id="line_75" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_75')" ondblclick="handleDoubleClick(event, 'line_75')"><span class="line-number" onclick="updateAnchor('L76', event)" title="Click to copy anchor link">76</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">rcu_read_lock_held_common</span><span class="hl-symbol">(</span>ret=<span class="hl-addr">0xffffc900013f3d87</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_read_lock_sched_held+<span class="hl-addr">0x26</span>/<span class="hl-addr">0x90</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_75_content" style="display: none;"><div class="location-link"><strong>rcu_read_lock_sched_held+0x25/0x90:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/update.c#L124" target="_blank">rcu_read_lock_sched_held&nbsp;at&nbsp;kernel/rcu/update.c:124</a><div class="source-line"> 119</div><div class="source-line">&nbsp;120&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> rcu_read_lock_sched_held(<span class="c-keyword">void</span>)</div><div class="source-line">&nbsp;121&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;122&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool ret;</div><div class="source-line"> 123</div><div class="source-line current-line">&gt;124&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_read_lock_held_common(&amp;ret))</div><div class="source-line">&nbsp;125&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> ret;</div><div class="source-line">&nbsp;126&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> lock_is_held(&amp;rcu_sched_lock_map) || !preemptible();</div><div class="source-line">&nbsp;127&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(rcu_read_lock_sched_held);</div><div class="source-line">&nbsp;129&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L77" data-line-number="77" data-line-id="line_76" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_76')" ondblclick="handleDoubleClick(event, 'line_76')"><span class="line-number" onclick="updateAnchor('L77', event)" title="Click to copy anchor link">77</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                  <span class="hl-func">rcu_lockdep_current_cpu_online</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_read_lock_held_common+<span class="hl-addr">0x2a</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_76_content" style="display: none;"><div class="location-link"><strong>rcu_read_lock_held_common+0x29/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/update.c#L113" target="_blank">rcu_read_lock_held_common&nbsp;at&nbsp;kernel/rcu/update.c:113</a><div class="source-line">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!rcu_is_watching()) {</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ret = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;111&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line current-line">&gt;113&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!rcu_lockdep_current_cpu_online()) {</div><div class="source-line">&nbsp;114&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ret = <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;115&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;117&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">false</span>;</div><div class="source-line">&nbsp;118&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L78" data-line-number="78" data-line-id="line_77" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_77')" ondblclick="handleDoubleClick(event, 'line_77')"><span class="line-number" onclick="updateAnchor('L78', event)" title="Click to copy anchor link">78</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                    rcu_rdp_cpu_online.isra.0<span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-rcu_lockdep_current_cpu_online+<span class="hl-addr">0x48</span>/<span class="hl-addr">0x70</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_77_content" style="display: none;"><div class="location-link"><strong>rcu_lockdep_current_cpu_online+0x47/0x70:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree.c#L4040" target="_blank">rcu_lockdep_current_cpu_online&nbsp;at&nbsp;kernel/rcu/tree.c:4040</a><div class="source-line">&nbsp;4035&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* in rcutree_report_cpu_starting() and thus has an excuse <span class="c-keyword">for</span> rdp-&gt;grpmask</div><div class="source-line">&nbsp;4036&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* not being up to date. So arch_spin_is_locked() might have a</div><div class="source-line">&nbsp;4037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kernel-macro">false</span> positive <span class="c-keyword">if</span> it<span class="c-string">'s held by some *other* CPU, but that'</span>s</div><div class="source-line">&nbsp;4038&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* OK because that just means a <span class="kernel-macro">false</span> *negative* on the warning.</div><div class="source-line">&nbsp;4039&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;4040&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_rdp_cpu_online(rdp) || arch_spin_is_locked(&amp;rcu_state.ofl_lock))</div><div class="source-line">&nbsp;4041&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = <span class="kernel-macro">true</span>;</div><div class="source-line">&nbsp;4042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable_notrace();</div><div class="source-line">&nbsp;4043&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> ret;</div><div class="source-line">&nbsp;4044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;4045&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL_GPL(rcu_lockdep_current_cpu_online);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L79" data-line-number="79" data-line-id="line_78" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_78')" ondblclick="handleDoubleClick(event, 'line_78')"><span class="line-number" onclick="updateAnchor('L79', event)" title="Click to copy anchor link">79</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |                      <span class="hl-func">rcu_rnp_online_cpus</span><span class="hl-symbol">(</span>rnp=<span class="hl-addr">0xffffffff83781280</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-rcu_rdp_cpu_online.isra.0+<span class="hl-addr">0xe</span>/<span class="hl-addr">0x20</span> ret=<span class="hl-addr">0xff</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_78_content" style="display: none;"><div class="location-link"><strong>rcu_rdp_cpu_online.isra.0+0xd/0x20:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/rcu/tree.c#L3999" target="_blank">rcu_rdp_cpu_online&nbsp;at&nbsp;kernel/rcu/tree.c:3999</a><div class="source-line">&nbsp;3994&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* from RCU<span class="c-string">'s perspective?  This perspective is given by that structure'</span>s</div><div class="source-line">&nbsp;3995&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* -&gt;qsmaskinitnext field rather than by the global cpu_online_mask.</div><div class="source-line">&nbsp;3996&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;3997&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> bool rcu_rdp_cpu_online(<span class="c-keyword">struct</span> rcu_data *rdp)</div><div class="source-line">&nbsp;3998&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;3999&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> !!(rdp-&gt;grpmask &amp; rcu_rnp_online_cpus(rdp-&gt;mynode));</div><div class="source-line">&nbsp;4000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 4001</div><div class="source-line">&nbsp;4002&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool rcu_cpu_online(<span class="c-keyword">int</span> cpu)</div><div class="source-line">&nbsp;4003&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;4004&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> rcu_data *rdp = per_cpu_ptr(&amp;rcu_data, cpu);</div><div style="height: 10px;"></div></div><div class="line-container " id="L80" data-line-number="80" data-line-id="line_79" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L80', event)" title="Click to copy anchor link">80</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.226</span> <span class="hl-unit">us</span>    |                    <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_rdp_cpu_online.isra.0 ret=<span class="hl-addr">0x1</span> */</span></span></div><div class="line-container " id="L81" data-line-number="81" data-line-id="line_80" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L81', event)" title="Click to copy anchor link">81</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.376</span> <span class="hl-unit">us</span>    |                  <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_lockdep_current_cpu_online ret=true */</span></span></div><div class="line-container " id="L82" data-line-number="82" data-line-id="line_81" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L82', event)" title="Click to copy anchor link">82</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.529</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_read_lock_held_common ret=false */</span></span></div><div class="line-container " id="L83" data-line-number="83" data-line-id="line_82" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L83', event)" title="Click to copy anchor link">83</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.694</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* rcu_read_lock_sched_held ret=1 */</span></span></div><div class="line-container expandable" id="L84" data-line-number="84" data-line-id="line_83" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_83')" ondblclick="handleDoubleClick(event, 'line_83')"><span class="line-number" onclick="updateAnchor('L84', event)" title="Click to copy anchor link">84</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">psi_group_change</span><span class="hl-symbol">(</span>group=<span class="hl-addr">0xffff888101de6000</span>, cpu=3, clear=<span class="hl-addr">0x14</span>, set=<span class="hl-addr">0x0</span>, now=<span class="hl-addr">0x15e09eb029</span>, wake_clock=<span class="hl-addr">0x1</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-psi_task_switch+<span class="hl-addr">0x152</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_83_content" style="display: none;"><div class="location-link"><strong>psi_task_switch+0x151/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L987" target="_blank">psi_task_switch&nbsp;at&nbsp;kernel/sched/psi.c:987</a><div class="source-line">&nbsp;982&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_flags_change(prev, clear, set);</div><div class="source-line"> 983</div><div class="source-line">&nbsp;984&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_group(group, task_psi_group(prev)) {</div><div class="source-line">&nbsp;985&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (group == common)</div><div class="source-line">&nbsp;986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">break</span>;</div><div class="source-line current-line">&gt;987&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_group_change(group, cpu, clear, set, now, wake_clock);</div><div class="source-line">&nbsp;988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 989</div><div class="source-line">&nbsp;990&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;991&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* TSK_ONCPU is handled up to the common ancestor. If there are</div><div class="source-line">&nbsp;992&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* any other differences between the two tasks (e.g. prev goes</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L85" data-line-number="85" data-line-id="line_84" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_84')" ondblclick="handleDoubleClick(event, 'line_84')"><span class="line-number" onclick="updateAnchor('L85', event)" title="Click to copy anchor link">85</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.100</span> <span class="hl-unit">us</span>    |                <span class="hl-func">test_states</span><span class="hl-symbol">(</span>tasks=<span class="hl-addr">0xffffe8ff3fda9340</span>, state_mask=<span class="hl-addr">0x0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_group_change+<span class="hl-addr">0x120</span>/<span class="hl-addr">0x2c0</span> ret=<span class="hl-addr">0x0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_84_content" style="display: none;"><div class="location-link"><strong>psi_group_change+0x11f/0x2c0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L861" target="_blank">psi_group_change&nbsp;at&nbsp;kernel/sched/psi.c:861</a><div class="source-line">&nbsp;856&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;state_mask = state_mask;</div><div class="source-line"> 857</div><div class="source-line">&nbsp;858&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line">&nbsp;859&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 860</div><div class="source-line current-line">&gt;861&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state_mask = test_states(groupc-&gt;tasks, state_mask);</div><div class="source-line"> 862</div><div class="source-line">&nbsp;863&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;864&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Since we care about lost potential, a memstall is FULL</div><div class="source-line">&nbsp;865&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* when there are no other working tasks, but also when</div><div class="source-line">&nbsp;866&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the CPU is actively reclaiming and nothing productive</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L86" data-line-number="86" data-line-id="line_85" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_85')" ondblclick="handleDoubleClick(event, 'line_85')"><span class="line-number" onclick="updateAnchor('L86', event)" title="Click to copy anchor link">86</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.081</span> <span class="hl-unit">us</span>    |                <span class="hl-func">record_times</span><span class="hl-symbol">(</span>groupc=<span class="hl-addr">0xffffe8ff3fda9340</span>, now=<span class="hl-addr">0x15e09eb029</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_group_change+<span class="hl-addr">0x137</span>/<span class="hl-addr">0x2c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_85_content" style="display: none;"><div class="location-link"><strong>psi_group_change+0x136/0x2c0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L874" target="_blank">psi_group_change&nbsp;at&nbsp;kernel/sched/psi.c:874</a><div class="source-line">&nbsp;869&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* on that cpu is in PSI_MEM_FULL state.</div><div class="source-line">&nbsp;870&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;871&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (unlikely((state_mask &amp; PSI_ONCPU) &amp;&amp; cpu_curr(cpu)-&gt;in_memstall))</div><div class="source-line">&nbsp;872&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state_mask |= (<span class="c-number">1</span> &lt;&lt; PSI_MEM_FULL);</div><div class="source-line"> 873</div><div class="source-line current-line">&gt;874&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record_times(groupc, now);</div><div class="source-line"> 875</div><div class="source-line">&nbsp;876&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;state_mask = state_mask;</div><div class="source-line"> 877</div><div class="source-line">&nbsp;878&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (state_mask &amp; group-&gt;rtpoll_states)</div><div class="source-line">&nbsp;879&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_schedule_rtpoll_work(group, <span class="c-number">1</span>, <span class="kernel-macro">false</span>);</div><div style="height: 10px;"></div></div><div class="line-container " id="L87" data-line-number="87" data-line-id="line_86" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L87', event)" title="Click to copy anchor link">87</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.501</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* psi_group_change */</span></span></div><div class="line-container expandable" id="L88" data-line-number="88" data-line-id="line_87" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_87')" ondblclick="handleDoubleClick(event, 'line_87')"><span class="line-number" onclick="updateAnchor('L88', event)" title="Click to copy anchor link">88</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">psi_group_change</span><span class="hl-symbol">(</span>group=<span class="hl-addr">0xffff888101dbf800</span>, cpu=3, clear=<span class="hl-addr">0x14</span>, set=<span class="hl-addr">0x0</span>, now=<span class="hl-addr">0x15e09eb029</span>, wake_clock=<span class="hl-addr">0x1</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-psi_task_switch+<span class="hl-addr">0x152</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_87_content" style="display: none;"><div class="location-link"><strong>psi_task_switch+0x151/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L987" target="_blank">psi_task_switch&nbsp;at&nbsp;kernel/sched/psi.c:987</a><div class="source-line">&nbsp;982&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_flags_change(prev, clear, set);</div><div class="source-line"> 983</div><div class="source-line">&nbsp;984&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_group(group, task_psi_group(prev)) {</div><div class="source-line">&nbsp;985&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (group == common)</div><div class="source-line">&nbsp;986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">break</span>;</div><div class="source-line current-line">&gt;987&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_group_change(group, cpu, clear, set, now, wake_clock);</div><div class="source-line">&nbsp;988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 989</div><div class="source-line">&nbsp;990&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;991&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* TSK_ONCPU is handled up to the common ancestor. If there are</div><div class="source-line">&nbsp;992&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* any other differences between the two tasks (e.g. prev goes</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L89" data-line-number="89" data-line-id="line_88" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_88')" ondblclick="handleDoubleClick(event, 'line_88')"><span class="line-number" onclick="updateAnchor('L89', event)" title="Click to copy anchor link">89</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.073</span> <span class="hl-unit">us</span>    |                <span class="hl-func">test_states</span><span class="hl-symbol">(</span>tasks=<span class="hl-addr">0xffffe8ff3fd8c980</span>, state_mask=<span class="hl-addr">0x0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_group_change+<span class="hl-addr">0x120</span>/<span class="hl-addr">0x2c0</span> ret=<span class="hl-addr">0x0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_88_content" style="display: none;"><div class="location-link"><strong>psi_group_change+0x11f/0x2c0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L861" target="_blank">psi_group_change&nbsp;at&nbsp;kernel/sched/psi.c:861</a><div class="source-line">&nbsp;856&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;state_mask = state_mask;</div><div class="source-line"> 857</div><div class="source-line">&nbsp;858&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line">&nbsp;859&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 860</div><div class="source-line current-line">&gt;861&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state_mask = test_states(groupc-&gt;tasks, state_mask);</div><div class="source-line"> 862</div><div class="source-line">&nbsp;863&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;864&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Since we care about lost potential, a memstall is FULL</div><div class="source-line">&nbsp;865&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* when there are no other working tasks, but also when</div><div class="source-line">&nbsp;866&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the CPU is actively reclaiming and nothing productive</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L90" data-line-number="90" data-line-id="line_89" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_89')" ondblclick="handleDoubleClick(event, 'line_89')"><span class="line-number" onclick="updateAnchor('L90', event)" title="Click to copy anchor link">90</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |                <span class="hl-func">record_times</span><span class="hl-symbol">(</span>groupc=<span class="hl-addr">0xffffe8ff3fd8c980</span>, now=<span class="hl-addr">0x15e09eb029</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_group_change+<span class="hl-addr">0x137</span>/<span class="hl-addr">0x2c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_89_content" style="display: none;"><div class="location-link"><strong>psi_group_change+0x136/0x2c0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L874" target="_blank">psi_group_change&nbsp;at&nbsp;kernel/sched/psi.c:874</a><div class="source-line">&nbsp;869&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* on that cpu is in PSI_MEM_FULL state.</div><div class="source-line">&nbsp;870&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;871&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (unlikely((state_mask &amp; PSI_ONCPU) &amp;&amp; cpu_curr(cpu)-&gt;in_memstall))</div><div class="source-line">&nbsp;872&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state_mask |= (<span class="c-number">1</span> &lt;&lt; PSI_MEM_FULL);</div><div class="source-line"> 873</div><div class="source-line current-line">&gt;874&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record_times(groupc, now);</div><div class="source-line"> 875</div><div class="source-line">&nbsp;876&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;state_mask = state_mask;</div><div class="source-line"> 877</div><div class="source-line">&nbsp;878&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (state_mask &amp; group-&gt;rtpoll_states)</div><div class="source-line">&nbsp;879&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_schedule_rtpoll_work(group, <span class="c-number">1</span>, <span class="kernel-macro">false</span>);</div><div style="height: 10px;"></div></div><div class="line-container " id="L91" data-line-number="91" data-line-id="line_90" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L91', event)" title="Click to copy anchor link">91</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.415</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* psi_group_change */</span></span></div><div class="line-container expandable" id="L92" data-line-number="92" data-line-id="line_91" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_91')" ondblclick="handleDoubleClick(event, 'line_91')"><span class="line-number" onclick="updateAnchor('L92', event)" title="Click to copy anchor link">92</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">psi_group_change</span><span class="hl-symbol">(</span>group=<span class="hl-addr">0xffff888101701800</span>, cpu=3, clear=<span class="hl-addr">0x14</span>, set=<span class="hl-addr">0x0</span>, now=<span class="hl-addr">0x15e09eb029</span>, wake_clock=<span class="hl-addr">0x1</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-psi_task_switch+<span class="hl-addr">0x152</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_91_content" style="display: none;"><div class="location-link"><strong>psi_task_switch+0x151/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L987" target="_blank">psi_task_switch&nbsp;at&nbsp;kernel/sched/psi.c:987</a><div class="source-line">&nbsp;982&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_flags_change(prev, clear, set);</div><div class="source-line"> 983</div><div class="source-line">&nbsp;984&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_group(group, task_psi_group(prev)) {</div><div class="source-line">&nbsp;985&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (group == common)</div><div class="source-line">&nbsp;986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">break</span>;</div><div class="source-line current-line">&gt;987&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_group_change(group, cpu, clear, set, now, wake_clock);</div><div class="source-line">&nbsp;988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 989</div><div class="source-line">&nbsp;990&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;991&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* TSK_ONCPU is handled up to the common ancestor. If there are</div><div class="source-line">&nbsp;992&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* any other differences between the two tasks (e.g. prev goes</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L93" data-line-number="93" data-line-id="line_92" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_92')" ondblclick="handleDoubleClick(event, 'line_92')"><span class="line-number" onclick="updateAnchor('L93', event)" title="Click to copy anchor link">93</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |                <span class="hl-func">test_states</span><span class="hl-symbol">(</span>tasks=<span class="hl-addr">0xffffe8ff3fd87280</span>, state_mask=<span class="hl-addr">0x0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_group_change+<span class="hl-addr">0x120</span>/<span class="hl-addr">0x2c0</span> ret=<span class="hl-addr">0x0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_92_content" style="display: none;"><div class="location-link"><strong>psi_group_change+0x11f/0x2c0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L861" target="_blank">psi_group_change&nbsp;at&nbsp;kernel/sched/psi.c:861</a><div class="source-line">&nbsp;856&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;state_mask = state_mask;</div><div class="source-line"> 857</div><div class="source-line">&nbsp;858&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line">&nbsp;859&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 860</div><div class="source-line current-line">&gt;861&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state_mask = test_states(groupc-&gt;tasks, state_mask);</div><div class="source-line"> 862</div><div class="source-line">&nbsp;863&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;864&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Since we care about lost potential, a memstall is FULL</div><div class="source-line">&nbsp;865&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* when there are no other working tasks, but also when</div><div class="source-line">&nbsp;866&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the CPU is actively reclaiming and nothing productive</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L94" data-line-number="94" data-line-id="line_93" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_93')" ondblclick="handleDoubleClick(event, 'line_93')"><span class="line-number" onclick="updateAnchor('L94', event)" title="Click to copy anchor link">94</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.073</span> <span class="hl-unit">us</span>    |                <span class="hl-func">record_times</span><span class="hl-symbol">(</span>groupc=<span class="hl-addr">0xffffe8ff3fd87280</span>, now=<span class="hl-addr">0x15e09eb029</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_group_change+<span class="hl-addr">0x137</span>/<span class="hl-addr">0x2c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_93_content" style="display: none;"><div class="location-link"><strong>psi_group_change+0x136/0x2c0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L874" target="_blank">psi_group_change&nbsp;at&nbsp;kernel/sched/psi.c:874</a><div class="source-line">&nbsp;869&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* on that cpu is in PSI_MEM_FULL state.</div><div class="source-line">&nbsp;870&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;871&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (unlikely((state_mask &amp; PSI_ONCPU) &amp;&amp; cpu_curr(cpu)-&gt;in_memstall))</div><div class="source-line">&nbsp;872&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state_mask |= (<span class="c-number">1</span> &lt;&lt; PSI_MEM_FULL);</div><div class="source-line"> 873</div><div class="source-line current-line">&gt;874&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record_times(groupc, now);</div><div class="source-line"> 875</div><div class="source-line">&nbsp;876&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;state_mask = state_mask;</div><div class="source-line"> 877</div><div class="source-line">&nbsp;878&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (state_mask &amp; group-&gt;rtpoll_states)</div><div class="source-line">&nbsp;879&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_schedule_rtpoll_work(group, <span class="c-number">1</span>, <span class="kernel-macro">false</span>);</div><div style="height: 10px;"></div></div><div class="line-container " id="L95" data-line-number="95" data-line-id="line_94" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L95', event)" title="Click to copy anchor link">95</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.384</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* psi_group_change */</span></span></div><div class="line-container expandable" id="L96" data-line-number="96" data-line-id="line_95" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_95')" ondblclick="handleDoubleClick(event, 'line_95')"><span class="line-number" onclick="updateAnchor('L96', event)" title="Click to copy anchor link">96</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">psi_group_change</span><span class="hl-symbol">(</span>group=<span class="hl-addr">0xffffffff83698860</span>, cpu=3, clear=<span class="hl-addr">0x14</span>, set=<span class="hl-addr">0x0</span>, now=<span class="hl-addr">0x15e09eb029</span>, wake_clock=<span class="hl-addr">0x1</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-psi_task_switch+<span class="hl-addr">0x152</span>/<span class="hl-addr">0x450</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_95_content" style="display: none;"><div class="location-link"><strong>psi_task_switch+0x151/0x450:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L987" target="_blank">psi_task_switch&nbsp;at&nbsp;kernel/sched/psi.c:987</a><div class="source-line">&nbsp;982&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_flags_change(prev, clear, set);</div><div class="source-line"> 983</div><div class="source-line">&nbsp;984&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_group(group, task_psi_group(prev)) {</div><div class="source-line">&nbsp;985&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (group == common)</div><div class="source-line">&nbsp;986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">break</span>;</div><div class="source-line current-line">&gt;987&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_group_change(group, cpu, clear, set, now, wake_clock);</div><div class="source-line">&nbsp;988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 989</div><div class="source-line">&nbsp;990&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;991&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* TSK_ONCPU is handled up to the common ancestor. If there are</div><div class="source-line">&nbsp;992&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* any other differences between the two tasks (e.g. prev goes</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L97" data-line-number="97" data-line-id="line_96" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_96')" ondblclick="handleDoubleClick(event, 'line_96')"><span class="line-number" onclick="updateAnchor('L97', event)" title="Click to copy anchor link">97</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |                <span class="hl-func">test_states</span><span class="hl-symbol">(</span>tasks=<span class="hl-addr">0xffff88807dd98180</span>, state_mask=<span class="hl-addr">0x0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_group_change+<span class="hl-addr">0x120</span>/<span class="hl-addr">0x2c0</span> ret=<span class="hl-addr">0x0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_96_content" style="display: none;"><div class="location-link"><strong>psi_group_change+0x11f/0x2c0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L861" target="_blank">psi_group_change&nbsp;at&nbsp;kernel/sched/psi.c:861</a><div class="source-line">&nbsp;856&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;state_mask = state_mask;</div><div class="source-line"> 857</div><div class="source-line">&nbsp;858&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line">&nbsp;859&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 860</div><div class="source-line current-line">&gt;861&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state_mask = test_states(groupc-&gt;tasks, state_mask);</div><div class="source-line"> 862</div><div class="source-line">&nbsp;863&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;864&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Since we care about lost potential, a memstall is FULL</div><div class="source-line">&nbsp;865&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* when there are no other working tasks, but also when</div><div class="source-line">&nbsp;866&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the CPU is actively reclaiming and nothing productive</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L98" data-line-number="98" data-line-id="line_97" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_97')" ondblclick="handleDoubleClick(event, 'line_97')"><span class="line-number" onclick="updateAnchor('L98', event)" title="Click to copy anchor link">98</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.075</span> <span class="hl-unit">us</span>    |                <span class="hl-func">record_times</span><span class="hl-symbol">(</span>groupc=<span class="hl-addr">0xffff88807dd98180</span>, now=<span class="hl-addr">0x15e09eb029</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-psi_group_change+<span class="hl-addr">0x137</span>/<span class="hl-addr">0x2c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_97_content" style="display: none;"><div class="location-link"><strong>psi_group_change+0x136/0x2c0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/psi.c#L874" target="_blank">psi_group_change&nbsp;at&nbsp;kernel/sched/psi.c:874</a><div class="source-line">&nbsp;869&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* on that cpu is in PSI_MEM_FULL state.</div><div class="source-line">&nbsp;870&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;871&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (unlikely((state_mask &amp; PSI_ONCPU) &amp;&amp; cpu_curr(cpu)-&gt;in_memstall))</div><div class="source-line">&nbsp;872&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state_mask |= (<span class="c-number">1</span> &lt;&lt; PSI_MEM_FULL);</div><div class="source-line"> 873</div><div class="source-line current-line">&gt;874&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record_times(groupc, now);</div><div class="source-line"> 875</div><div class="source-line">&nbsp;876&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupc-&gt;state_mask = state_mask;</div><div class="source-line"> 877</div><div class="source-line">&nbsp;878&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (state_mask &amp; group-&gt;rtpoll_states)</div><div class="source-line">&nbsp;879&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_schedule_rtpoll_work(group, <span class="c-number">1</span>, <span class="kernel-macro">false</span>);</div><div style="height: 10px;"></div></div><div class="line-container " id="L99" data-line-number="99" data-line-id="line_98" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L99', event)" title="Click to copy anchor link">99</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.459</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* psi_group_change */</span></span></div><div class="line-container " id="L100" data-line-number="100" data-line-id="line_99" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L100', event)" title="Click to copy anchor link">100</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">3.250</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* psi_task_switch */</span></span></div><div class="line-container expandable" id="L101" data-line-number="101" data-line-id="line_100" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_100')" ondblclick="handleDoubleClick(event, 'line_100')"><span class="line-number" onclick="updateAnchor('L101', event)" title="Click to copy anchor link">101</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.268</span> <span class="hl-unit">us</span>    |            <span class="hl-func">__traceiter_sched_switch</span><span class="hl-symbol">(</span>__data=<span class="hl-addr">0x0</span>, preempt=<span class="hl-addr">0x0</span>, prev=<span class="hl-addr">0xffff888007949bc0</span>, next=<span class="hl-addr">0xffff888006058000</span>, prev_state=<span class="hl-addr">0x1</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__schedule+<span class="hl-addr">0x3c9</span>/<span class="hl-addr">0x700</span> ret=0 */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_100_content" style="display: none;"><div class="location-link"><strong>__schedule+0x3c8/0x700:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/trace/events/sched.h#L220" target="_blank">__do_trace_sched_switch&nbsp;at&nbsp;include/trace/events/sched.h:220</a><div class="source-line">&nbsp;215&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* CREATE_TRACE_POINTS */</div><div class="source-line"> 216</div><div class="source-line">&nbsp;217&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;218&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Tracepoint <span class="c-keyword">for</span> task switches, performed by the scheduler:</div><div class="source-line">&nbsp;219&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;220&lt;&nbsp;&nbsp;&nbsp;&nbsp;TRACE_EVENT(sched_switch,</div><div class="source-line"> 221</div><div class="source-line">&nbsp;222&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TP_PROTO(bool preempt,</div><div class="source-line">&nbsp;223&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *prev,</div><div class="source-line">&nbsp;224&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> <span class="kernel-type">task_struct</span> *next,</div><div class="source-line">&nbsp;225&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned <span class="c-keyword">int</span> prev_state),</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L6926" target="_blank">(inlined&nbsp;by)&nbsp;__schedule&nbsp;at&nbsp;kernel/sched/core.c:6926</a><div class="source-line">&nbsp;6921&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;migrate_disable_switch(rq, prev);</div><div class="source-line">&nbsp;6922&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_account_irqtime(rq, prev, next);</div><div class="source-line">&nbsp;6923&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psi_sched_switch(prev, next, !task_on_rq_queued(prev) ||</div><div class="source-line">&nbsp;6924&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev-&gt;se.sched_delayed);</div><div class="source-line"> 6925</div><div class="source-line current-line">&gt;6926&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_sched_switch(preempt, prev, next, prev_state);</div><div class="source-line"> 6927</div><div class="source-line">&nbsp;6928&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Also unlocks the rq: */</div><div class="source-line">&nbsp;6929&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rq = context_switch(rq, prev, next, &amp;rf);</div><div class="source-line">&nbsp;6930&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="c-keyword">else</span> {</div><div class="source-line">&nbsp;6931&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* In <span class="c-keyword">case</span> next was already curr but just got blocked_donor */</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L102" data-line-number="102" data-line-id="line_101" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_101')" ondblclick="handleDoubleClick(event, 'line_101')"><span class="line-number" onclick="updateAnchor('L102', event)" title="Click to copy anchor link">102</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |            <span class="hl-func">enter_lazy_tlb</span><span class="hl-symbol">(</span>mm=<span class="hl-addr">0xffff8880071ec7c0</span>, tsk=<span class="hl-addr">0xffff888006058000</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__schedule+<span class="hl-addr">0x5e1</span>/<span class="hl-addr">0x700</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_101_content" style="display: none;"><div class="location-link"><strong>__schedule+0x5e0/0x700:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5292" target="_blank">context_switch&nbsp;at&nbsp;kernel/sched/core.c:5292</a><div class="source-line">&nbsp;5287&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</div><div class="source-line">&nbsp;5288&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* switch_mm_cid() needs to be updated <span class="c-keyword">if</span> the barriers provided</div><div class="source-line">&nbsp;5289&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* by context_switch() are modified.</div><div class="source-line">&nbsp;5290&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;5291&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!next-&gt;mm) {                                <span class="c-comment">// to kernel</span></div><div class="source-line current-line">&gt;5292&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enter_lazy_tlb(prev-&gt;active_mm, next);</div><div class="source-line"> 5293</div><div class="source-line">&nbsp;5294&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next-&gt;active_mm = prev-&gt;active_mm;</div><div class="source-line">&nbsp;5295&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (prev-&gt;mm)                           <span class="c-comment">// from user</span></div><div class="source-line">&nbsp;5296&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mmgrab_lazy_tlb(prev-&gt;active_mm);</div><div class="source-line">&nbsp;5297&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L6929" target="_blank">(inlined&nbsp;by)&nbsp;__schedule&nbsp;at&nbsp;kernel/sched/core.c:6929</a><div class="source-line">&nbsp;6924&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev-&gt;se.sched_delayed);</div><div class="source-line"> 6925</div><div class="source-line">&nbsp;6926&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_sched_switch(preempt, prev, next, prev_state);</div><div class="source-line"> 6927</div><div class="source-line">&nbsp;6928&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Also unlocks the rq: */</div><div class="source-line current-line">&gt;6929&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rq = context_switch(rq, prev, next, &amp;rf);</div><div class="source-line">&nbsp;6930&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="c-keyword">else</span> {</div><div class="source-line">&nbsp;6931&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* In <span class="c-keyword">case</span> next was already curr but just got blocked_donor */</div><div class="source-line">&nbsp;6932&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!task_current_donor(rq, next))</div><div class="source-line">&nbsp;6933&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_tag_curr(rq, next);</div><div class="source-line"> 6934</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L103" data-line-number="103" data-line-id="line_102" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_102')" ondblclick="handleDoubleClick(event, 'line_102')"><span class="line-number" onclick="updateAnchor('L103', event)" title="Click to copy anchor link">103</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">save_fpregs_to_fpstate</span><span class="hl-symbol">(</span>fpu=<span class="hl-addr">0xffff88800794b380</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__switch_to+<span class="hl-addr">0x30f</span>/<span class="hl-addr">0x530</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_102_content" style="display: none;"><div class="location-link"><strong>__switch_to+0x30e/0x530:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/arch/x86/include/asm/fpu/sched.h#L40" target="_blank">switch_fpu&nbsp;at&nbsp;arch/x86/include/asm/fpu/sched.h:40</a><div class="source-line">&nbsp;35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpu_feature_enabled(X86_FEATURE_FPU) &amp;&amp;</div><div class="source-line">&nbsp;36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!(old-&gt;flags &amp; (PF_KTHREAD | PF_USER_WORKER))) {</div><div class="source-line">&nbsp;37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> fpu *old_fpu = x86_task_fpu(old);</div><div class="source-line"> 38</div><div class="source-line">&nbsp;39&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_tsk_thread_flag(old, TIF_NEED_FPU_LOAD);</div><div class="source-line current-line">&gt;40&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save_fpregs_to_fpstate(old_fpu);</div><div class="source-line">&nbsp;41&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The save operation preserved <span class="c-keyword">register</span> state, so the</div><div class="source-line">&nbsp;43&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* fpu_fpregs_owner_ctx is still @old_fpu. Store the</div><div class="source-line">&nbsp;44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* current CPU number in @old_fpu, so the next <span class="c-keyword">return</span></div><div class="source-line">&nbsp;45&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* to user space can avoid the FPU <span class="c-keyword">register</span> restore</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/arch/x86/kernel/process_64.c#L620" target="_blank">(inlined&nbsp;by)&nbsp;__switch_to&nbsp;at&nbsp;arch/x86/kernel/process_64.c:620</a><div class="source-line">&nbsp;615&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> cpu = smp_processor_id();</div><div class="source-line"> 616</div><div class="source-line">&nbsp;617&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WARN_ON_ONCE(IS_ENABLED(CONFIG_DEBUG_ENTRY) &amp;&amp;</div><div class="source-line">&nbsp;618&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this_cpu_read(hardirq_stack_inuse));</div><div class="source-line"> 619</div><div class="source-line current-line">&gt;620&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch_fpu(prev_p, cpu);</div><div class="source-line"> 621</div><div class="source-line">&nbsp;622&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* We must save %fs and %gs before load_TLS() because</div><div class="source-line">&nbsp;623&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* %fs and %gs may be cleared by load_TLS().</div><div class="source-line">&nbsp;624&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</div><div class="source-line">&nbsp;625&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* (e.g. xen_load_tls())</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L104" data-line-number="104" data-line-id="line_103" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_103')" ondblclick="handleDoubleClick(event, 'line_103')"><span class="line-number" onclick="updateAnchor('L104', event)" title="Click to copy anchor link">104</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.096</span> <span class="hl-unit">us</span>    |              <span class="hl-func">update_avx_timestamp</span><span class="hl-symbol">(</span>fpu=<span class="hl-addr">0xffff88800794b380</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__switch_to+<span class="hl-addr">0x30f</span>/<span class="hl-addr">0x530</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_103_content" style="display: none;"><div class="location-link"><strong>__switch_to+0x30e/0x530:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/arch/x86/include/asm/fpu/sched.h#L40" target="_blank">switch_fpu&nbsp;at&nbsp;arch/x86/include/asm/fpu/sched.h:40</a><div class="source-line">&nbsp;35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpu_feature_enabled(X86_FEATURE_FPU) &amp;&amp;</div><div class="source-line">&nbsp;36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!(old-&gt;flags &amp; (PF_KTHREAD | PF_USER_WORKER))) {</div><div class="source-line">&nbsp;37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> fpu *old_fpu = x86_task_fpu(old);</div><div class="source-line"> 38</div><div class="source-line">&nbsp;39&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_tsk_thread_flag(old, TIF_NEED_FPU_LOAD);</div><div class="source-line current-line">&gt;40&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save_fpregs_to_fpstate(old_fpu);</div><div class="source-line">&nbsp;41&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The save operation preserved <span class="c-keyword">register</span> state, so the</div><div class="source-line">&nbsp;43&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* fpu_fpregs_owner_ctx is still @old_fpu. Store the</div><div class="source-line">&nbsp;44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* current CPU number in @old_fpu, so the next <span class="c-keyword">return</span></div><div class="source-line">&nbsp;45&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* to user space can avoid the FPU <span class="c-keyword">register</span> restore</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/arch/x86/kernel/process_64.c#L620" target="_blank">(inlined&nbsp;by)&nbsp;__switch_to&nbsp;at&nbsp;arch/x86/kernel/process_64.c:620</a><div class="source-line">&nbsp;615&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> cpu = smp_processor_id();</div><div class="source-line"> 616</div><div class="source-line">&nbsp;617&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WARN_ON_ONCE(IS_ENABLED(CONFIG_DEBUG_ENTRY) &amp;&amp;</div><div class="source-line">&nbsp;618&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this_cpu_read(hardirq_stack_inuse));</div><div class="source-line"> 619</div><div class="source-line current-line">&gt;620&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch_fpu(prev_p, cpu);</div><div class="source-line"> 621</div><div class="source-line">&nbsp;622&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* We must save %fs and %gs before load_TLS() because</div><div class="source-line">&nbsp;623&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* %fs and %gs may be cleared by load_TLS().</div><div class="source-line">&nbsp;624&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</div><div class="source-line">&nbsp;625&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* (e.g. xen_load_tls())</div><div style="height: 10px;"></div></div><div class="line-container " id="L105" data-line-number="105" data-line-id="line_104" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L105', event)" title="Click to copy anchor link">105</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.284</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* save_fpregs_to_fpstate */</span></span></div><div class="line-container " id="L106" data-line-number="106" data-line-id="line_105" data-cpu="" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L106', event)" title="Click to copy anchor link">106</span><span class="line-content"> ------------------------------------------</span></div><div class="line-container " id="L107" data-line-number="107" data-line-id="line_106" data-cpu="3" data-pid="431" data-comm="bash"><span class="line-number" onclick="updateAnchor('L107', event)" title="Click to copy anchor link">107</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>    bash-431    =>     idle -0   </span></div><div class="line-container " id="L108" data-line-number="108" data-line-id="line_107" data-cpu="" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L108', event)" title="Click to copy anchor link">108</span><span class="line-content"> ------------------------------------------</span></div><div class="line-container " id="L109" data-line-number="109" data-line-id="line_108" data-cpu="" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L109', event)" title="Click to copy anchor link">109</span><span class="line-content"></span></div><div class="line-container expandable" id="L110" data-line-number="110" data-line-id="line_109" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_109')" ondblclick="handleDoubleClick(event, 'line_109')"><span class="line-number" onclick="updateAnchor('L110', event)" title="Click to copy anchor link">110</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |  finish_task_switch.isra.0<span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__schedule+<span class="hl-addr">0x2f9</span>/<span class="hl-addr">0x700</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_109_content" style="display: none;"><div class="location-link"><strong>__schedule+0x2f8/0x700:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5328" target="_blank">context_switch&nbsp;at&nbsp;kernel/sched/core.c:5328</a><div class="source-line"> 5323</div><div class="source-line">&nbsp;5324&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Here we just <span class="c-keyword">switch</span> the <span class="c-keyword">register</span> state and the stack. */</div><div class="source-line">&nbsp;5325&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch_to(prev, next, prev);</div><div class="source-line">&nbsp;5326&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier();</div><div class="source-line"> 5327</div><div class="source-line current-line">&gt;5328&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> finish_task_switch(prev);</div><div class="source-line">&nbsp;5329&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 5330</div><div class="source-line">&nbsp;5331&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;5332&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* nr_running and nr_context_switches:</div><div class="source-line">&nbsp;5333&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L6929" target="_blank">(inlined&nbsp;by)&nbsp;__schedule&nbsp;at&nbsp;kernel/sched/core.c:6929</a><div class="source-line">&nbsp;6924&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev-&gt;se.sched_delayed);</div><div class="source-line"> 6925</div><div class="source-line">&nbsp;6926&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_sched_switch(preempt, prev, next, prev_state);</div><div class="source-line"> 6927</div><div class="source-line">&nbsp;6928&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Also unlocks the rq: */</div><div class="source-line current-line">&gt;6929&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rq = context_switch(rq, prev, next, &amp;rf);</div><div class="source-line">&nbsp;6930&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="c-keyword">else</span> {</div><div class="source-line">&nbsp;6931&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* In <span class="c-keyword">case</span> next was already curr but just got blocked_donor */</div><div class="source-line">&nbsp;6932&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!task_current_donor(rq, next))</div><div class="source-line">&nbsp;6933&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_tag_curr(rq, next);</div><div class="source-line"> 6934</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L111" data-line-number="111" data-line-id="line_110" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_110')" ondblclick="handleDoubleClick(event, 'line_110')"><span class="line-number" onclick="updateAnchor('L111', event)" title="Click to copy anchor link">111</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |    <span class="hl-func">__balance_callbacks</span><span class="hl-symbol">(</span>rq=<span class="hl-addr">0xffff88807ddad800</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-finish_task_switch.isra.0+<span class="hl-addr">0xad</span>/<span class="hl-addr">0x220</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_110_content" style="display: none;"><div class="location-link"><strong>finish_task_switch.isra.0+0xac/0x220:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5072" target="_blank">finish_lock_switch&nbsp;at&nbsp;kernel/sched/core.c:5072</a><div class="source-line">&nbsp;5067&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If we are tracking spinlock dependencies then we have to</div><div class="source-line">&nbsp;5068&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* fix up the runqueue lock - which gets <span class="c-string">'carried over'</span> from</div><div class="source-line">&nbsp;5069&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* prev into current:</div><div class="source-line">&nbsp;5070&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;5071&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;__rq_lockp(rq)-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _THIS_IP_);</div><div class="source-line current-line">&gt;5072&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__balance_callbacks(rq);</div><div class="source-line">&nbsp;5073&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_rq_unlock_irq(rq);</div><div class="source-line">&nbsp;5074&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 5075</div><div class="source-line">&nbsp;5076&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;5077&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* NOP <span class="c-keyword">if</span> the arch has not defined these:</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5191" target="_blank">(inlined&nbsp;by)&nbsp;finish_task_switch&nbsp;at&nbsp;kernel/sched/core.c:5191</a><div class="source-line">&nbsp;5186&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev_state = READ_ONCE(prev-&gt;__state);</div><div class="source-line">&nbsp;5187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vtime_task_switch(prev);</div><div class="source-line">&nbsp;5188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perf_event_task_sched_in(prev, current);</div><div class="source-line">&nbsp;5189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_task(prev);</div><div class="source-line">&nbsp;5190&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_nohz_task_switch();</div><div class="source-line current-line">&gt;5191&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_lock_switch(rq);</div><div class="source-line">&nbsp;5192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_arch_post_lock_switch();</div><div class="source-line">&nbsp;5193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kcov_finish_switch(current);</div><div class="source-line">&nbsp;5194&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;5195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* kmap_local_sched_out() is invoked with rq::lock held and</div><div class="source-line">&nbsp;5196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* interrupts disabled. There is no requirement <span class="c-keyword">for</span> that, but the</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L112" data-line-number="112" data-line-id="line_111" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_111')" ondblclick="handleDoubleClick(event, 'line_111')"><span class="line-number" onclick="updateAnchor('L112', event)" title="Click to copy anchor link">112</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.105</span> <span class="hl-unit">us</span>    |      <span class="hl-func">do_balance_callbacks</span><span class="hl-symbol">(</span>rq=<span class="hl-addr">0xffff88807ddad800</span>, head=<span class="hl-addr">0x0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-finish_task_switch.isra.0+<span class="hl-addr">0xad</span>/<span class="hl-addr">0x220</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_111_content" style="display: none;"><div class="location-link"><strong>finish_task_switch.isra.0+0xac/0x220:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5072" target="_blank">finish_lock_switch&nbsp;at&nbsp;kernel/sched/core.c:5072</a><div class="source-line">&nbsp;5067&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If we are tracking spinlock dependencies then we have to</div><div class="source-line">&nbsp;5068&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* fix up the runqueue lock - which gets <span class="c-string">'carried over'</span> from</div><div class="source-line">&nbsp;5069&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* prev into current:</div><div class="source-line">&nbsp;5070&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;5071&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;__rq_lockp(rq)-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _THIS_IP_);</div><div class="source-line current-line">&gt;5072&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__balance_callbacks(rq);</div><div class="source-line">&nbsp;5073&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_rq_unlock_irq(rq);</div><div class="source-line">&nbsp;5074&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 5075</div><div class="source-line">&nbsp;5076&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;5077&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* NOP <span class="c-keyword">if</span> the arch has not defined these:</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5191" target="_blank">(inlined&nbsp;by)&nbsp;finish_task_switch&nbsp;at&nbsp;kernel/sched/core.c:5191</a><div class="source-line">&nbsp;5186&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev_state = READ_ONCE(prev-&gt;__state);</div><div class="source-line">&nbsp;5187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vtime_task_switch(prev);</div><div class="source-line">&nbsp;5188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perf_event_task_sched_in(prev, current);</div><div class="source-line">&nbsp;5189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_task(prev);</div><div class="source-line">&nbsp;5190&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_nohz_task_switch();</div><div class="source-line current-line">&gt;5191&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_lock_switch(rq);</div><div class="source-line">&nbsp;5192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_arch_post_lock_switch();</div><div class="source-line">&nbsp;5193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kcov_finish_switch(current);</div><div class="source-line">&nbsp;5194&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;5195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* kmap_local_sched_out() is invoked with rq::lock held and</div><div class="source-line">&nbsp;5196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* interrupts disabled. There is no requirement <span class="c-keyword">for</span> that, but the</div><div style="height: 10px;"></div></div><div class="line-container " id="L113" data-line-number="113" data-line-id="line_112" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L113', event)" title="Click to copy anchor link">113</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.264</span> <span class="hl-unit">us</span>    |    <span class="hl-symbol">}</span> <span class="hl-comment">/* __balance_callbacks */</span></span></div><div class="line-container expandable" id="L114" data-line-number="114" data-line-id="line_113" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_113')" ondblclick="handleDoubleClick(event, 'line_113')"><span class="line-number" onclick="updateAnchor('L114', event)" title="Click to copy anchor link">114</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |    <span class="hl-func">raw_spin_rq_unlock</span><span class="hl-symbol">(</span>rq=<span class="hl-addr">0xffff88807ddad800</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-finish_task_switch.isra.0+<span class="hl-addr">0xb5</span>/<span class="hl-addr">0x220</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_113_content" style="display: none;"><div class="location-link"><strong>finish_task_switch.isra.0+0xb4/0x220:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/sched.h#L1558" target="_blank">raw_spin_rq_unlock_irq&nbsp;at&nbsp;kernel/sched/sched.h:1558</a><div class="source-line">&nbsp;1553&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_rq_lock(rq);</div><div class="source-line">&nbsp;1554&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1555</div><div class="source-line">&nbsp;1556&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> raw_spin_rq_unlock_irq(<span class="c-keyword">struct</span> rq *rq)</div><div class="source-line">&nbsp;1557&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;1558&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_rq_unlock(rq);</div><div class="source-line">&nbsp;1559&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_enable();</div><div class="source-line">&nbsp;1560&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1561</div><div class="source-line">&nbsp;1562&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> unsigned long _raw_spin_rq_lock_irqsave(<span class="c-keyword">struct</span> rq *rq)</div><div class="source-line">&nbsp;1563&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5073" target="_blank">(inlined&nbsp;by)&nbsp;finish_lock_switch&nbsp;at&nbsp;kernel/sched/core.c:5073</a><div class="source-line">&nbsp;5068&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* fix up the runqueue lock - which gets <span class="c-string">'carried over'</span> from</div><div class="source-line">&nbsp;5069&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* prev into current:</div><div class="source-line">&nbsp;5070&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;5071&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;__rq_lockp(rq)-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _THIS_IP_);</div><div class="source-line">&nbsp;5072&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__balance_callbacks(rq);</div><div class="source-line current-line">&gt;5073&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_rq_unlock_irq(rq);</div><div class="source-line">&nbsp;5074&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 5075</div><div class="source-line">&nbsp;5076&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;5077&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* NOP <span class="c-keyword">if</span> the arch has not defined these:</div><div class="source-line">&nbsp;5078&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5191" target="_blank">(inlined&nbsp;by)&nbsp;finish_task_switch&nbsp;at&nbsp;kernel/sched/core.c:5191</a><div class="source-line">&nbsp;5186&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev_state = READ_ONCE(prev-&gt;__state);</div><div class="source-line">&nbsp;5187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vtime_task_switch(prev);</div><div class="source-line">&nbsp;5188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perf_event_task_sched_in(prev, current);</div><div class="source-line">&nbsp;5189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_task(prev);</div><div class="source-line">&nbsp;5190&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_nohz_task_switch();</div><div class="source-line current-line">&gt;5191&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_lock_switch(rq);</div><div class="source-line">&nbsp;5192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_arch_post_lock_switch();</div><div class="source-line">&nbsp;5193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kcov_finish_switch(current);</div><div class="source-line">&nbsp;5194&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;5195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* kmap_local_sched_out() is invoked with rq::lock held and</div><div class="source-line">&nbsp;5196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* interrupts disabled. There is no requirement <span class="c-keyword">for</span> that, but the</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L115" data-line-number="115" data-line-id="line_114" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_114')" ondblclick="handleDoubleClick(event, 'line_114')"><span class="line-number" onclick="updateAnchor('L115', event)" title="Click to copy anchor link">115</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |      <span class="hl-func">_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807ddad800</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-finish_task_switch.isra.0+<span class="hl-addr">0xb5</span>/<span class="hl-addr">0x220</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_114_content" style="display: none;"><div class="location-link"><strong>finish_task_switch.isra.0+0xb4/0x220:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/sched.h#L1558" target="_blank">raw_spin_rq_unlock_irq&nbsp;at&nbsp;kernel/sched/sched.h:1558</a><div class="source-line">&nbsp;1553&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_rq_lock(rq);</div><div class="source-line">&nbsp;1554&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1555</div><div class="source-line">&nbsp;1556&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> raw_spin_rq_unlock_irq(<span class="c-keyword">struct</span> rq *rq)</div><div class="source-line">&nbsp;1557&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;1558&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_rq_unlock(rq);</div><div class="source-line">&nbsp;1559&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_enable();</div><div class="source-line">&nbsp;1560&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1561</div><div class="source-line">&nbsp;1562&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> unsigned long _raw_spin_rq_lock_irqsave(<span class="c-keyword">struct</span> rq *rq)</div><div class="source-line">&nbsp;1563&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5073" target="_blank">(inlined&nbsp;by)&nbsp;finish_lock_switch&nbsp;at&nbsp;kernel/sched/core.c:5073</a><div class="source-line">&nbsp;5068&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* fix up the runqueue lock - which gets <span class="c-string">'carried over'</span> from</div><div class="source-line">&nbsp;5069&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* prev into current:</div><div class="source-line">&nbsp;5070&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;5071&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;__rq_lockp(rq)-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _THIS_IP_);</div><div class="source-line">&nbsp;5072&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__balance_callbacks(rq);</div><div class="source-line current-line">&gt;5073&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_rq_unlock_irq(rq);</div><div class="source-line">&nbsp;5074&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 5075</div><div class="source-line">&nbsp;5076&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;5077&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* NOP <span class="c-keyword">if</span> the arch has not defined these:</div><div class="source-line">&nbsp;5078&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/core.c#L5191" target="_blank">(inlined&nbsp;by)&nbsp;finish_task_switch&nbsp;at&nbsp;kernel/sched/core.c:5191</a><div class="source-line">&nbsp;5186&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev_state = READ_ONCE(prev-&gt;__state);</div><div class="source-line">&nbsp;5187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vtime_task_switch(prev);</div><div class="source-line">&nbsp;5188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perf_event_task_sched_in(prev, current);</div><div class="source-line">&nbsp;5189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_task(prev);</div><div class="source-line">&nbsp;5190&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_nohz_task_switch();</div><div class="source-line current-line">&gt;5191&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_lock_switch(rq);</div><div class="source-line">&nbsp;5192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish_arch_post_lock_switch();</div><div class="source-line">&nbsp;5193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kcov_finish_switch(current);</div><div class="source-line">&nbsp;5194&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;5195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* kmap_local_sched_out() is invoked with rq::lock held and</div><div class="source-line">&nbsp;5196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* interrupts disabled. There is no requirement <span class="c-keyword">for</span> that, but the</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L116" data-line-number="116" data-line-id="line_115" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_115')" ondblclick="handleDoubleClick(event, 'line_115')"><span class="line-number" onclick="updateAnchor('L116', event)" title="Click to copy anchor link">116</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.078</span> <span class="hl-unit">us</span>    |        <span class="hl-func">do_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807ddad800</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x23</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_115_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x22/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L142" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:142</a><div class="source-line">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* !CONFIG_GENERIC_LOCKBREAK || CONFIG_DEBUG_LOCK_ALLOC */</div><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line current-line">&gt;142&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;143&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L117" data-line-number="117" data-line-id="line_116" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_116')" ondblclick="handleDoubleClick(event, 'line_116')"><span class="line-number" onclick="updateAnchor('L117', event)" title="Click to copy anchor link">117</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.082</span> <span class="hl-unit">us</span>    |        <span class="hl-func">preempt_count_sub</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x2d</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_116_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x2c/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L143" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:143</a><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line">&nbsp;142&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line current-line">&gt;143&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container " id="L118" data-line-number="118" data-line-id="line_117" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L118', event)" title="Click to copy anchor link">118</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.398</span> <span class="hl-unit">us</span>    |      <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_unlock */</span></span></div><div class="line-container " id="L119" data-line-number="119" data-line-id="line_118" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L119', event)" title="Click to copy anchor link">119</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.545</span> <span class="hl-unit">us</span>    |    <span class="hl-symbol">}</span> <span class="hl-comment">/* raw_spin_rq_unlock */</span></span></div><div class="line-container " id="L120" data-line-number="120" data-line-id="line_119" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L120', event)" title="Click to copy anchor link">120</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.175</span> <span class="hl-unit">us</span>    |  <span class="hl-symbol">}</span> <span class="hl-comment">/* finish_task_switch.isra.0 ret=<span class="hl-addr">0xffffffff81381f60</span> */</span></span></div><div class="line-container expandable" id="L121" data-line-number="121" data-line-id="line_120" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_120')" ondblclick="handleDoubleClick(event, 'line_120')"><span class="line-number" onclick="updateAnchor('L121', event)" title="Click to copy anchor link">121</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |  <span class="hl-func">do_idle</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-cpu_startup_entry+<span class="hl-addr">0x29</span>/<span class="hl-addr">0x30</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_120_content" style="display: none;"><div class="location-link"><strong>cpu_startup_entry+0x28/0x30:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/idle.c#L428" target="_blank">cpu_startup_entry&nbsp;at&nbsp;kernel/sched/idle.c:428</a><div class="source-line">&nbsp;423&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;424&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current-&gt;flags |= PF_IDLE;</div><div class="source-line">&nbsp;425&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch_cpu_idle_prepare();</div><div class="source-line">&nbsp;426&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpuhp_online_idle(state);</div><div class="source-line">&nbsp;427&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">while</span> (<span class="c-number">1</span>)</div><div class="source-line current-line">&gt;428&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_idle();</div><div class="source-line">&nbsp;429&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 430</div><div class="source-line">&nbsp;431&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;432&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* idle-task scheduling class.</div><div class="source-line">&nbsp;433&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L122" data-line-number="122" data-line-id="line_121" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_121')" ondblclick="handleDoubleClick(event, 'line_121')"><span class="line-number" onclick="updateAnchor('L122', event)" title="Click to copy anchor link">122</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.079</span> <span class="hl-unit">us</span>    |    <span class="hl-func">nohz_run_idle_balance</span><span class="hl-symbol">(</span>cpu=3<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-do_idle+<span class="hl-addr">0x15</span>/<span class="hl-addr">0xc0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_121_content" style="display: none;"><div class="location-link"><strong>do_idle+0x14/0xc0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/idle.c#L264" target="_blank">do_idle&nbsp;at&nbsp;kernel/sched/idle.c:264</a><div class="source-line">&nbsp;259&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> cpu = smp_processor_id();</div><div class="source-line"> 260</div><div class="source-line">&nbsp;261&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;262&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Check <span class="c-keyword">if</span> we need to update blocked load</div><div class="source-line">&nbsp;263&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;264&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nohz_run_idle_balance(cpu);</div><div class="source-line"> 265</div><div class="source-line">&nbsp;266&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;267&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If the arch has a polling bit, we maintain an invariant:</div><div class="source-line">&nbsp;268&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</div><div class="source-line">&nbsp;269&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Our polling bit is clear <span class="c-keyword">if</span> we're not scheduled (i.e. <span class="c-keyword">if</span> rq-&gt;curr !=</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L123" data-line-number="123" data-line-id="line_122" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_122')" ondblclick="handleDoubleClick(event, 'line_122')"><span class="line-number" onclick="updateAnchor('L123', event)" title="Click to copy anchor link">123</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |    <span class="hl-func">tick_nohz_idle_enter</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-do_idle+<span class="hl-addr">0x26</span>/<span class="hl-addr">0xc0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_122_content" style="display: none;"><div class="location-link"><strong>do_idle+0x25/0xc0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/idle.c#L276" target="_blank">do_idle&nbsp;at&nbsp;kernel/sched/idle.c:276</a><div class="source-line">&nbsp;271&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* then setting need_resched is guaranteed to cause the CPU to</div><div class="source-line">&nbsp;272&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* reschedule.</div><div class="source-line">&nbsp;273&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line"> 274</div><div class="source-line">&nbsp;275&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__current_set_polling();</div><div class="source-line current-line">&gt;276&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_nohz_idle_enter();</div><div class="source-line"> 277</div><div class="source-line">&nbsp;278&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">while</span> (!need_resched()) {</div><div class="source-line"> 279</div><div class="source-line">&nbsp;280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;281&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Interrupts shouldn't be re-enabled from that point on until</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L124" data-line-number="124" data-line-id="line_123" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_123')" ondblclick="handleDoubleClick(event, 'line_123')"><span class="line-number" onclick="updateAnchor('L124', event)" title="Click to copy anchor link">124</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |      <span class="hl-func">tick_nohz_start_idle</span><span class="hl-symbol">(</span>ts=<span class="hl-addr">0xffff88807dd9c880</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tick_nohz_idle_enter+<span class="hl-addr">0x6e</span>/<span class="hl-addr">0x90</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_123_content" style="display: none;"><div class="location-link"><strong>tick_nohz_idle_enter+0x6d/0x90:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L1263" target="_blank">tick_nohz_idle_enter&nbsp;at&nbsp;kernel/time/tick-sched.c:1263</a><div class="source-line">&nbsp;1258&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts = this_cpu_ptr(&amp;tick_cpu_sched);</div><div class="source-line"> 1259</div><div class="source-line">&nbsp;1260&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WARN_ON_ONCE(ts-&gt;timer_expires_base);</div><div class="source-line"> 1261</div><div class="source-line">&nbsp;1262&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_sched_flag_set(ts, TS_FLAG_INIDLE);</div><div class="source-line current-line">&gt;1263&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_nohz_start_idle(ts);</div><div class="source-line"> 1264</div><div class="source-line">&nbsp;1265&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_enable();</div><div class="source-line">&nbsp;1266&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1267</div><div class="source-line">&nbsp;1268&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L125" data-line-number="125" data-line-id="line_124" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_124')" ondblclick="handleDoubleClick(event, 'line_124')"><span class="line-number" onclick="updateAnchor('L125', event)" title="Click to copy anchor link">125</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.196</span> <span class="hl-unit">us</span>    |        <span class="hl-func">ktime_get</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-tick_nohz_start_idle+<span class="hl-addr">0x4d</span>/<span class="hl-addr">0xc0</span> ret=93933535693 */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_124_content" style="display: none;"><div class="location-link"><strong>tick_nohz_start_idle+0x4c/0xc0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L748" target="_blank">tick_nohz_start_idle&nbsp;at&nbsp;kernel/time/tick-sched.c:748</a><div class="source-line">&nbsp;743&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 744</div><div class="source-line">&nbsp;745&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">void</span> tick_nohz_start_idle(<span class="c-keyword">struct</span> tick_sched *ts)</div><div class="source-line">&nbsp;746&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;747&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;write_seqcount_begin(&amp;ts-&gt;idle_sleeptime_seq);</div><div class="source-line current-line">&gt;748&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;idle_entrytime = ktime_get();</div><div class="source-line">&nbsp;749&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_sched_flag_set(ts, TS_FLAG_IDLE_ACTIVE);</div><div class="source-line">&nbsp;750&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;write_seqcount_end(&amp;ts-&gt;idle_sleeptime_seq);</div><div class="source-line"> 751</div><div class="source-line">&nbsp;752&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sched_clock_idle_sleep_event();</div><div class="source-line">&nbsp;753&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container " id="L126" data-line-number="126" data-line-id="line_125" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L126', event)" title="Click to copy anchor link">126</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.531</span> <span class="hl-unit">us</span>    |      <span class="hl-symbol">}</span> <span class="hl-comment">/* tick_nohz_start_idle */</span></span></div><div class="line-container " id="L127" data-line-number="127" data-line-id="line_126" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L127', event)" title="Click to copy anchor link">127</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.768</span> <span class="hl-unit">us</span>    |    <span class="hl-symbol">}</span> <span class="hl-comment">/* tick_nohz_idle_enter */</span></span></div><div class="line-container expandable" id="L128" data-line-number="128" data-line-id="line_127" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_127')" ondblclick="handleDoubleClick(event, 'line_127')"><span class="line-number" onclick="updateAnchor('L128', event)" title="Click to copy anchor link">128</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |    <span class="hl-func">arch_cpu_idle_enter</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-do_idle+<span class="hl-addr">0x3e</span>/<span class="hl-addr">0xc0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_127_content" style="display: none;"><div class="location-link"><strong>do_idle+0x3d/0xc0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/idle.c#L317" target="_blank">do_idle&nbsp;at&nbsp;kernel/sched/idle.c:317</a><div class="source-line">&nbsp;312&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (cpu_is_offline(cpu)) {</div><div class="source-line">&nbsp;313&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpuhp_report_idle_dead();</div><div class="source-line">&nbsp;314&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch_cpu_idle_dead();</div><div class="source-line">&nbsp;315&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 316</div><div class="source-line current-line">&gt;317&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch_cpu_idle_enter();</div><div class="source-line">&nbsp;318&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_nocb_flush_deferred_wakeup();</div><div class="source-line"> 319</div><div class="source-line">&nbsp;320&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;321&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* In poll mode we re-enable interrupts and spin. Also <span class="c-keyword">if</span> we</div><div class="source-line">&nbsp;322&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* detected in the wakeup from idle path that the tick</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L129" data-line-number="129" data-line-id="line_128" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_128')" ondblclick="handleDoubleClick(event, 'line_128')"><span class="line-number" onclick="updateAnchor('L129', event)" title="Click to copy anchor link">129</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">2.049</span> <span class="hl-unit">us</span>    |      <span class="hl-func">tsc_verify_tsc_adjust</span><span class="hl-symbol">(</span>resume=<span class="hl-addr">0x0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-arch_cpu_idle_enter+<span class="hl-addr">0x10</span>/<span class="hl-addr">0x20</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_128_content" style="display: none;"><div class="location-link"><strong>arch_cpu_idle_enter+0xf/0x20:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/arch/x86/kernel/process.c#L790" target="_blank">arch_cpu_idle_enter&nbsp;at&nbsp;arch/x86/kernel/process.c:790</a><div class="source-line">&nbsp;785&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;786&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 787</div><div class="source-line">&nbsp;788&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">void</span> arch_cpu_idle_enter(<span class="c-keyword">void</span>)</div><div class="source-line">&nbsp;789&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;790&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tsc_verify_tsc_adjust(<span class="kernel-macro">false</span>);</div><div class="source-line">&nbsp;791&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_touch_nmi();</div><div class="source-line">&nbsp;792&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 793</div><div class="source-line">&nbsp;794&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">void</span> __noreturn arch_cpu_idle_dead(<span class="c-keyword">void</span>)</div><div class="source-line">&nbsp;795&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L130" data-line-number="130" data-line-id="line_129" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_129')" ondblclick="handleDoubleClick(event, 'line_129')"><span class="line-number" onclick="updateAnchor('L130', event)" title="Click to copy anchor link">130</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.099</span> <span class="hl-unit">us</span>    |      <span class="hl-func">local_touch_nmi</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-do_idle+<span class="hl-addr">0x3e</span>/<span class="hl-addr">0xc0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_129_content" style="display: none;"><div class="location-link"><strong>do_idle+0x3d/0xc0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/idle.c#L317" target="_blank">do_idle&nbsp;at&nbsp;kernel/sched/idle.c:317</a><div class="source-line">&nbsp;312&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (cpu_is_offline(cpu)) {</div><div class="source-line">&nbsp;313&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpuhp_report_idle_dead();</div><div class="source-line">&nbsp;314&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch_cpu_idle_dead();</div><div class="source-line">&nbsp;315&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 316</div><div class="source-line current-line">&gt;317&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch_cpu_idle_enter();</div><div class="source-line">&nbsp;318&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rcu_nocb_flush_deferred_wakeup();</div><div class="source-line"> 319</div><div class="source-line">&nbsp;320&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;321&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* In poll mode we re-enable interrupts and spin. Also <span class="c-keyword">if</span> we</div><div class="source-line">&nbsp;322&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* detected in the wakeup from idle path that the tick</div><div style="height: 10px;"></div></div><div class="line-container " id="L131" data-line-number="131" data-line-id="line_130" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L131', event)" title="Click to copy anchor link">131</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">2.421</span> <span class="hl-unit">us</span>    |    <span class="hl-symbol">}</span> <span class="hl-comment">/* arch_cpu_idle_enter */</span></span></div><div class="line-container expandable" id="L132" data-line-number="132" data-line-id="line_131" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_131')" ondblclick="handleDoubleClick(event, 'line_131')"><span class="line-number" onclick="updateAnchor('L132', event)" title="Click to copy anchor link">132</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |    <span class="hl-func">cpuidle_idle_call</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-do_idle+<span class="hl-addr">0x7b</span>/<span class="hl-addr">0xc0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_131_content" style="display: none;"><div class="location-link"><strong>do_idle+0x7a/0xc0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/idle.c#L330" target="_blank">do_idle&nbsp;at&nbsp;kernel/sched/idle.c:330</a><div class="source-line">&nbsp;325&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;326&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (cpu_idle_force_poll || tick_check_broadcast_expired()) {</div><div class="source-line">&nbsp;327&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_nohz_idle_restart_tick();</div><div class="source-line">&nbsp;328&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpu_idle_poll();</div><div class="source-line">&nbsp;329&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="c-keyword">else</span> {</div><div class="source-line current-line">&gt;330&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpuidle_idle_call();</div><div class="source-line">&nbsp;331&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;332&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch_cpu_idle_exit();</div><div class="source-line">&nbsp;333&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 334</div><div class="source-line">&nbsp;335&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L133" data-line-number="133" data-line-id="line_132" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_132')" ondblclick="handleDoubleClick(event, 'line_132')"><span class="line-number" onclick="updateAnchor('L133', event)" title="Click to copy anchor link">133</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.097</span> <span class="hl-unit">us</span>    |      <span class="hl-func">cpuidle_get_cpu_driver</span><span class="hl-symbol">(</span>dev=<span class="hl-addr">0x0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-cpuidle_idle_call+<span class="hl-addr">0x2e</span>/<span class="hl-addr">0x150</span> ret=<span class="hl-addr">0x0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_132_content" style="display: none;"><div class="location-link"><strong>cpuidle_idle_call+0x2d/0x150:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/idle.c#L175" target="_blank">cpuidle_idle_call&nbsp;at&nbsp;kernel/sched/idle.c:175</a><div class="source-line">&nbsp;170&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* must clear the polling bit.</div><div class="source-line">&nbsp;171&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;172&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">void</span> cpuidle_idle_call(<span class="c-keyword">void</span>)</div><div class="source-line">&nbsp;173&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;174&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> cpuidle_device *dev = cpuidle_get_device();</div><div class="source-line current-line">&gt;175&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> cpuidle_driver *drv = cpuidle_get_cpu_driver(dev);</div><div class="source-line">&nbsp;176&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> next_state, entered_state;</div><div class="source-line"> 177</div><div class="source-line">&nbsp;178&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;179&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Check <span class="c-keyword">if</span> the idle task must be rescheduled. If it is the</div><div class="source-line">&nbsp;180&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="c-keyword">case</span>, exit the function after re-enabling the local IRQ.</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L134" data-line-number="134" data-line-id="line_133" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_133')" ondblclick="handleDoubleClick(event, 'line_133')"><span class="line-number" onclick="updateAnchor('L134', event)" title="Click to copy anchor link">134</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.079</span> <span class="hl-unit">us</span>    |      <span class="hl-func">cpuidle_not_available</span><span class="hl-symbol">(</span>drv=<span class="hl-addr">0x0</span>, dev=<span class="hl-addr">0x0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-cpuidle_idle_call+<span class="hl-addr">0x4f</span>/<span class="hl-addr">0x150</span> ret=true */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_133_content" style="display: none;"><div class="location-link"><strong>cpuidle_idle_call+0x4e/0x150:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/idle.c#L187" target="_blank">cpuidle_idle_call&nbsp;at&nbsp;kernel/sched/idle.c:187</a><div class="source-line">&nbsp;182&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (need_resched()) {</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_enable();</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 186</div><div class="source-line current-line">&gt;187&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (cpuidle_not_available(drv, dev)) {</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_nohz_idle_stop_tick();</div><div class="source-line"> 189</div><div class="source-line">&nbsp;190&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default_idle_call();</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">goto</span> exit_idle;</div><div class="source-line">&nbsp;192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L135" data-line-number="135" data-line-id="line_134" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_134')" ondblclick="handleDoubleClick(event, 'line_134')"><span class="line-number" onclick="updateAnchor('L135', event)" title="Click to copy anchor link">135</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |      <span class="hl-func">tick_nohz_idle_stop_tick</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-cpuidle_idle_call+<span class="hl-addr">0x114</span>/<span class="hl-addr">0x150</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_134_content" style="display: none;"><div class="location-link"><strong>cpuidle_idle_call+0x113/0x150:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/idle.c#L188" target="_blank">cpuidle_idle_call&nbsp;at&nbsp;kernel/sched/idle.c:188</a><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_enable();</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 186</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (cpuidle_not_available(drv, dev)) {</div><div class="source-line current-line">&gt;188&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_nohz_idle_stop_tick();</div><div class="source-line"> 189</div><div class="source-line">&nbsp;190&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default_idle_call();</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">goto</span> exit_idle;</div><div class="source-line">&nbsp;192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 193</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L136" data-line-number="136" data-line-id="line_135" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_135')" ondblclick="handleDoubleClick(event, 'line_135')"><span class="line-number" onclick="updateAnchor('L136', event)" title="Click to copy anchor link">136</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |        <span class="hl-func">can_stop_idle_tick</span><span class="hl-symbol">(</span>cpu=3, ts=<span class="hl-addr">0xffff88807dd9c880</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tick_nohz_idle_stop_tick+<span class="hl-addr">0x9d</span>/<span class="hl-addr">0xd0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_135_content" style="display: none;"><div class="location-link"><strong>tick_nohz_idle_stop_tick+0x9c/0xd0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L1216" target="_blank">tick_nohz_idle_stop_tick&nbsp;at&nbsp;kernel/time/tick-sched.c:1216</a><div class="source-line">&nbsp;1211&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If tick_nohz_get_sleep_length() ran tick_nohz_next_event(), the</div><div class="source-line">&nbsp;1212&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* tick timer expiration time is known already.</div><div class="source-line">&nbsp;1213&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1214&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (ts-&gt;timer_expires_base)</div><div class="source-line">&nbsp;1215&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires = ts-&gt;timer_expires;</div><div class="source-line current-line">&gt;1216&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span> <span class="c-keyword">if</span> (can_stop_idle_tick(cpu, ts))</div><div class="source-line">&nbsp;1217&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires = tick_nohz_next_event(ts, cpu);</div><div class="source-line">&nbsp;1218&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span></div><div class="source-line">&nbsp;1219&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 1220</div><div class="source-line">&nbsp;1221&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;idle_calls++;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L137" data-line-number="137" data-line-id="line_136" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_136')" ondblclick="handleDoubleClick(event, 'line_136')"><span class="line-number" onclick="updateAnchor('L137', event)" title="Click to copy anchor link">137</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.075</span> <span class="hl-unit">us</span>    |          <span class="hl-func">report_idle_softirq</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-can_stop_idle_tick+<span class="hl-addr">0x2a</span>/<span class="hl-addr">0x40</span> ret=false */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_136_content" style="display: none;"><div class="location-link"><strong>can_stop_idle_tick+0x29/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L1178" target="_blank">can_stop_idle_tick&nbsp;at&nbsp;kernel/time/tick-sched.c:1178</a><div class="source-line">&nbsp;1173&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">false</span>;</div><div class="source-line"> 1174</div><div class="source-line">&nbsp;1175&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (need_resched())</div><div class="source-line">&nbsp;1176&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">false</span>;</div><div class="source-line"> 1177</div><div class="source-line current-line">&gt;1178&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (unlikely(report_idle_softirq()))</div><div class="source-line">&nbsp;1179&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">false</span>;</div><div class="source-line"> 1180</div><div class="source-line">&nbsp;1181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (tick_nohz_full_enabled()) {</div><div class="source-line">&nbsp;1182&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> tick_cpu = READ_ONCE(tick_do_timer_cpu);</div><div class="source-line"> 1183</div><div style="height: 10px;"></div></div><div class="line-container " id="L138" data-line-number="138" data-line-id="line_137" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L138', event)" title="Click to copy anchor link">138</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.253</span> <span class="hl-unit">us</span>    |        <span class="hl-symbol">}</span> <span class="hl-comment">/* can_stop_idle_tick ret=true */</span></span></div><div class="line-container expandable" id="L139" data-line-number="139" data-line-id="line_138" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_138')" ondblclick="handleDoubleClick(event, 'line_138')"><span class="line-number" onclick="updateAnchor('L139', event)" title="Click to copy anchor link">139</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |        <span class="hl-func">tick_nohz_next_event</span><span class="hl-symbol">(</span>ts=<span class="hl-addr">0xffff88807dd9c880</span>, cpu=3<span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tick_nohz_idle_stop_tick+<span class="hl-addr">0xac</span>/<span class="hl-addr">0xd0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_138_content" style="display: none;"><div class="location-link"><strong>tick_nohz_idle_stop_tick+0xab/0xd0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L1217" target="_blank">tick_nohz_idle_stop_tick&nbsp;at&nbsp;kernel/time/tick-sched.c:1217</a><div class="source-line">&nbsp;1212&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* tick timer expiration time is known already.</div><div class="source-line">&nbsp;1213&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1214&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (ts-&gt;timer_expires_base)</div><div class="source-line">&nbsp;1215&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires = ts-&gt;timer_expires;</div><div class="source-line">&nbsp;1216&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span> <span class="c-keyword">if</span> (can_stop_idle_tick(cpu, ts))</div><div class="source-line current-line">&gt;1217&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires = tick_nohz_next_event(ts, cpu);</div><div class="source-line">&nbsp;1218&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span></div><div class="source-line">&nbsp;1219&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 1220</div><div class="source-line">&nbsp;1221&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;idle_calls++;</div><div class="source-line"> 1222</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L140" data-line-number="140" data-line-id="line_139" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_139')" ondblclick="handleDoubleClick(event, 'line_139')"><span class="line-number" onclick="updateAnchor('L140', event)" title="Click to copy anchor link">140</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.205</span> <span class="hl-unit">us</span>    |          <span class="hl-func">get_jiffies_update</span><span class="hl-symbol">(</span>basej=<span class="hl-addr">0xffffc900000d7e78</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-tick_nohz_next_event+<span class="hl-addr">0x2c</span>/<span class="hl-addr">0x160</span> ret=<span class="hl-addr">0x15deaa0e80</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_139_content" style="display: none;"><div class="location-link"><strong>tick_nohz_next_event+0x2b/0x160:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L897" target="_blank">tick_nohz_next_event&nbsp;at&nbsp;kernel/time/tick-sched.c:897</a><div class="source-line">&nbsp;892&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;893&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kernel-type">u64</span> basemono, next_tick, delta, expires;</div><div class="source-line">&nbsp;894&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long basejiff;</div><div class="source-line">&nbsp;895&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> tick_cpu;</div><div class="source-line"> 896</div><div class="source-line current-line">&gt;897&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;basemono = get_jiffies_update(&amp;basejiff);</div><div class="source-line">&nbsp;898&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;last_jiffies = basejiff;</div><div class="source-line">&nbsp;899&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;timer_expires_base = basemono;</div><div class="source-line"> 900</div><div class="source-line">&nbsp;901&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;902&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Keep the periodic tick, when RCU, architecture or irq_work</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L141" data-line-number="141" data-line-id="line_140" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_140')" ondblclick="handleDoubleClick(event, 'line_140')"><span class="line-number" onclick="updateAnchor('L141', event)" title="Click to copy anchor link">141</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.084</span> <span class="hl-unit">us</span>    |          <span class="hl-func">rcu_needs_cpu</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-tick_nohz_next_event+<span class="hl-addr">0x46</span>/<span class="hl-addr">0x160</span> ret=0 */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_140_content" style="display: none;"><div class="location-link"><strong>tick_nohz_next_event+0x45/0x160:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L911" target="_blank">tick_nohz_next_event&nbsp;at&nbsp;kernel/time/tick-sched.c:911</a><div class="source-line">&nbsp;906&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* because there is an already expired timer, so it will request</div><div class="source-line">&nbsp;907&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* immediate expiry, which rearms the hardware timer with a</div><div class="source-line">&nbsp;908&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* minimal delta, which brings us back to this place</div><div class="source-line">&nbsp;909&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* immediately. Lather, rinse and repeat...</div><div class="source-line">&nbsp;910&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;911&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (rcu_needs_cpu() || arch_needs_cpu() ||</div><div class="source-line">&nbsp;912&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irq_work_needs_cpu() || local_timer_softirq_pending()) {</div><div class="source-line">&nbsp;913&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_tick = basemono + TICK_NSEC;</div><div class="source-line">&nbsp;914&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="c-keyword">else</span> {</div><div class="source-line">&nbsp;915&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;916&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Get the next pending timer. If high resolution</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L142" data-line-number="142" data-line-id="line_141" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_141')" ondblclick="handleDoubleClick(event, 'line_141')"><span class="line-number" onclick="updateAnchor('L142', event)" title="Click to copy anchor link">142</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |          <span class="hl-func">get_next_timer_interrupt</span><span class="hl-symbol">(</span>basej=<span class="hl-addr">0xffffaf79</span>, basem=<span class="hl-addr">0x15deaa0e80</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tick_nohz_next_event+<span class="hl-addr">0x107</span>/<span class="hl-addr">0x160</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_141_content" style="display: none;"><div class="location-link"><strong>tick_nohz_next_event+0x106/0x160:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L922" target="_blank">tick_nohz_next_event&nbsp;at&nbsp;kernel/time/tick-sched.c:922</a><div class="source-line">&nbsp;917&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* timers are enabled this only takes the timer wheel</div><div class="source-line">&nbsp;918&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* timers into account. If high resolution timers are</div><div class="source-line">&nbsp;919&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* disabled this also looks at the next expiring</div><div class="source-line">&nbsp;920&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hrtimer.</div><div class="source-line">&nbsp;921&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;922&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_tick = get_next_timer_interrupt(basejiff, basemono);</div><div class="source-line">&nbsp;923&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;next_timer = next_tick;</div><div class="source-line">&nbsp;924&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 925</div><div class="source-line">&nbsp;926&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Make sure next_tick is never before basemono! */</div><div class="source-line">&nbsp;927&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (WARN_ON_ONCE(basemono &gt; next_tick))</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L143" data-line-number="143" data-line-id="line_142" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_142')" ondblclick="handleDoubleClick(event, 'line_142')"><span class="line-number" onclick="updateAnchor('L143', event)" title="Click to copy anchor link">143</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd98d00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x6b</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_142_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x6a/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2204" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2204</a><div class="source-line">&nbsp;2199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2200</div><div class="source-line">&nbsp;2201&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_local = this_cpu_ptr(&amp;timer_bases[BASE_LOCAL]);</div><div class="source-line">&nbsp;2202&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global = this_cpu_ptr(&amp;timer_bases[BASE_GLOBAL]);</div><div class="source-line"> 2203</div><div class="source-line current-line">&gt;2204&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;base_local-&gt;lock);</div><div class="source-line">&nbsp;2205&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_nested(&amp;base_global-&gt;lock, SINGLE_DEPTH_NESTING);</div><div class="source-line"> 2206</div><div class="source-line">&nbsp;2207&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = fetch_next_timer_interrupt(basej, basem, base_local,</div><div class="source-line">&nbsp;2208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global, &amp;tevt);</div><div class="source-line"> 2209</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L144" data-line-number="144" data-line-id="line_143" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_143')" ondblclick="handleDoubleClick(event, 'line_143')"><span class="line-number" onclick="updateAnchor('L144', event)" title="Click to copy anchor link">144</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.149</span> <span class="hl-unit">us</span>    |              <span class="hl-func">preempt_count_add</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock+<span class="hl-addr">0x17</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_143_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock+0x16/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L132" target="_blank">__raw_spin_lock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:132</a><div class="source-line">&nbsp;127&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 129</div><div class="source-line">&nbsp;130&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_lock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;131&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;132&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;133&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line">&nbsp;134&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;135&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 136</div><div class="source-line">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* !CONFIG_GENERIC_LOCKBREAK || CONFIG_DEBUG_LOCK_ALLOC */</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L154" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_lock&nbsp;at&nbsp;kernel/locking/spinlock.c:154</a><div class="source-line">&nbsp;149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 150</div><div class="source-line">&nbsp;151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK</div><div class="source-line">&nbsp;152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_lock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;154&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_lock(lock);</div><div class="source-line">&nbsp;155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;156&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock);</div><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 158</div><div class="source-line">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQSAVE</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L145" data-line-number="145" data-line-id="line_144" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_144')" ondblclick="handleDoubleClick(event, 'line_144')"><span class="line-number" onclick="updateAnchor('L145', event)" title="Click to copy anchor link">145</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.088</span> <span class="hl-unit">us</span>    |              <span class="hl-func">do_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd98d00</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x6b</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_144_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x6a/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2204" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2204</a><div class="source-line">&nbsp;2199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2200</div><div class="source-line">&nbsp;2201&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_local = this_cpu_ptr(&amp;timer_bases[BASE_LOCAL]);</div><div class="source-line">&nbsp;2202&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global = this_cpu_ptr(&amp;timer_bases[BASE_GLOBAL]);</div><div class="source-line"> 2203</div><div class="source-line current-line">&gt;2204&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;base_local-&gt;lock);</div><div class="source-line">&nbsp;2205&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_nested(&amp;base_global-&gt;lock, SINGLE_DEPTH_NESTING);</div><div class="source-line"> 2206</div><div class="source-line">&nbsp;2207&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = fetch_next_timer_interrupt(basej, basem, base_local,</div><div class="source-line">&nbsp;2208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global, &amp;tevt);</div><div class="source-line"> 2209</div><div style="height: 10px;"></div></div><div class="line-container " id="L146" data-line-number="146" data-line-id="line_145" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L146', event)" title="Click to copy anchor link">146</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.598</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_lock */</span></span></div><div class="line-container expandable" id="L147" data-line-number="147" data-line-id="line_146" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_146')" ondblclick="handleDoubleClick(event, 'line_146')"><span class="line-number" onclick="updateAnchor('L147', event)" title="Click to copy anchor link">147</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">_raw_spin_lock_nested</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd99dc0</span>, subclass=1<span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x78</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_146_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x77/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2205" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2205</a><div class="source-line"> 2200</div><div class="source-line">&nbsp;2201&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_local = this_cpu_ptr(&amp;timer_bases[BASE_LOCAL]);</div><div class="source-line">&nbsp;2202&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global = this_cpu_ptr(&amp;timer_bases[BASE_GLOBAL]);</div><div class="source-line"> 2203</div><div class="source-line">&nbsp;2204&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;base_local-&gt;lock);</div><div class="source-line current-line">&gt;2205&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_nested(&amp;base_global-&gt;lock, SINGLE_DEPTH_NESTING);</div><div class="source-line"> 2206</div><div class="source-line">&nbsp;2207&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = fetch_next_timer_interrupt(basej, basem, base_local,</div><div class="source-line">&nbsp;2208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global, &amp;tevt);</div><div class="source-line"> 2209</div><div class="source-line">&nbsp;2210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L148" data-line-number="148" data-line-id="line_147" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_147')" ondblclick="handleDoubleClick(event, 'line_147')"><span class="line-number" onclick="updateAnchor('L148', event)" title="Click to copy anchor link">148</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |              <span class="hl-func">preempt_count_add</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock_nested+<span class="hl-addr">0x1c</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_147_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock_nested+0x1b/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L377" target="_blank">_raw_spin_lock_nested&nbsp;at&nbsp;kernel/locking/spinlock.c:377</a><div class="source-line"> 372</div><div class="source-line">&nbsp;373&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_DEBUG_LOCK_ALLOC</div><div class="source-line"> 374</div><div class="source-line">&nbsp;375&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">void</span> __lockfunc _raw_spin_lock_nested(raw_spinlock_t *lock, <span class="c-keyword">int</span> subclass)</div><div class="source-line">&nbsp;376&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;377&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;378&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, subclass, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line">&nbsp;379&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;380&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;381&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock_nested);</div><div class="source-line"> 382</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L149" data-line-number="149" data-line-id="line_148" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_148')" ondblclick="handleDoubleClick(event, 'line_148')"><span class="line-number" onclick="updateAnchor('L149', event)" title="Click to copy anchor link">149</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.083</span> <span class="hl-unit">us</span>    |              <span class="hl-func">do_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd99dc0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x78</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_148_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x77/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2205" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2205</a><div class="source-line"> 2200</div><div class="source-line">&nbsp;2201&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_local = this_cpu_ptr(&amp;timer_bases[BASE_LOCAL]);</div><div class="source-line">&nbsp;2202&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global = this_cpu_ptr(&amp;timer_bases[BASE_GLOBAL]);</div><div class="source-line"> 2203</div><div class="source-line">&nbsp;2204&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;base_local-&gt;lock);</div><div class="source-line current-line">&gt;2205&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_nested(&amp;base_global-&gt;lock, SINGLE_DEPTH_NESTING);</div><div class="source-line"> 2206</div><div class="source-line">&nbsp;2207&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = fetch_next_timer_interrupt(basej, basem, base_local,</div><div class="source-line">&nbsp;2208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global, &amp;tevt);</div><div class="source-line"> 2209</div><div class="source-line">&nbsp;2210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div style="height: 10px;"></div></div><div class="line-container " id="L150" data-line-number="150" data-line-id="line_149" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L150', event)" title="Click to copy anchor link">150</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.506</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_lock_nested */</span></span></div><div class="line-container expandable" id="L151" data-line-number="151" data-line-id="line_150" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_150')" ondblclick="handleDoubleClick(event, 'line_150')"><span class="line-number" onclick="updateAnchor('L151', event)" title="Click to copy anchor link">151</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">fetch_next_timer_interrupt</span><span class="hl-symbol">(</span>basej=<span class="hl-addr">0xffffaf79</span>, basem=<span class="hl-addr">0x15deaa0e80</span>, base_local=<span class="hl-addr">0xffff88807dd98d00</span>, base_global=<span class="hl-addr">0xffff88807dd99dc0</span>, tevt=<span class="hl-addr">0xffffc900000d7e28</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x8e</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_150_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x8d/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2207" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2207</a><div class="source-line">&nbsp;2202&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global = this_cpu_ptr(&amp;timer_bases[BASE_GLOBAL]);</div><div class="source-line"> 2203</div><div class="source-line">&nbsp;2204&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;base_local-&gt;lock);</div><div class="source-line">&nbsp;2205&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_nested(&amp;base_global-&gt;lock, SINGLE_DEPTH_NESTING);</div><div class="source-line"> 2206</div><div class="source-line current-line">&gt;2207&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = fetch_next_timer_interrupt(basej, basem, base_local,</div><div class="source-line">&nbsp;2208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global, &amp;tevt);</div><div class="source-line"> 2209</div><div class="source-line">&nbsp;2210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;2211&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If the next event is only one jiffy ahead there is no need to call</div><div class="source-line">&nbsp;2212&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* timer migration hierarchy related functions. The value <span class="c-keyword">for</span> the next</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L152" data-line-number="152" data-line-id="line_151" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_151')" ondblclick="handleDoubleClick(event, 'line_151')"><span class="line-number" onclick="updateAnchor('L152', event)" title="Click to copy anchor link">152</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_timer_interrupt</span><span class="hl-symbol">(</span>base=<span class="hl-addr">0xffff88807dd98d00</span>, basej=<span class="hl-addr">0xffffaf79</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-fetch_next_timer_interrupt+<span class="hl-addr">0x29</span>/<span class="hl-addr">0xf0</span> ret=<span class="hl-addr">0xffffaf8a</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_151_content" style="display: none;"><div class="location-link"><strong>fetch_next_timer_interrupt+0x28/0xf0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L1990" target="_blank">fetch_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:1990</a><div class="source-line">&nbsp;1985&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> timer_events *tevt)</div><div class="source-line">&nbsp;1986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;1987&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long nextevt, nextevt_local, nextevt_global;</div><div class="source-line">&nbsp;1988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool local_first;</div><div class="source-line"> 1989</div><div class="source-line current-line">&gt;1990&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt_local = next_timer_interrupt(base_local, basej);</div><div class="source-line">&nbsp;1991&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt_global = next_timer_interrupt(base_global, basej);</div><div class="source-line"> 1992</div><div class="source-line">&nbsp;1993&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_first = time_before_eq(nextevt_local, nextevt_global);</div><div class="source-line"> 1994</div><div class="source-line">&nbsp;1995&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = local_first ? nextevt_local : nextevt_global;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L153" data-line-number="153" data-line-id="line_152" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_152')" ondblclick="handleDoubleClick(event, 'line_152')"><span class="line-number" onclick="updateAnchor('L153', event)" title="Click to copy anchor link">153</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.075</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_timer_interrupt</span><span class="hl-symbol">(</span>base=<span class="hl-addr">0xffff88807dd99dc0</span>, basej=<span class="hl-addr">0xffffaf79</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-fetch_next_timer_interrupt+<span class="hl-addr">0x37</span>/<span class="hl-addr">0xf0</span> ret=<span class="hl-addr">0xffffaf80</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_152_content" style="display: none;"><div class="location-link"><strong>fetch_next_timer_interrupt+0x36/0xf0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L1991" target="_blank">fetch_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:1991</a><div class="source-line">&nbsp;1986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;1987&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long nextevt, nextevt_local, nextevt_global;</div><div class="source-line">&nbsp;1988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool local_first;</div><div class="source-line"> 1989</div><div class="source-line">&nbsp;1990&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt_local = next_timer_interrupt(base_local, basej);</div><div class="source-line current-line">&gt;1991&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt_global = next_timer_interrupt(base_global, basej);</div><div class="source-line"> 1992</div><div class="source-line">&nbsp;1993&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_first = time_before_eq(nextevt_local, nextevt_global);</div><div class="source-line"> 1994</div><div class="source-line">&nbsp;1995&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = local_first ? nextevt_local : nextevt_global;</div><div class="source-line"> 1996</div><div style="height: 10px;"></div></div><div class="line-container " id="L154" data-line-number="154" data-line-id="line_153" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L154', event)" title="Click to copy anchor link">154</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.412</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* fetch_next_timer_interrupt ret=<span class="hl-addr">0xffffaf80</span> */</span></span></div><div class="line-container expandable" id="L155" data-line-number="155" data-line-id="line_154" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_154')" ondblclick="handleDoubleClick(event, 'line_154')"><span class="line-number" onclick="updateAnchor('L155', event)" title="Click to copy anchor link">155</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">timer_use_tmigr</span><span class="hl-symbol">(</span>basej=<span class="hl-addr">0xffffaf79</span>, basem=<span class="hl-addr">0x15deaa0e80</span>, nextevt=<span class="hl-addr">0xffffc900000d7e20</span>, tick_stop_path=<span class="hl-addr">0x0</span>, timer_base_idle=<span class="hl-addr">0x0</span>, tevt=<span class="hl-addr">0xffffc900000d7e28</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x183</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_154_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x182/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2223" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2223</a><div class="source-line">&nbsp;2218&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* this CPU needs to handle the first timer migration hierarchy</div><div class="source-line">&nbsp;2219&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* event. See timer_use_tmigr() <span class="c-keyword">for</span> detailed information.</div><div class="source-line">&nbsp;2220&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;2221&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idle_is_possible = time_after(nextevt, basej + <span class="c-number">1</span>);</div><div class="source-line">&nbsp;2222&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (idle_is_possible)</div><div class="source-line current-line">&gt;2223&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer_use_tmigr(basej, basem, &amp;nextevt, idle,</div><div class="source-line">&nbsp;2224&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_local-&gt;is_idle, &amp;tevt);</div><div class="source-line"> 2225</div><div class="source-line">&nbsp;2226&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;2227&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* We have a fresh next event. Check whether we can forward the</div><div class="source-line">&nbsp;2228&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* base.</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L156" data-line-number="156" data-line-id="line_155" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_155')" ondblclick="handleDoubleClick(event, 'line_155')"><span class="line-number" onclick="updateAnchor('L156', event)" title="Click to copy anchor link">156</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">tmigr_quick_check</span><span class="hl-symbol">(</span>nextevt=<span class="hl-addr">0x15e2d62c00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-timer_use_tmigr+<span class="hl-addr">0x6a</span>/<span class="hl-addr">0x80</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_155_content" style="display: none;"><div class="location-link"><strong>timer_use_tmigr+0x69/0x80:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2150" target="_blank">timer_use_tmigr&nbsp;at&nbsp;kernel/time/timer.c:2150</a><div class="source-line">&nbsp;2145&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (timer_base_idle)</div><div class="source-line">&nbsp;2146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_tmigr = tmigr_cpu_new_timer(tevt-&gt;global);</div><div class="source-line">&nbsp;2147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span> <span class="c-keyword">if</span> (tick_stop_path)</div><div class="source-line">&nbsp;2148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_tmigr = tmigr_cpu_deactivate(tevt-&gt;global);</div><div class="source-line">&nbsp;2149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span></div><div class="source-line current-line">&gt;2150&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_tmigr = tmigr_quick_check(tevt-&gt;global);</div><div class="source-line"> 2151</div><div class="source-line">&nbsp;2152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;2153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If the CPU is the last going idle in timer migration hierarchy, make</div><div class="source-line">&nbsp;2154&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* sure the CPU will wake up in time to handle remote timers.</div><div class="source-line">&nbsp;2155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* next_tmigr == KTIME_MAX <span class="c-keyword">if</span> other CPUs are still active.</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L157" data-line-number="157" data-line-id="line_156" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_156')" ondblclick="handleDoubleClick(event, 'line_156')"><span class="line-number" onclick="updateAnchor('L157', event)" title="Click to copy anchor link">157</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.127</span> <span class="hl-unit">us</span>    |                <span class="hl-func">tmigr_check_migrator_and_lonely</span><span class="hl-symbol">(</span>group=<span class="hl-addr">0xffff888005720a80</span>, childmask=<span class="hl-addr">0x8</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-tmigr_quick_check+<span class="hl-addr">0x3e</span>/<span class="hl-addr">0x90</span> ret=false */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_156_content" style="display: none;"><div class="location-link"><strong>tmigr_quick_check+0x3d/0x90:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L1404" target="_blank">tmigr_quick_check&nbsp;at&nbsp;kernel/time/timer_migration.c:1404</a><div class="source-line">&nbsp;1399&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> nextevt;</div><div class="source-line"> 1400</div><div class="source-line">&nbsp;1401&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (WARN_ON_ONCE(tmc-&gt;idle))</div><div class="source-line">&nbsp;1402&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> nextevt;</div><div class="source-line"> 1403</div><div class="source-line current-line">&gt;1404&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!tmigr_check_migrator_and_lonely(tmc-&gt;tmgroup, tmc-&gt;groupmask))</div><div class="source-line">&nbsp;1405&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> KTIME_MAX;</div><div class="source-line"> 1406</div><div class="source-line">&nbsp;1407&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">do</span> {</div><div class="source-line">&nbsp;1408&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!tmigr_check_lonely(group))</div><div class="source-line">&nbsp;1409&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> KTIME_MAX;</div><div style="height: 10px;"></div></div><div class="line-container " id="L158" data-line-number="158" data-line-id="line_157" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L158', event)" title="Click to copy anchor link">158</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.297</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* tmigr_quick_check ret=<span class="hl-addr">0x7fffffffffffffff</span> */</span></span></div><div class="line-container " id="L159" data-line-number="159" data-line-id="line_158" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L159', event)" title="Click to copy anchor link">159</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.476</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* timer_use_tmigr */</span></span></div><div class="line-container expandable" id="L160" data-line-number="160" data-line-id="line_159" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_159')" ondblclick="handleDoubleClick(event, 'line_159')"><span class="line-number" onclick="updateAnchor('L160', event)" title="Click to copy anchor link">160</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd99dc0</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x115</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_159_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x114/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2274" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2274</a><div class="source-line">&nbsp;2269&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;2270&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!base_local-&gt;is_idle &amp;&amp; idle_is_possible)</div><div class="source-line">&nbsp;2271&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmigr_cpu_activate();</div><div class="source-line">&nbsp;2272&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2273</div><div class="source-line current-line">&gt;2274&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_global-&gt;lock);</div><div class="source-line">&nbsp;2275&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_local-&gt;lock);</div><div class="source-line"> 2276</div><div class="source-line">&nbsp;2277&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> cmp_next_hrtimer_event(basem, tevt.local);</div><div class="source-line">&nbsp;2278&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2279</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L161" data-line-number="161" data-line-id="line_160" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_160')" ondblclick="handleDoubleClick(event, 'line_160')"><span class="line-number" onclick="updateAnchor('L161', event)" title="Click to copy anchor link">161</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |              <span class="hl-func">do_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd99dc0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x23</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_160_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x22/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L142" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:142</a><div class="source-line">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* !CONFIG_GENERIC_LOCKBREAK || CONFIG_DEBUG_LOCK_ALLOC */</div><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line current-line">&gt;142&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;143&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L162" data-line-number="162" data-line-id="line_161" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_161')" ondblclick="handleDoubleClick(event, 'line_161')"><span class="line-number" onclick="updateAnchor('L162', event)" title="Click to copy anchor link">162</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |              <span class="hl-func">preempt_count_sub</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x2d</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_161_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x2c/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L143" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:143</a><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line">&nbsp;142&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line current-line">&gt;143&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container " id="L163" data-line-number="163" data-line-id="line_162" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L163', event)" title="Click to copy anchor link">163</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.407</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_unlock */</span></span></div><div class="line-container expandable" id="L164" data-line-number="164" data-line-id="line_163" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_163')" ondblclick="handleDoubleClick(event, 'line_163')"><span class="line-number" onclick="updateAnchor('L164', event)" title="Click to copy anchor link">164</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd98d00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x11d</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_163_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x11c/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2275" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2275</a><div class="source-line">&nbsp;2270&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!base_local-&gt;is_idle &amp;&amp; idle_is_possible)</div><div class="source-line">&nbsp;2271&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmigr_cpu_activate();</div><div class="source-line">&nbsp;2272&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2273</div><div class="source-line">&nbsp;2274&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_global-&gt;lock);</div><div class="source-line current-line">&gt;2275&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_local-&gt;lock);</div><div class="source-line"> 2276</div><div class="source-line">&nbsp;2277&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> cmp_next_hrtimer_event(basem, tevt.local);</div><div class="source-line">&nbsp;2278&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2279</div><div class="source-line">&nbsp;2280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L165" data-line-number="165" data-line-id="line_164" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_164')" ondblclick="handleDoubleClick(event, 'line_164')"><span class="line-number" onclick="updateAnchor('L165', event)" title="Click to copy anchor link">165</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |              <span class="hl-func">do_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd98d00</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x23</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_164_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x22/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L142" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:142</a><div class="source-line">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* !CONFIG_GENERIC_LOCKBREAK || CONFIG_DEBUG_LOCK_ALLOC */</div><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line current-line">&gt;142&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;143&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L166" data-line-number="166" data-line-id="line_165" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_165')" ondblclick="handleDoubleClick(event, 'line_165')"><span class="line-number" onclick="updateAnchor('L166', event)" title="Click to copy anchor link">166</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |              <span class="hl-func">preempt_count_sub</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x2d</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_165_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x2c/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L143" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:143</a><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line">&nbsp;142&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line current-line">&gt;143&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container " id="L167" data-line-number="167" data-line-id="line_166" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L167', event)" title="Click to copy anchor link">167</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.399</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_unlock */</span></span></div><div class="line-container expandable" id="L168" data-line-number="168" data-line-id="line_167" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_167')" ondblclick="handleDoubleClick(event, 'line_167')"><span class="line-number" onclick="updateAnchor('L168', event)" title="Click to copy anchor link">168</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">cmp_next_hrtimer_event</span><span class="hl-symbol">(</span>basem=<span class="hl-addr">0x15deaa0e80</span>, expires=<span class="hl-addr">0x15e8cc0d00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x12a</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_167_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x129/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2277" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2277</a><div class="source-line">&nbsp;2272&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2273</div><div class="source-line">&nbsp;2274&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_global-&gt;lock);</div><div class="source-line">&nbsp;2275&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_local-&gt;lock);</div><div class="source-line"> 2276</div><div class="source-line current-line">&gt;2277&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> cmp_next_hrtimer_event(basem, tevt.local);</div><div class="source-line">&nbsp;2278&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2279</div><div class="source-line">&nbsp;2280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;2281&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* get_next_timer_interrupt() - <span class="c-keyword">return</span> the time (clock mono) of the next timer</div><div class="source-line">&nbsp;2282&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @basej:	base time jiffies</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L169" data-line-number="169" data-line-id="line_168" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_168')" ondblclick="handleDoubleClick(event, 'line_168')"><span class="line-number" onclick="updateAnchor('L169', event)" title="Click to copy anchor link">169</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">hrtimer_get_next_event</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-cmp_next_hrtimer_event+<span class="hl-addr">0x12</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_168_content" style="display: none;"><div class="location-link"><strong>cmp_next_hrtimer_event+0x11/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L1935" target="_blank">cmp_next_hrtimer_event&nbsp;at&nbsp;kernel/time/timer.c:1935</a><div class="source-line">&nbsp;1930&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Check, <span class="c-keyword">if</span> the next hrtimer event is before the next timer wheel</div><div class="source-line">&nbsp;1931&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* event:</div><div class="source-line">&nbsp;1932&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1933&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="kernel-type">u64</span> cmp_next_hrtimer_event(<span class="kernel-type">u64</span> basem, <span class="kernel-type">u64</span> expires)</div><div class="source-line">&nbsp;1934&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;1935&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kernel-type">u64</span> nextevt = hrtimer_get_next_event();</div><div class="source-line"> 1936</div><div class="source-line">&nbsp;1937&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;1938&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If high resolution timers are enabled</div><div class="source-line">&nbsp;1939&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hrtimer_get_next_event() returns KTIME_MAX.</div><div class="source-line">&nbsp;1940&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L170" data-line-number="170" data-line-id="line_169" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_169')" ondblclick="handleDoubleClick(event, 'line_169')"><span class="line-number" onclick="updateAnchor('L170', event)" title="Click to copy anchor link">170</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">_raw_spin_lock_irqsave</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-hrtimer_get_next_event+<span class="hl-addr">0x2f</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_169_content" style="display: none;"><div class="location-link"><strong>hrtimer_get_next_event+0x2e/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1523" target="_blank">hrtimer_get_next_event&nbsp;at&nbsp;kernel/time/hrtimer.c:1523</a><div class="source-line">&nbsp;1518&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;1519&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> hrtimer_cpu_base *cpu_base = this_cpu_ptr(&amp;hrtimer_bases);</div><div class="source-line">&nbsp;1520&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kernel-type">u64</span> expires = KTIME_MAX;</div><div class="source-line">&nbsp;1521&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags;</div><div class="source-line"> 1522</div><div class="source-line current-line">&gt;1523&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_irqsave(&amp;cpu_base-&gt;lock, flags);</div><div class="source-line"> 1524</div><div class="source-line">&nbsp;1525&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!hrtimer_hres_active(cpu_base))</div><div class="source-line">&nbsp;1526&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires = __hrtimer_get_next_event(cpu_base, HRTIMER_ACTIVE_ALL);</div><div class="source-line"> 1527</div><div class="source-line">&nbsp;1528&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock_irqrestore(&amp;cpu_base-&gt;lock, flags);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L171" data-line-number="171" data-line-id="line_170" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_170')" ondblclick="handleDoubleClick(event, 'line_170')"><span class="line-number" onclick="updateAnchor('L171', event)" title="Click to copy anchor link">171</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">preempt_count_add</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock_irqsave+<span class="hl-addr">0x26</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_170_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock_irqsave+0x25/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L109" target="_blank">__raw_spin_lock_irqsave&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:109</a><div class="source-line">&nbsp;104&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> unsigned long __raw_spin_lock_irqsave(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;105&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;106&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags;</div><div class="source-line"> 107</div><div class="source-line">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_save(flags);</div><div class="source-line current-line">&gt;109&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line">&nbsp;111&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> flags;</div><div class="source-line">&nbsp;113&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 114</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L162" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_lock_irqsave&nbsp;at&nbsp;kernel/locking/spinlock.c:162</a><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 158</div><div class="source-line">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQSAVE</div><div class="source-line">&nbsp;160&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline unsigned long __lockfunc _raw_spin_lock_irqsave(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;161&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;162&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> __raw_spin_lock_irqsave(lock);</div><div class="source-line">&nbsp;163&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;164&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock_irqsave);</div><div class="source-line">&nbsp;165&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 166</div><div class="source-line">&nbsp;167&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L172" data-line-number="172" data-line-id="line_171" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_171')" ondblclick="handleDoubleClick(event, 'line_171')"><span class="line-number" onclick="updateAnchor('L172', event)" title="Click to copy anchor link">172</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.079</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">do_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock_irqsave+<span class="hl-addr">0x4a</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_171_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock_irqsave+0x49/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L111" target="_blank">__raw_spin_lock_irqsave&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:111</a><div class="source-line">&nbsp;106&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags;</div><div class="source-line"> 107</div><div class="source-line">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_save(flags);</div><div class="source-line">&nbsp;109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line current-line">&gt;111&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> flags;</div><div class="source-line">&nbsp;113&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 114</div><div class="source-line">&nbsp;115&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_lock_irq(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L162" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_lock_irqsave&nbsp;at&nbsp;kernel/locking/spinlock.c:162</a><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 158</div><div class="source-line">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQSAVE</div><div class="source-line">&nbsp;160&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline unsigned long __lockfunc _raw_spin_lock_irqsave(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;161&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;162&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> __raw_spin_lock_irqsave(lock);</div><div class="source-line">&nbsp;163&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;164&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock_irqsave);</div><div class="source-line">&nbsp;165&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 166</div><div class="source-line">&nbsp;167&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container " id="L173" data-line-number="173" data-line-id="line_172" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L173', event)" title="Click to copy anchor link">173</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.490</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_lock_irqsave ret=<span class="hl-addr">0x86</span> */</span></span></div><div class="line-container expandable" id="L174" data-line-number="174" data-line-id="line_173" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_173')" ondblclick="handleDoubleClick(event, 'line_173')"><span class="line-number" onclick="updateAnchor('L174', event)" title="Click to copy anchor link">174</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">_raw_spin_unlock_irqrestore</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span>, flags=<span class="hl-addr">0x86</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-hrtimer_get_next_event+<span class="hl-addr">0x53</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_173_content" style="display: none;"><div class="location-link"><strong>hrtimer_get_next_event+0x52/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1528" target="_blank">hrtimer_get_next_event&nbsp;at&nbsp;kernel/time/hrtimer.c:1528</a><div class="source-line">&nbsp;1523&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_irqsave(&amp;cpu_base-&gt;lock, flags);</div><div class="source-line"> 1524</div><div class="source-line">&nbsp;1525&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!hrtimer_hres_active(cpu_base))</div><div class="source-line">&nbsp;1526&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires = __hrtimer_get_next_event(cpu_base, HRTIMER_ACTIVE_ALL);</div><div class="source-line"> 1527</div><div class="source-line current-line">&gt;1528&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock_irqrestore(&amp;cpu_base-&gt;lock, flags);</div><div class="source-line"> 1529</div><div class="source-line">&nbsp;1530&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> expires;</div><div class="source-line">&nbsp;1531&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1532</div><div class="source-line">&nbsp;1533&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L175" data-line-number="175" data-line-id="line_174" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_174')" ondblclick="handleDoubleClick(event, 'line_174')"><span class="line-number" onclick="updateAnchor('L175', event)" title="Click to copy anchor link">175</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">do_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock_irqrestore+<span class="hl-addr">0x27</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_174_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock_irqrestore+0x26/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L150" target="_blank">__raw_spin_unlock_irqrestore&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:150</a><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line current-line">&gt;150&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_restore(flags);</div><div class="source-line">&nbsp;152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 154</div><div class="source-line">&nbsp;155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irq(raw_spinlock_t *lock)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L194" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock_irqrestore&nbsp;at&nbsp;kernel/locking/spinlock.c:194</a><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div class="source-line">&nbsp;192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock_irqrestore(raw_spinlock_t *lock, unsigned long flags)</div><div class="source-line">&nbsp;193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;194&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock_irqrestore(lock, flags);</div><div class="source-line">&nbsp;195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock_irqrestore);</div><div class="source-line">&nbsp;197&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 198</div><div class="source-line">&nbsp;199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L176" data-line-number="176" data-line-id="line_175" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_175')" ondblclick="handleDoubleClick(event, 'line_175')"><span class="line-number" onclick="updateAnchor('L176', event)" title="Click to copy anchor link">176</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">preempt_count_sub</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock_irqrestore+<span class="hl-addr">0x3c</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_175_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock_irqrestore+0x3b/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L152" target="_blank">__raw_spin_unlock_irqrestore&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:152</a><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line">&nbsp;150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_restore(flags);</div><div class="source-line current-line">&gt;152&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 154</div><div class="source-line">&nbsp;155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irq(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;156&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L194" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock_irqrestore&nbsp;at&nbsp;kernel/locking/spinlock.c:194</a><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div class="source-line">&nbsp;192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock_irqrestore(raw_spinlock_t *lock, unsigned long flags)</div><div class="source-line">&nbsp;193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;194&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock_irqrestore(lock, flags);</div><div class="source-line">&nbsp;195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock_irqrestore);</div><div class="source-line">&nbsp;197&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 198</div><div class="source-line">&nbsp;199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container " id="L177" data-line-number="177" data-line-id="line_176" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L177', event)" title="Click to copy anchor link">177</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.395</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_unlock_irqrestore */</span></span></div><div class="line-container " id="L178" data-line-number="178" data-line-id="line_177" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L178', event)" title="Click to copy anchor link">178</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.137</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* hrtimer_get_next_event ret=<span class="hl-addr">0x7fffffffffffffff</span> */</span></span></div><div class="line-container " id="L179" data-line-number="179" data-line-id="line_178" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L179', event)" title="Click to copy anchor link">179</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.296</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* cmp_next_hrtimer_event ret=<span class="hl-addr">0x15e8cc0d00</span> */</span></span></div><div class="line-container " id="L180" data-line-number="180" data-line-id="line_179" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L180', event)" title="Click to copy anchor link">180</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">4.779</span> <span class="hl-unit">us</span>    |          <span class="hl-symbol">}</span> <span class="hl-comment">/* get_next_timer_interrupt ret=<span class="hl-addr">0x15e8cc0d00</span> */</span></span></div><div class="line-container expandable" id="L181" data-line-number="181" data-line-id="line_180" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_180')" ondblclick="handleDoubleClick(event, 'line_180')"><span class="line-number" onclick="updateAnchor('L181', event)" title="Click to copy anchor link">181</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.151</span> <span class="hl-unit">us</span>    |          <span class="hl-func">timekeeping_max_deferment</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-tick_nohz_next_event+<span class="hl-addr">0x6f</span>/<span class="hl-addr">0x160</span> ret=<span class="hl-addr">0xcd42e4dffb</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_180_content" style="display: none;"><div class="location-link"><strong>tick_nohz_next_event+0x6e/0x160:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L951" target="_blank">tick_nohz_next_event&nbsp;at&nbsp;kernel/time/tick-sched.c:951</a><div class="source-line">&nbsp;946&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;947&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If this CPU is the one which had the do_timer() duty last, we limit</div><div class="source-line">&nbsp;948&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the sleep time to the timekeeping <span class="c-string">'max_deferment'</span> value.</div><div class="source-line">&nbsp;949&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Otherwise we can sleep as long as we want.</div><div class="source-line">&nbsp;950&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;951&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta = timekeeping_max_deferment();</div><div class="source-line">&nbsp;952&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_cpu = READ_ONCE(tick_do_timer_cpu);</div><div class="source-line">&nbsp;953&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (tick_cpu != cpu &amp;&amp;</div><div class="source-line">&nbsp;954&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(tick_cpu != TICK_DO_TIMER_NONE || !tick_sched_flag_test(ts, TS_FLAG_DO_TIMER_LAST)))</div><div class="source-line">&nbsp;955&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta = KTIME_MAX;</div><div class="source-line"> 956</div><div style="height: 10px;"></div></div><div class="line-container " id="L182" data-line-number="182" data-line-id="line_181" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L182', event)" title="Click to copy anchor link">182</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">5.719</span> <span class="hl-unit">us</span>    |        <span class="hl-symbol">}</span> <span class="hl-comment">/* tick_nohz_next_event ret=94100000000 */</span></span></div><div class="line-container expandable" id="L183" data-line-number="183" data-line-id="line_182" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_182')" ondblclick="handleDoubleClick(event, 'line_182')"><span class="line-number" onclick="updateAnchor('L183', event)" title="Click to copy anchor link">183</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |        <span class="hl-func">tick_nohz_stop_tick</span><span class="hl-symbol">(</span>ts=<span class="hl-addr">0xffff88807dd9c880</span>, cpu=3<span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tick_nohz_idle_stop_tick+<span class="hl-addr">0x58</span>/<span class="hl-addr">0xd0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_182_content" style="display: none;"><div class="location-link"><strong>tick_nohz_idle_stop_tick+0x57/0xd0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L1226" target="_blank">tick_nohz_idle_stop_tick&nbsp;at&nbsp;kernel/time/tick-sched.c:1226</a><div class="source-line">&nbsp;1221&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;idle_calls++;</div><div class="source-line"> 1222</div><div class="source-line">&nbsp;1223&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (expires &gt; 0LL) {</div><div class="source-line">&nbsp;1224&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> was_stopped = tick_sched_flag_test(ts, TS_FLAG_STOPPED);</div><div class="source-line"> 1225</div><div class="source-line current-line">&gt;1226&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_nohz_stop_tick(ts, cpu);</div><div class="source-line"> 1227</div><div class="source-line">&nbsp;1228&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;idle_sleeps++;</div><div class="source-line">&nbsp;1229&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;idle_expires = expires;</div><div class="source-line"> 1230</div><div class="source-line">&nbsp;1231&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!was_stopped &amp;&amp; tick_sched_flag_test(ts, TS_FLAG_STOPPED)) {</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L184" data-line-number="184" data-line-id="line_183" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_183')" ondblclick="handleDoubleClick(event, 'line_183')"><span class="line-number" onclick="updateAnchor('L184', event)" title="Click to copy anchor link">184</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |          <span class="hl-func">timer_base_try_to_set_idle</span><span class="hl-symbol">(</span>basej=<span class="hl-addr">0xffffaf79</span>, basem=<span class="hl-addr">0x15deaa0e80</span>, idle=<span class="hl-addr">0xffffc900000d7e77</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tick_nohz_stop_tick+<span class="hl-addr">0x61</span>/<span class="hl-addr">0x310</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_183_content" style="display: none;"><div class="location-link"><strong>tick_nohz_stop_tick+0x60/0x310:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L985" target="_blank">tick_nohz_stop_tick&nbsp;at&nbsp;kernel/time/tick-sched.c:985</a><div class="source-line"> 980</div><div class="source-line">&nbsp;981&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;982&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Now the tick should be stopped definitely - so the timer base needs</div><div class="source-line">&nbsp;983&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* to be marked idle as well to not miss a newly queued timer.</div><div class="source-line">&nbsp;984&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;985&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires = timer_base_try_to_set_idle(basejiff, basemono, &amp;timer_idle);</div><div class="source-line">&nbsp;986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (expires &gt; ts-&gt;timer_expires) {</div><div class="source-line">&nbsp;987&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This path could only happen when the first timer was removed</div><div class="source-line">&nbsp;989&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* between calculating the possible sleep length and now (when</div><div class="source-line">&nbsp;990&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* high resolution mode is not active, timer could also be a</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L185" data-line-number="185" data-line-id="line_184" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_184')" ondblclick="handleDoubleClick(event, 'line_184')"><span class="line-number" onclick="updateAnchor('L185', event)" title="Click to copy anchor link">185</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd98d00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x6b</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_184_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x6a/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2204" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2204</a><div class="source-line">&nbsp;2199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2200</div><div class="source-line">&nbsp;2201&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_local = this_cpu_ptr(&amp;timer_bases[BASE_LOCAL]);</div><div class="source-line">&nbsp;2202&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global = this_cpu_ptr(&amp;timer_bases[BASE_GLOBAL]);</div><div class="source-line"> 2203</div><div class="source-line current-line">&gt;2204&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;base_local-&gt;lock);</div><div class="source-line">&nbsp;2205&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_nested(&amp;base_global-&gt;lock, SINGLE_DEPTH_NESTING);</div><div class="source-line"> 2206</div><div class="source-line">&nbsp;2207&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = fetch_next_timer_interrupt(basej, basem, base_local,</div><div class="source-line">&nbsp;2208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global, &amp;tevt);</div><div class="source-line"> 2209</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L186" data-line-number="186" data-line-id="line_185" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_185')" ondblclick="handleDoubleClick(event, 'line_185')"><span class="line-number" onclick="updateAnchor('L186', event)" title="Click to copy anchor link">186</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |              <span class="hl-func">preempt_count_add</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock+<span class="hl-addr">0x17</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_185_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock+0x16/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L132" target="_blank">__raw_spin_lock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:132</a><div class="source-line">&nbsp;127&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 129</div><div class="source-line">&nbsp;130&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_lock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;131&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;132&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;133&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line">&nbsp;134&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;135&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 136</div><div class="source-line">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* !CONFIG_GENERIC_LOCKBREAK || CONFIG_DEBUG_LOCK_ALLOC */</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L154" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_lock&nbsp;at&nbsp;kernel/locking/spinlock.c:154</a><div class="source-line">&nbsp;149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 150</div><div class="source-line">&nbsp;151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK</div><div class="source-line">&nbsp;152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_lock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;154&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_lock(lock);</div><div class="source-line">&nbsp;155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;156&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock);</div><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 158</div><div class="source-line">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQSAVE</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L187" data-line-number="187" data-line-id="line_186" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_186')" ondblclick="handleDoubleClick(event, 'line_186')"><span class="line-number" onclick="updateAnchor('L187', event)" title="Click to copy anchor link">187</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.157</span> <span class="hl-unit">us</span>    |              <span class="hl-func">do_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd98d00</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x6b</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_186_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x6a/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2204" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2204</a><div class="source-line">&nbsp;2199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2200</div><div class="source-line">&nbsp;2201&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_local = this_cpu_ptr(&amp;timer_bases[BASE_LOCAL]);</div><div class="source-line">&nbsp;2202&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global = this_cpu_ptr(&amp;timer_bases[BASE_GLOBAL]);</div><div class="source-line"> 2203</div><div class="source-line current-line">&gt;2204&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;base_local-&gt;lock);</div><div class="source-line">&nbsp;2205&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_nested(&amp;base_global-&gt;lock, SINGLE_DEPTH_NESTING);</div><div class="source-line"> 2206</div><div class="source-line">&nbsp;2207&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = fetch_next_timer_interrupt(basej, basem, base_local,</div><div class="source-line">&nbsp;2208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global, &amp;tevt);</div><div class="source-line"> 2209</div><div style="height: 10px;"></div></div><div class="line-container " id="L188" data-line-number="188" data-line-id="line_187" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L188', event)" title="Click to copy anchor link">188</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.516</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_lock */</span></span></div><div class="line-container expandable" id="L189" data-line-number="189" data-line-id="line_188" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_188')" ondblclick="handleDoubleClick(event, 'line_188')"><span class="line-number" onclick="updateAnchor('L189', event)" title="Click to copy anchor link">189</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">_raw_spin_lock_nested</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd99dc0</span>, subclass=1<span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x78</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_188_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x77/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2205" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2205</a><div class="source-line"> 2200</div><div class="source-line">&nbsp;2201&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_local = this_cpu_ptr(&amp;timer_bases[BASE_LOCAL]);</div><div class="source-line">&nbsp;2202&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global = this_cpu_ptr(&amp;timer_bases[BASE_GLOBAL]);</div><div class="source-line"> 2203</div><div class="source-line">&nbsp;2204&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;base_local-&gt;lock);</div><div class="source-line current-line">&gt;2205&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_nested(&amp;base_global-&gt;lock, SINGLE_DEPTH_NESTING);</div><div class="source-line"> 2206</div><div class="source-line">&nbsp;2207&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = fetch_next_timer_interrupt(basej, basem, base_local,</div><div class="source-line">&nbsp;2208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global, &amp;tevt);</div><div class="source-line"> 2209</div><div class="source-line">&nbsp;2210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L190" data-line-number="190" data-line-id="line_189" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_189')" ondblclick="handleDoubleClick(event, 'line_189')"><span class="line-number" onclick="updateAnchor('L190', event)" title="Click to copy anchor link">190</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.078</span> <span class="hl-unit">us</span>    |              <span class="hl-func">preempt_count_add</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock_nested+<span class="hl-addr">0x1c</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_189_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock_nested+0x1b/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L377" target="_blank">_raw_spin_lock_nested&nbsp;at&nbsp;kernel/locking/spinlock.c:377</a><div class="source-line"> 372</div><div class="source-line">&nbsp;373&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_DEBUG_LOCK_ALLOC</div><div class="source-line"> 374</div><div class="source-line">&nbsp;375&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">void</span> __lockfunc _raw_spin_lock_nested(raw_spinlock_t *lock, <span class="c-keyword">int</span> subclass)</div><div class="source-line">&nbsp;376&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;377&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;378&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, subclass, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line">&nbsp;379&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;380&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;381&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock_nested);</div><div class="source-line"> 382</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L191" data-line-number="191" data-line-id="line_190" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_190')" ondblclick="handleDoubleClick(event, 'line_190')"><span class="line-number" onclick="updateAnchor('L191', event)" title="Click to copy anchor link">191</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.081</span> <span class="hl-unit">us</span>    |              <span class="hl-func">do_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd99dc0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x78</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_190_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x77/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2205" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2205</a><div class="source-line"> 2200</div><div class="source-line">&nbsp;2201&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_local = this_cpu_ptr(&amp;timer_bases[BASE_LOCAL]);</div><div class="source-line">&nbsp;2202&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global = this_cpu_ptr(&amp;timer_bases[BASE_GLOBAL]);</div><div class="source-line"> 2203</div><div class="source-line">&nbsp;2204&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;base_local-&gt;lock);</div><div class="source-line current-line">&gt;2205&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_nested(&amp;base_global-&gt;lock, SINGLE_DEPTH_NESTING);</div><div class="source-line"> 2206</div><div class="source-line">&nbsp;2207&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = fetch_next_timer_interrupt(basej, basem, base_local,</div><div class="source-line">&nbsp;2208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global, &amp;tevt);</div><div class="source-line"> 2209</div><div class="source-line">&nbsp;2210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div style="height: 10px;"></div></div><div class="line-container " id="L192" data-line-number="192" data-line-id="line_191" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L192', event)" title="Click to copy anchor link">192</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.423</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_lock_nested */</span></span></div><div class="line-container expandable" id="L193" data-line-number="193" data-line-id="line_192" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_192')" ondblclick="handleDoubleClick(event, 'line_192')"><span class="line-number" onclick="updateAnchor('L193', event)" title="Click to copy anchor link">193</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">fetch_next_timer_interrupt</span><span class="hl-symbol">(</span>basej=<span class="hl-addr">0xffffaf79</span>, basem=<span class="hl-addr">0x15deaa0e80</span>, base_local=<span class="hl-addr">0xffff88807dd98d00</span>, base_global=<span class="hl-addr">0xffff88807dd99dc0</span>, tevt=<span class="hl-addr">0xffffc900000d7e20</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x8e</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_192_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x8d/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2207" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2207</a><div class="source-line">&nbsp;2202&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global = this_cpu_ptr(&amp;timer_bases[BASE_GLOBAL]);</div><div class="source-line"> 2203</div><div class="source-line">&nbsp;2204&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;base_local-&gt;lock);</div><div class="source-line">&nbsp;2205&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_nested(&amp;base_global-&gt;lock, SINGLE_DEPTH_NESTING);</div><div class="source-line"> 2206</div><div class="source-line current-line">&gt;2207&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = fetch_next_timer_interrupt(basej, basem, base_local,</div><div class="source-line">&nbsp;2208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_global, &amp;tevt);</div><div class="source-line"> 2209</div><div class="source-line">&nbsp;2210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;2211&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If the next event is only one jiffy ahead there is no need to call</div><div class="source-line">&nbsp;2212&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* timer migration hierarchy related functions. The value <span class="c-keyword">for</span> the next</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L194" data-line-number="194" data-line-id="line_193" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_193')" ondblclick="handleDoubleClick(event, 'line_193')"><span class="line-number" onclick="updateAnchor('L194', event)" title="Click to copy anchor link">194</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.077</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_timer_interrupt</span><span class="hl-symbol">(</span>base=<span class="hl-addr">0xffff88807dd98d00</span>, basej=<span class="hl-addr">0xffffaf79</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-fetch_next_timer_interrupt+<span class="hl-addr">0x29</span>/<span class="hl-addr">0xf0</span> ret=<span class="hl-addr">0xffffaf8a</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_193_content" style="display: none;"><div class="location-link"><strong>fetch_next_timer_interrupt+0x28/0xf0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L1990" target="_blank">fetch_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:1990</a><div class="source-line">&nbsp;1985&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> timer_events *tevt)</div><div class="source-line">&nbsp;1986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;1987&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long nextevt, nextevt_local, nextevt_global;</div><div class="source-line">&nbsp;1988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool local_first;</div><div class="source-line"> 1989</div><div class="source-line current-line">&gt;1990&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt_local = next_timer_interrupt(base_local, basej);</div><div class="source-line">&nbsp;1991&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt_global = next_timer_interrupt(base_global, basej);</div><div class="source-line"> 1992</div><div class="source-line">&nbsp;1993&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_first = time_before_eq(nextevt_local, nextevt_global);</div><div class="source-line"> 1994</div><div class="source-line">&nbsp;1995&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = local_first ? nextevt_local : nextevt_global;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L195" data-line-number="195" data-line-id="line_194" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_194')" ondblclick="handleDoubleClick(event, 'line_194')"><span class="line-number" onclick="updateAnchor('L195', event)" title="Click to copy anchor link">195</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_timer_interrupt</span><span class="hl-symbol">(</span>base=<span class="hl-addr">0xffff88807dd99dc0</span>, basej=<span class="hl-addr">0xffffaf79</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-fetch_next_timer_interrupt+<span class="hl-addr">0x37</span>/<span class="hl-addr">0xf0</span> ret=<span class="hl-addr">0xffffaf80</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_194_content" style="display: none;"><div class="location-link"><strong>fetch_next_timer_interrupt+0x36/0xf0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L1991" target="_blank">fetch_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:1991</a><div class="source-line">&nbsp;1986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;1987&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long nextevt, nextevt_local, nextevt_global;</div><div class="source-line">&nbsp;1988&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool local_first;</div><div class="source-line"> 1989</div><div class="source-line">&nbsp;1990&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt_local = next_timer_interrupt(base_local, basej);</div><div class="source-line current-line">&gt;1991&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt_global = next_timer_interrupt(base_global, basej);</div><div class="source-line"> 1992</div><div class="source-line">&nbsp;1993&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_first = time_before_eq(nextevt_local, nextevt_global);</div><div class="source-line"> 1994</div><div class="source-line">&nbsp;1995&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextevt = local_first ? nextevt_local : nextevt_global;</div><div class="source-line"> 1996</div><div style="height: 10px;"></div></div><div class="line-container " id="L196" data-line-number="196" data-line-id="line_195" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L196', event)" title="Click to copy anchor link">196</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.386</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* fetch_next_timer_interrupt ret=<span class="hl-addr">0xffffaf80</span> */</span></span></div><div class="line-container expandable" id="L197" data-line-number="197" data-line-id="line_196" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_196')" ondblclick="handleDoubleClick(event, 'line_196')"><span class="line-number" onclick="updateAnchor('L197', event)" title="Click to copy anchor link">197</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">timer_use_tmigr</span><span class="hl-symbol">(</span>basej=<span class="hl-addr">0xffffaf79</span>, basem=<span class="hl-addr">0x15deaa0e80</span>, nextevt=<span class="hl-addr">0xffffc900000d7e18</span>, tick_stop_path=<span class="hl-addr">0xffffc900000d7e77</span>, timer_base_idle=<span class="hl-addr">0x0</span>, tevt=<span class="hl-addr">0xffffc900000d7e20</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x183</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_196_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x182/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2223" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2223</a><div class="source-line">&nbsp;2218&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* this CPU needs to handle the first timer migration hierarchy</div><div class="source-line">&nbsp;2219&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* event. See timer_use_tmigr() <span class="c-keyword">for</span> detailed information.</div><div class="source-line">&nbsp;2220&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;2221&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idle_is_possible = time_after(nextevt, basej + <span class="c-number">1</span>);</div><div class="source-line">&nbsp;2222&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (idle_is_possible)</div><div class="source-line current-line">&gt;2223&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer_use_tmigr(basej, basem, &amp;nextevt, idle,</div><div class="source-line">&nbsp;2224&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_local-&gt;is_idle, &amp;tevt);</div><div class="source-line"> 2225</div><div class="source-line">&nbsp;2226&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;2227&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* We have a fresh next event. Check whether we can forward the</div><div class="source-line">&nbsp;2228&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* base.</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L198" data-line-number="198" data-line-id="line_197" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_197')" ondblclick="handleDoubleClick(event, 'line_197')"><span class="line-number" onclick="updateAnchor('L198', event)" title="Click to copy anchor link">198</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">tmigr_cpu_deactivate</span><span class="hl-symbol">(</span>nextexp=<span class="hl-addr">0x15e2d62c00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-timer_use_tmigr+<span class="hl-addr">0x2a</span>/<span class="hl-addr">0x80</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_197_content" style="display: none;"><div class="location-link"><strong>timer_use_tmigr+0x29/0x80:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2148" target="_blank">timer_use_tmigr&nbsp;at&nbsp;kernel/time/timer.c:2148</a><div class="source-line">&nbsp;2143&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kernel-type">u64</span> next_tmigr;</div><div class="source-line"> 2144</div><div class="source-line">&nbsp;2145&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (timer_base_idle)</div><div class="source-line">&nbsp;2146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_tmigr = tmigr_cpu_new_timer(tevt-&gt;global);</div><div class="source-line">&nbsp;2147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span> <span class="c-keyword">if</span> (tick_stop_path)</div><div class="source-line current-line">&gt;2148&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_tmigr = tmigr_cpu_deactivate(tevt-&gt;global);</div><div class="source-line">&nbsp;2149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span></div><div class="source-line">&nbsp;2150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_tmigr = tmigr_quick_check(tevt-&gt;global);</div><div class="source-line"> 2151</div><div class="source-line">&nbsp;2152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;2153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If the CPU is the last going idle in timer migration hierarchy, make</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L199" data-line-number="199" data-line-id="line_198" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_198')" ondblclick="handleDoubleClick(event, 'line_198')"><span class="line-number" onclick="updateAnchor('L199', event)" title="Click to copy anchor link">199</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9c9a0</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tmigr_cpu_deactivate+<span class="hl-addr">0x37</span>/<span class="hl-addr">0xe0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_198_content" style="display: none;"><div class="location-link"><strong>tmigr_cpu_deactivate+0x36/0xe0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L1358" target="_blank">tmigr_cpu_deactivate&nbsp;at&nbsp;kernel/time/timer_migration.c:1358</a><div class="source-line">&nbsp;1353&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kernel-type">u64</span> ret;</div><div class="source-line"> 1354</div><div class="source-line">&nbsp;1355&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (tmigr_is_not_available(tmc))</div><div class="source-line">&nbsp;1356&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> nextexp;</div><div class="source-line"> 1357</div><div class="source-line current-line">&gt;1358&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;tmc-&gt;lock);</div><div class="source-line"> 1359</div><div class="source-line">&nbsp;1360&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = __tmigr_cpu_deactivate(tmc, nextexp);</div><div class="source-line"> 1361</div><div class="source-line">&nbsp;1362&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmc-&gt;idle = <span class="kernel-macro">true</span>;</div><div class="source-line"> 1363</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L200" data-line-number="200" data-line-id="line_199" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_199')" ondblclick="handleDoubleClick(event, 'line_199')"><span class="line-number" onclick="updateAnchor('L200', event)" title="Click to copy anchor link">200</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">preempt_count_add</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock+<span class="hl-addr">0x17</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_199_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock+0x16/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L132" target="_blank">__raw_spin_lock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:132</a><div class="source-line">&nbsp;127&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 129</div><div class="source-line">&nbsp;130&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_lock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;131&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;132&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;133&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line">&nbsp;134&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;135&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 136</div><div class="source-line">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* !CONFIG_GENERIC_LOCKBREAK || CONFIG_DEBUG_LOCK_ALLOC */</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L154" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_lock&nbsp;at&nbsp;kernel/locking/spinlock.c:154</a><div class="source-line">&nbsp;149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 150</div><div class="source-line">&nbsp;151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK</div><div class="source-line">&nbsp;152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_lock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;154&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_lock(lock);</div><div class="source-line">&nbsp;155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;156&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock);</div><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 158</div><div class="source-line">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQSAVE</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L201" data-line-number="201" data-line-id="line_200" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_200')" ondblclick="handleDoubleClick(event, 'line_200')"><span class="line-number" onclick="updateAnchor('L201', event)" title="Click to copy anchor link">201</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">do_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9c9a0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-tmigr_cpu_deactivate+<span class="hl-addr">0x37</span>/<span class="hl-addr">0xe0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_200_content" style="display: none;"><div class="location-link"><strong>tmigr_cpu_deactivate+0x36/0xe0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L1358" target="_blank">tmigr_cpu_deactivate&nbsp;at&nbsp;kernel/time/timer_migration.c:1358</a><div class="source-line">&nbsp;1353&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kernel-type">u64</span> ret;</div><div class="source-line"> 1354</div><div class="source-line">&nbsp;1355&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (tmigr_is_not_available(tmc))</div><div class="source-line">&nbsp;1356&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> nextexp;</div><div class="source-line"> 1357</div><div class="source-line current-line">&gt;1358&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;tmc-&gt;lock);</div><div class="source-line"> 1359</div><div class="source-line">&nbsp;1360&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = __tmigr_cpu_deactivate(tmc, nextexp);</div><div class="source-line"> 1361</div><div class="source-line">&nbsp;1362&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmc-&gt;idle = <span class="kernel-macro">true</span>;</div><div class="source-line"> 1363</div><div style="height: 10px;"></div></div><div class="line-container " id="L202" data-line-number="202" data-line-id="line_201" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L202', event)" title="Click to copy anchor link">202</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.466</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_lock */</span></span></div><div class="line-container expandable" id="L203" data-line-number="203" data-line-id="line_202" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_202')" ondblclick="handleDoubleClick(event, 'line_202')"><span class="line-number" onclick="updateAnchor('L203', event)" title="Click to copy anchor link">203</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">__tmigr_cpu_deactivate</span><span class="hl-symbol">(</span>tmc=<span class="hl-addr">0xffff88807dd9c9a0</span>, nextexp=<span class="hl-addr">0x15e2d62c00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tmigr_cpu_deactivate+<span class="hl-addr">0x42</span>/<span class="hl-addr">0xe0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_202_content" style="display: none;"><div class="location-link"><strong>tmigr_cpu_deactivate+0x41/0xe0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L1360" target="_blank">tmigr_cpu_deactivate&nbsp;at&nbsp;kernel/time/timer_migration.c:1360</a><div class="source-line">&nbsp;1355&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (tmigr_is_not_available(tmc))</div><div class="source-line">&nbsp;1356&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> nextexp;</div><div class="source-line"> 1357</div><div class="source-line">&nbsp;1358&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;tmc-&gt;lock);</div><div class="source-line"> 1359</div><div class="source-line current-line">&gt;1360&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = __tmigr_cpu_deactivate(tmc, nextexp);</div><div class="source-line"> 1361</div><div class="source-line">&nbsp;1362&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmc-&gt;idle = <span class="kernel-macro">true</span>;</div><div class="source-line"> 1363</div><div class="source-line">&nbsp;1364&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;1365&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Make sure the reevaluation of timers in idle path will not miss an</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L204" data-line-number="204" data-line-id="line_203" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_203')" ondblclick="handleDoubleClick(event, 'line_203')"><span class="line-number" onclick="updateAnchor('L204', event)" title="Click to copy anchor link">204</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                  <span class="hl-func">walk_groups</span><span class="hl-symbol">(</span>up=<span class="hl-addr">0xffffffff81444740</span>, data=<span class="hl-addr">0xffffc900000d7d88</span>, tmc=<span class="hl-addr">0xffff88807dd9c9a0</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__tmigr_cpu_deactivate+<span class="hl-addr">0x7e</span>/<span class="hl-addr">0xa0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_203_content" style="display: none;"><div class="location-link"><strong>__tmigr_cpu_deactivate+0x7d/0xa0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L1336" target="_blank">__tmigr_cpu_deactivate&nbsp;at&nbsp;kernel/time/timer_migration.c:1336</a><div class="source-line">&nbsp;1331&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* or CPU goes offline.</div><div class="source-line">&nbsp;1332&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1333&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (nextexp != KTIME_MAX)</div><div class="source-line">&nbsp;1334&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmc-&gt;cpuevt.ignore = <span class="kernel-macro">false</span>;</div><div class="source-line"> 1335</div><div class="source-line current-line">&gt;1336&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;walk_groups(&amp;tmigr_inactive_up, &amp;data, tmc);</div><div class="source-line">&nbsp;1337&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> data.firstexp;</div><div class="source-line">&nbsp;1338&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1339</div><div class="source-line">&nbsp;1340&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;1341&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* tmigr_cpu_deactivate() - Put current CPU into inactive state</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L205" data-line-number="205" data-line-id="line_204" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_204')" ondblclick="handleDoubleClick(event, 'line_204')"><span class="line-number" onclick="updateAnchor('L205', event)" title="Click to copy anchor link">205</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                    __walk_groups.isra.0<span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__tmigr_cpu_deactivate+<span class="hl-addr">0x7e</span>/<span class="hl-addr">0xa0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_204_content" style="display: none;"><div class="location-link"><strong>__tmigr_cpu_deactivate+0x7d/0xa0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L1336" target="_blank">__tmigr_cpu_deactivate&nbsp;at&nbsp;kernel/time/timer_migration.c:1336</a><div class="source-line">&nbsp;1331&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* or CPU goes offline.</div><div class="source-line">&nbsp;1332&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1333&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (nextexp != KTIME_MAX)</div><div class="source-line">&nbsp;1334&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmc-&gt;cpuevt.ignore = <span class="kernel-macro">false</span>;</div><div class="source-line"> 1335</div><div class="source-line current-line">&gt;1336&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;walk_groups(&amp;tmigr_inactive_up, &amp;data, tmc);</div><div class="source-line">&nbsp;1337&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> data.firstexp;</div><div class="source-line">&nbsp;1338&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1339</div><div class="source-line">&nbsp;1340&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;1341&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* tmigr_cpu_deactivate() - Put current CPU into inactive state</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L206" data-line-number="206" data-line-id="line_205" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_205')" ondblclick="handleDoubleClick(event, 'line_205')"><span class="line-number" onclick="updateAnchor('L206', event)" title="Click to copy anchor link">206</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                      <span class="hl-func">tmigr_inactive_up</span><span class="hl-symbol">(</span>group=<span class="hl-addr">0xffff888005720a80</span>, child=<span class="hl-addr">0x0</span>, data=<span class="hl-addr">0xffffc900000d7d88</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__walk_groups.isra.0+<span class="hl-addr">0x1f</span>/<span class="hl-addr">0x70</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_205_content" style="display: none;"><div class="location-link"><strong>__walk_groups.isra.0+0x1e/0x70:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L533" target="_blank">__walk_groups&nbsp;at&nbsp;kernel/time/timer_migration.c:533</a><div class="source-line">&nbsp;528&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> tmigr_group *child = <span class="kernel-macro">NULL</span>, *group = tmc-&gt;tmgroup;</div><div class="source-line"> 529</div><div class="source-line">&nbsp;530&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">do</span> {</div><div class="source-line">&nbsp;531&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WARN_ON_ONCE(group-&gt;level &gt;= tmigr_hierarchy_levels);</div><div class="source-line"> 532</div><div class="source-line current-line">&gt;533&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (up(group, child, data))</div><div class="source-line">&nbsp;534&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">break</span>;</div><div class="source-line"> 535</div><div class="source-line">&nbsp;536&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child = group;</div><div class="source-line">&nbsp;537&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;538&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Pairs with the store release on group connection</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L207" data-line-number="207" data-line-id="line_206" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_206')" ondblclick="handleDoubleClick(event, 'line_206')"><span class="line-number" onclick="updateAnchor('L207', event)" title="Click to copy anchor link">207</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                        <span class="hl-func">tmigr_update_events</span><span class="hl-symbol">(</span>group=<span class="hl-addr">0xffff888005720a80</span>, child=<span class="hl-addr">0x0</span>, data=<span class="hl-addr">0xffffc900000d7d88</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tmigr_inactive_up+<span class="hl-addr">0xb3</span>/<span class="hl-addr">0x180</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_206_content" style="display: none;"><div class="location-link"><strong>tmigr_inactive_up+0xb2/0x180:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L1316" target="_blank">tmigr_inactive_up&nbsp;at&nbsp;kernel/time/timer_migration.c:1316</a><div class="source-line">&nbsp;1311&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1312</div><div class="source-line">&nbsp;1313&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data-&gt;remote = <span class="kernel-macro">false</span>;</div><div class="source-line"> 1314</div><div class="source-line">&nbsp;1315&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Event Handling */</div><div class="source-line current-line">&gt;1316&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmigr_update_events(group, child, data);</div><div class="source-line"> 1317</div><div class="source-line">&nbsp;1318&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> walk_done;</div><div class="source-line">&nbsp;1319&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1320</div><div class="source-line">&nbsp;1321&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="kernel-type">u64</span> __tmigr_cpu_deactivate(<span class="c-keyword">struct</span> tmigr_cpu *tmc, <span class="kernel-type">u64</span> nextexp)</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L208" data-line-number="208" data-line-id="line_207" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_207')" ondblclick="handleDoubleClick(event, 'line_207')"><span class="line-number" onclick="updateAnchor('L208', event)" title="Click to copy anchor link">208</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                          <span class="hl-func">_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff888005720a80</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tmigr_update_events+<span class="hl-addr">0x171</span>/<span class="hl-addr">0x2c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_207_content" style="display: none;"><div class="location-link"><strong>tmigr_update_events+0x170/0x2c0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L789" target="_blank">tmigr_update_events&nbsp;at&nbsp;kernel/time/timer_migration.c:789</a><div class="source-line">&nbsp;784&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* also handled properly, so skip this fast <span class="c-keyword">return</span> path.</div><div class="source-line">&nbsp;785&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;786&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (ignore &amp;&amp; !remote &amp;&amp; group-&gt;parent)</div><div class="source-line">&nbsp;787&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line"> 788</div><div class="source-line current-line">&gt;789&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;group-&gt;lock);</div><div class="source-line"> 790</div><div class="source-line">&nbsp;791&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childstate.state = <span class="c-number">0</span>;</div><div class="source-line">&nbsp;792&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupstate.state = atomic_read(&amp;group-&gt;migr_state);</div><div class="source-line">&nbsp;793&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 794</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L209" data-line-number="209" data-line-id="line_208" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_208')" ondblclick="handleDoubleClick(event, 'line_208')"><span class="line-number" onclick="updateAnchor('L209', event)" title="Click to copy anchor link">209</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |                            <span class="hl-func">preempt_count_add</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock+<span class="hl-addr">0x17</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_208_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock+0x16/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L132" target="_blank">__raw_spin_lock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:132</a><div class="source-line">&nbsp;127&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 129</div><div class="source-line">&nbsp;130&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_lock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;131&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;132&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;133&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line">&nbsp;134&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;135&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 136</div><div class="source-line">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* !CONFIG_GENERIC_LOCKBREAK || CONFIG_DEBUG_LOCK_ALLOC */</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L154" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_lock&nbsp;at&nbsp;kernel/locking/spinlock.c:154</a><div class="source-line">&nbsp;149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 150</div><div class="source-line">&nbsp;151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK</div><div class="source-line">&nbsp;152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_lock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;154&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_lock(lock);</div><div class="source-line">&nbsp;155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;156&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock);</div><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 158</div><div class="source-line">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQSAVE</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L210" data-line-number="210" data-line-id="line_209" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_209')" ondblclick="handleDoubleClick(event, 'line_209')"><span class="line-number" onclick="updateAnchor('L210', event)" title="Click to copy anchor link">210</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.081</span> <span class="hl-unit">us</span>    |                            <span class="hl-func">do_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff888005720a80</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-tmigr_update_events+<span class="hl-addr">0x171</span>/<span class="hl-addr">0x2c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_209_content" style="display: none;"><div class="location-link"><strong>tmigr_update_events+0x170/0x2c0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L789" target="_blank">tmigr_update_events&nbsp;at&nbsp;kernel/time/timer_migration.c:789</a><div class="source-line">&nbsp;784&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* also handled properly, so skip this fast <span class="c-keyword">return</span> path.</div><div class="source-line">&nbsp;785&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;786&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (ignore &amp;&amp; !remote &amp;&amp; group-&gt;parent)</div><div class="source-line">&nbsp;787&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="kernel-macro">true</span>;</div><div class="source-line"> 788</div><div class="source-line current-line">&gt;789&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock(&amp;group-&gt;lock);</div><div class="source-line"> 790</div><div class="source-line">&nbsp;791&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childstate.state = <span class="c-number">0</span>;</div><div class="source-line">&nbsp;792&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupstate.state = atomic_read(&amp;group-&gt;migr_state);</div><div class="source-line">&nbsp;793&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 794</div><div style="height: 10px;"></div></div><div class="line-container " id="L211" data-line-number="211" data-line-id="line_210" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L211', event)" title="Click to copy anchor link">211</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.480</span> <span class="hl-unit">us</span>    |                          <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_lock */</span></span></div><div class="line-container expandable" id="L212" data-line-number="212" data-line-id="line_211" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_211')" ondblclick="handleDoubleClick(event, 'line_211')"><span class="line-number" onclick="updateAnchor('L212', event)" title="Click to copy anchor link">212</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                          <span class="hl-func">_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff888005720a80</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tmigr_update_events+<span class="hl-addr">0x12e</span>/<span class="hl-addr">0x2c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_211_content" style="display: none;"><div class="location-link"><strong>tmigr_update_events+0x12d/0x2c0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L861" target="_blank">tmigr_update_events&nbsp;at&nbsp;kernel/time/timer_migration.c:861</a><div class="source-line"> 856</div><div class="source-line">&nbsp;857&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_tmigr_update_events(child, group, childstate, groupstate,</div><div class="source-line">&nbsp;858&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextexp);</div><div class="source-line"> 859</div><div class="source-line">&nbsp;860&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unlock:</div><div class="source-line current-line">&gt;861&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;group-&gt;lock);</div><div class="source-line"> 862</div><div class="source-line">&nbsp;863&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (child)</div><div class="source-line">&nbsp;864&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;child-&gt;lock);</div><div class="source-line"> 865</div><div class="source-line">&nbsp;866&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> walk_done;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L213" data-line-number="213" data-line-id="line_212" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_212')" ondblclick="handleDoubleClick(event, 'line_212')"><span class="line-number" onclick="updateAnchor('L213', event)" title="Click to copy anchor link">213</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.082</span> <span class="hl-unit">us</span>    |                            <span class="hl-func">do_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff888005720a80</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x23</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_212_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x22/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L142" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:142</a><div class="source-line">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* !CONFIG_GENERIC_LOCKBREAK || CONFIG_DEBUG_LOCK_ALLOC */</div><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line current-line">&gt;142&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;143&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L214" data-line-number="214" data-line-id="line_213" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_213')" ondblclick="handleDoubleClick(event, 'line_213')"><span class="line-number" onclick="updateAnchor('L214', event)" title="Click to copy anchor link">214</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.077</span> <span class="hl-unit">us</span>    |                            <span class="hl-func">preempt_count_sub</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x2d</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_213_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x2c/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L143" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:143</a><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line">&nbsp;142&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line current-line">&gt;143&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container " id="L215" data-line-number="215" data-line-id="line_214" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L215', event)" title="Click to copy anchor link">215</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.404</span> <span class="hl-unit">us</span>    |                          <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_unlock */</span></span></div><div class="line-container " id="L216" data-line-number="216" data-line-id="line_215" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L216', event)" title="Click to copy anchor link">216</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.166</span> <span class="hl-unit">us</span>    |                        <span class="hl-symbol">}</span> <span class="hl-comment">/* tmigr_update_events ret=false */</span></span></div><div class="line-container " id="L217" data-line-number="217" data-line-id="line_216" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L217', event)" title="Click to copy anchor link">217</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.362</span> <span class="hl-unit">us</span>    |                      <span class="hl-symbol">}</span> <span class="hl-comment">/* tmigr_inactive_up ret=true */</span></span></div><div class="line-container " id="L218" data-line-number="218" data-line-id="line_217" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L218', event)" title="Click to copy anchor link">218</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.557</span> <span class="hl-unit">us</span>    |                    <span class="hl-symbol">}</span> <span class="hl-comment">/* __walk_groups.isra.0 ret=<span class="hl-addr">0x1</span> */</span></span></div><div class="line-container " id="L219" data-line-number="219" data-line-id="line_218" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L219', event)" title="Click to copy anchor link">219</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.756</span> <span class="hl-unit">us</span>    |                  <span class="hl-symbol">}</span> <span class="hl-comment">/* walk_groups */</span></span></div><div class="line-container " id="L220" data-line-number="220" data-line-id="line_219" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L220', event)" title="Click to copy anchor link">220</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.927</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* __tmigr_cpu_deactivate ret=<span class="hl-addr">0x7fffffffffffffff</span> */</span></span></div><div class="line-container expandable" id="L221" data-line-number="221" data-line-id="line_220" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_220')" ondblclick="handleDoubleClick(event, 'line_220')"><span class="line-number" onclick="updateAnchor('L221', event)" title="Click to copy anchor link">221</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9c9a0</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tmigr_cpu_deactivate+<span class="hl-addr">0x6b</span>/<span class="hl-addr">0xe0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_220_content" style="display: none;"><div class="location-link"><strong>tmigr_cpu_deactivate+0x6a/0xe0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer_migration.c#L1371" target="_blank">tmigr_cpu_deactivate&nbsp;at&nbsp;kernel/time/timer_migration.c:1371</a><div class="source-line">&nbsp;1366&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* event.</div><div class="source-line">&nbsp;1367&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1368&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WRITE_ONCE(tmc-&gt;wakeup, ret);</div><div class="source-line"> 1369</div><div class="source-line">&nbsp;1370&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_tmigr_cpu_idle(tmc, nextexp);</div><div class="source-line current-line">&gt;1371&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;tmc-&gt;lock);</div><div class="source-line">&nbsp;1372&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> ret;</div><div class="source-line">&nbsp;1373&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1374</div><div class="source-line">&nbsp;1375&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;1376&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* tmigr_quick_check() - Quick forecast of next tmigr event when CPU wants to</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L222" data-line-number="222" data-line-id="line_221" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_221')" ondblclick="handleDoubleClick(event, 'line_221')"><span class="line-number" onclick="updateAnchor('L222', event)" title="Click to copy anchor link">222</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.077</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">do_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9c9a0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x23</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_221_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x22/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L142" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:142</a><div class="source-line">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* !CONFIG_GENERIC_LOCKBREAK || CONFIG_DEBUG_LOCK_ALLOC */</div><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line current-line">&gt;142&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;143&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L223" data-line-number="223" data-line-id="line_222" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_222')" ondblclick="handleDoubleClick(event, 'line_222')"><span class="line-number" onclick="updateAnchor('L223', event)" title="Click to copy anchor link">223</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.075</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">preempt_count_sub</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x2d</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_222_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x2c/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L143" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:143</a><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line">&nbsp;142&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line current-line">&gt;143&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container " id="L224" data-line-number="224" data-line-id="line_223" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L224', event)" title="Click to copy anchor link">224</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.396</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_unlock */</span></span></div><div class="line-container " id="L225" data-line-number="225" data-line-id="line_224" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L225', event)" title="Click to copy anchor link">225</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">3.117</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* tmigr_cpu_deactivate ret=<span class="hl-addr">0x7fffffffffffffff</span> */</span></span></div><div class="line-container " id="L226" data-line-number="226" data-line-id="line_225" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L226', event)" title="Click to copy anchor link">226</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">3.288</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* timer_use_tmigr */</span></span></div><div class="line-container expandable" id="L227" data-line-number="227" data-line-id="line_226" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_226')" ondblclick="handleDoubleClick(event, 'line_226')"><span class="line-number" onclick="updateAnchor('L227', event)" title="Click to copy anchor link">227</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd99dc0</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x115</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_226_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x114/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2274" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2274</a><div class="source-line">&nbsp;2269&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;2270&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!base_local-&gt;is_idle &amp;&amp; idle_is_possible)</div><div class="source-line">&nbsp;2271&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmigr_cpu_activate();</div><div class="source-line">&nbsp;2272&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2273</div><div class="source-line current-line">&gt;2274&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_global-&gt;lock);</div><div class="source-line">&nbsp;2275&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_local-&gt;lock);</div><div class="source-line"> 2276</div><div class="source-line">&nbsp;2277&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> cmp_next_hrtimer_event(basem, tevt.local);</div><div class="source-line">&nbsp;2278&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2279</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L228" data-line-number="228" data-line-id="line_227" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_227')" ondblclick="handleDoubleClick(event, 'line_227')"><span class="line-number" onclick="updateAnchor('L228', event)" title="Click to copy anchor link">228</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.079</span> <span class="hl-unit">us</span>    |              <span class="hl-func">do_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd99dc0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x23</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_227_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x22/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L142" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:142</a><div class="source-line">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* !CONFIG_GENERIC_LOCKBREAK || CONFIG_DEBUG_LOCK_ALLOC */</div><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line current-line">&gt;142&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;143&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L229" data-line-number="229" data-line-id="line_228" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_228')" ondblclick="handleDoubleClick(event, 'line_228')"><span class="line-number" onclick="updateAnchor('L229', event)" title="Click to copy anchor link">229</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.075</span> <span class="hl-unit">us</span>    |              <span class="hl-func">preempt_count_sub</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x2d</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_228_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x2c/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L143" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:143</a><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line">&nbsp;142&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line current-line">&gt;143&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container " id="L230" data-line-number="230" data-line-id="line_229" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L230', event)" title="Click to copy anchor link">230</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.388</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_unlock */</span></span></div><div class="line-container expandable" id="L231" data-line-number="231" data-line-id="line_230" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_230')" ondblclick="handleDoubleClick(event, 'line_230')"><span class="line-number" onclick="updateAnchor('L231', event)" title="Click to copy anchor link">231</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd98d00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x11d</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_230_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x11c/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2275" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2275</a><div class="source-line">&nbsp;2270&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!base_local-&gt;is_idle &amp;&amp; idle_is_possible)</div><div class="source-line">&nbsp;2271&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmigr_cpu_activate();</div><div class="source-line">&nbsp;2272&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2273</div><div class="source-line">&nbsp;2274&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_global-&gt;lock);</div><div class="source-line current-line">&gt;2275&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_local-&gt;lock);</div><div class="source-line"> 2276</div><div class="source-line">&nbsp;2277&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> cmp_next_hrtimer_event(basem, tevt.local);</div><div class="source-line">&nbsp;2278&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2279</div><div class="source-line">&nbsp;2280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L232" data-line-number="232" data-line-id="line_231" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_231')" ondblclick="handleDoubleClick(event, 'line_231')"><span class="line-number" onclick="updateAnchor('L232', event)" title="Click to copy anchor link">232</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.172</span> <span class="hl-unit">us</span>    |              <span class="hl-func">do_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd98d00</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x23</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_231_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x22/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L142" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:142</a><div class="source-line">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* !CONFIG_GENERIC_LOCKBREAK || CONFIG_DEBUG_LOCK_ALLOC */</div><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line current-line">&gt;142&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;143&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L233" data-line-number="233" data-line-id="line_232" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_232')" ondblclick="handleDoubleClick(event, 'line_232')"><span class="line-number" onclick="updateAnchor('L233', event)" title="Click to copy anchor link">233</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.073</span> <span class="hl-unit">us</span>    |              <span class="hl-func">preempt_count_sub</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock+<span class="hl-addr">0x2d</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_232_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock+0x2c/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L143" target="_blank">__raw_spin_unlock&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:143</a><div class="source-line"> 138</div><div class="source-line">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line">&nbsp;142&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line current-line">&gt;143&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L186" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock&nbsp;at&nbsp;kernel/locking/spinlock.c:186</a><div class="source-line">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 182</div><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifdef CONFIG_UNINLINE_SPIN_UNLOCK</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;186&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock(lock);</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock);</div><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div style="height: 10px;"></div></div><div class="line-container " id="L234" data-line-number="234" data-line-id="line_233" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L234', event)" title="Click to copy anchor link">234</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.496</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_unlock */</span></span></div><div class="line-container expandable" id="L235" data-line-number="235" data-line-id="line_234" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_234')" ondblclick="handleDoubleClick(event, 'line_234')"><span class="line-number" onclick="updateAnchor('L235', event)" title="Click to copy anchor link">235</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">cmp_next_hrtimer_event</span><span class="hl-symbol">(</span>basem=<span class="hl-addr">0x15deaa0e80</span>, expires=<span class="hl-addr">0x15e8cc0d00</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__get_next_timer_interrupt+<span class="hl-addr">0x12a</span>/<span class="hl-addr">0x250</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_234_content" style="display: none;"><div class="location-link"><strong>__get_next_timer_interrupt+0x129/0x250:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L2277" target="_blank">__get_next_timer_interrupt&nbsp;at&nbsp;kernel/time/timer.c:2277</a><div class="source-line">&nbsp;2272&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2273</div><div class="source-line">&nbsp;2274&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_global-&gt;lock);</div><div class="source-line">&nbsp;2275&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock(&amp;base_local-&gt;lock);</div><div class="source-line"> 2276</div><div class="source-line current-line">&gt;2277&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> cmp_next_hrtimer_event(basem, tevt.local);</div><div class="source-line">&nbsp;2278&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 2279</div><div class="source-line">&nbsp;2280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;2281&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* get_next_timer_interrupt() - <span class="c-keyword">return</span> the time (clock mono) of the next timer</div><div class="source-line">&nbsp;2282&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @basej:	base time jiffies</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L236" data-line-number="236" data-line-id="line_235" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_235')" ondblclick="handleDoubleClick(event, 'line_235')"><span class="line-number" onclick="updateAnchor('L236', event)" title="Click to copy anchor link">236</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">hrtimer_get_next_event</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-cmp_next_hrtimer_event+<span class="hl-addr">0x12</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_235_content" style="display: none;"><div class="location-link"><strong>cmp_next_hrtimer_event+0x11/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/timer.c#L1935" target="_blank">cmp_next_hrtimer_event&nbsp;at&nbsp;kernel/time/timer.c:1935</a><div class="source-line">&nbsp;1930&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Check, <span class="c-keyword">if</span> the next hrtimer event is before the next timer wheel</div><div class="source-line">&nbsp;1931&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* event:</div><div class="source-line">&nbsp;1932&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1933&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="kernel-type">u64</span> cmp_next_hrtimer_event(<span class="kernel-type">u64</span> basem, <span class="kernel-type">u64</span> expires)</div><div class="source-line">&nbsp;1934&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;1935&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kernel-type">u64</span> nextevt = hrtimer_get_next_event();</div><div class="source-line"> 1936</div><div class="source-line">&nbsp;1937&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;1938&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If high resolution timers are enabled</div><div class="source-line">&nbsp;1939&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hrtimer_get_next_event() returns KTIME_MAX.</div><div class="source-line">&nbsp;1940&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L237" data-line-number="237" data-line-id="line_236" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_236')" ondblclick="handleDoubleClick(event, 'line_236')"><span class="line-number" onclick="updateAnchor('L237', event)" title="Click to copy anchor link">237</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">_raw_spin_lock_irqsave</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-hrtimer_get_next_event+<span class="hl-addr">0x2f</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_236_content" style="display: none;"><div class="location-link"><strong>hrtimer_get_next_event+0x2e/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1523" target="_blank">hrtimer_get_next_event&nbsp;at&nbsp;kernel/time/hrtimer.c:1523</a><div class="source-line">&nbsp;1518&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;1519&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> hrtimer_cpu_base *cpu_base = this_cpu_ptr(&amp;hrtimer_bases);</div><div class="source-line">&nbsp;1520&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kernel-type">u64</span> expires = KTIME_MAX;</div><div class="source-line">&nbsp;1521&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags;</div><div class="source-line"> 1522</div><div class="source-line current-line">&gt;1523&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_irqsave(&amp;cpu_base-&gt;lock, flags);</div><div class="source-line"> 1524</div><div class="source-line">&nbsp;1525&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!hrtimer_hres_active(cpu_base))</div><div class="source-line">&nbsp;1526&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires = __hrtimer_get_next_event(cpu_base, HRTIMER_ACTIVE_ALL);</div><div class="source-line"> 1527</div><div class="source-line">&nbsp;1528&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock_irqrestore(&amp;cpu_base-&gt;lock, flags);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L238" data-line-number="238" data-line-id="line_237" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_237')" ondblclick="handleDoubleClick(event, 'line_237')"><span class="line-number" onclick="updateAnchor('L238', event)" title="Click to copy anchor link">238</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.077</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">preempt_count_add</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock_irqsave+<span class="hl-addr">0x26</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_237_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock_irqsave+0x25/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L109" target="_blank">__raw_spin_lock_irqsave&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:109</a><div class="source-line">&nbsp;104&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> unsigned long __raw_spin_lock_irqsave(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;105&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;106&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags;</div><div class="source-line"> 107</div><div class="source-line">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_save(flags);</div><div class="source-line current-line">&gt;109&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line">&nbsp;111&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> flags;</div><div class="source-line">&nbsp;113&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 114</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L162" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_lock_irqsave&nbsp;at&nbsp;kernel/locking/spinlock.c:162</a><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 158</div><div class="source-line">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQSAVE</div><div class="source-line">&nbsp;160&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline unsigned long __lockfunc _raw_spin_lock_irqsave(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;161&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;162&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> __raw_spin_lock_irqsave(lock);</div><div class="source-line">&nbsp;163&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;164&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock_irqsave);</div><div class="source-line">&nbsp;165&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 166</div><div class="source-line">&nbsp;167&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L239" data-line-number="239" data-line-id="line_238" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_238')" ondblclick="handleDoubleClick(event, 'line_238')"><span class="line-number" onclick="updateAnchor('L239', event)" title="Click to copy anchor link">239</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.078</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">do_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock_irqsave+<span class="hl-addr">0x4a</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_238_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock_irqsave+0x49/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L111" target="_blank">__raw_spin_lock_irqsave&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:111</a><div class="source-line">&nbsp;106&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags;</div><div class="source-line"> 107</div><div class="source-line">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_save(flags);</div><div class="source-line">&nbsp;109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line current-line">&gt;111&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> flags;</div><div class="source-line">&nbsp;113&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 114</div><div class="source-line">&nbsp;115&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_lock_irq(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L162" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_lock_irqsave&nbsp;at&nbsp;kernel/locking/spinlock.c:162</a><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 158</div><div class="source-line">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQSAVE</div><div class="source-line">&nbsp;160&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline unsigned long __lockfunc _raw_spin_lock_irqsave(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;161&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;162&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> __raw_spin_lock_irqsave(lock);</div><div class="source-line">&nbsp;163&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;164&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock_irqsave);</div><div class="source-line">&nbsp;165&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 166</div><div class="source-line">&nbsp;167&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container " id="L240" data-line-number="240" data-line-id="line_239" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L240', event)" title="Click to copy anchor link">240</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.421</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_lock_irqsave ret=<span class="hl-addr">0x92</span> */</span></span></div><div class="line-container expandable" id="L241" data-line-number="241" data-line-id="line_240" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_240')" ondblclick="handleDoubleClick(event, 'line_240')"><span class="line-number" onclick="updateAnchor('L241', event)" title="Click to copy anchor link">241</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">_raw_spin_unlock_irqrestore</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span>, flags=<span class="hl-addr">0x92</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-hrtimer_get_next_event+<span class="hl-addr">0x53</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_240_content" style="display: none;"><div class="location-link"><strong>hrtimer_get_next_event+0x52/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1528" target="_blank">hrtimer_get_next_event&nbsp;at&nbsp;kernel/time/hrtimer.c:1528</a><div class="source-line">&nbsp;1523&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_irqsave(&amp;cpu_base-&gt;lock, flags);</div><div class="source-line"> 1524</div><div class="source-line">&nbsp;1525&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!hrtimer_hres_active(cpu_base))</div><div class="source-line">&nbsp;1526&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires = __hrtimer_get_next_event(cpu_base, HRTIMER_ACTIVE_ALL);</div><div class="source-line"> 1527</div><div class="source-line current-line">&gt;1528&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock_irqrestore(&amp;cpu_base-&gt;lock, flags);</div><div class="source-line"> 1529</div><div class="source-line">&nbsp;1530&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> expires;</div><div class="source-line">&nbsp;1531&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1532</div><div class="source-line">&nbsp;1533&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L242" data-line-number="242" data-line-id="line_241" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_241')" ondblclick="handleDoubleClick(event, 'line_241')"><span class="line-number" onclick="updateAnchor('L242', event)" title="Click to copy anchor link">242</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">do_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock_irqrestore+<span class="hl-addr">0x27</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_241_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock_irqrestore+0x26/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L150" target="_blank">__raw_spin_unlock_irqrestore&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:150</a><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line current-line">&gt;150&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_restore(flags);</div><div class="source-line">&nbsp;152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 154</div><div class="source-line">&nbsp;155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irq(raw_spinlock_t *lock)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L194" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock_irqrestore&nbsp;at&nbsp;kernel/locking/spinlock.c:194</a><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div class="source-line">&nbsp;192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock_irqrestore(raw_spinlock_t *lock, unsigned long flags)</div><div class="source-line">&nbsp;193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;194&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock_irqrestore(lock, flags);</div><div class="source-line">&nbsp;195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock_irqrestore);</div><div class="source-line">&nbsp;197&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 198</div><div class="source-line">&nbsp;199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L243" data-line-number="243" data-line-id="line_242" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_242')" ondblclick="handleDoubleClick(event, 'line_242')"><span class="line-number" onclick="updateAnchor('L243', event)" title="Click to copy anchor link">243</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |                  <span class="hl-func">preempt_count_sub</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock_irqrestore+<span class="hl-addr">0x3c</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_242_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock_irqrestore+0x3b/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L152" target="_blank">__raw_spin_unlock_irqrestore&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:152</a><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line">&nbsp;150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_restore(flags);</div><div class="source-line current-line">&gt;152&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 154</div><div class="source-line">&nbsp;155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irq(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;156&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L194" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock_irqrestore&nbsp;at&nbsp;kernel/locking/spinlock.c:194</a><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div class="source-line">&nbsp;192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock_irqrestore(raw_spinlock_t *lock, unsigned long flags)</div><div class="source-line">&nbsp;193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;194&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock_irqrestore(lock, flags);</div><div class="source-line">&nbsp;195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock_irqrestore);</div><div class="source-line">&nbsp;197&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 198</div><div class="source-line">&nbsp;199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container " id="L244" data-line-number="244" data-line-id="line_243" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L244', event)" title="Click to copy anchor link">244</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.393</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_unlock_irqrestore */</span></span></div><div class="line-container " id="L245" data-line-number="245" data-line-id="line_244" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L245', event)" title="Click to copy anchor link">245</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.041</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* hrtimer_get_next_event ret=<span class="hl-addr">0x7fffffffffffffff</span> */</span></span></div><div class="line-container " id="L246" data-line-number="246" data-line-id="line_245" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L246', event)" title="Click to copy anchor link">246</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.198</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* cmp_next_hrtimer_event ret=<span class="hl-addr">0x15e8cc0d00</span> */</span></span></div><div class="line-container " id="L247" data-line-number="247" data-line-id="line_246" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L247', event)" title="Click to copy anchor link">247</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">7.378</span> <span class="hl-unit">us</span>    |          <span class="hl-symbol">}</span> <span class="hl-comment">/* timer_base_try_to_set_idle ret=<span class="hl-addr">0x15e8cc0d00</span> */</span></span></div><div class="line-container expandable" id="L248" data-line-number="248" data-line-id="line_247" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_247')" ondblclick="handleDoubleClick(event, 'line_247')"><span class="line-number" onclick="updateAnchor('L248', event)" title="Click to copy anchor link">248</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |          <span class="hl-func">calc_load_nohz_start</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tick_nohz_stop_tick+<span class="hl-addr">0x139</span>/<span class="hl-addr">0x310</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_247_content" style="display: none;"><div class="location-link"><strong>tick_nohz_stop_tick+0x138/0x310:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L1041" target="_blank">tick_nohz_stop_tick&nbsp;at&nbsp;kernel/time/tick-sched.c:1041</a><div class="source-line">&nbsp;1036&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* interrupts arrive which <span class="c-keyword">do</span> not cause a reschedule. In the first</div><div class="source-line">&nbsp;1037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* call we save the current tick time, so we can restart the</div><div class="source-line">&nbsp;1038&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* scheduler tick in tick_nohz_restart_sched_tick().</div><div class="source-line">&nbsp;1039&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1040&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!tick_sched_flag_test(ts, TS_FLAG_STOPPED)) {</div><div class="source-line current-line">&gt;1041&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calc_load_nohz_start();</div><div class="source-line">&nbsp;1042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet_vmstat();</div><div class="source-line"> 1043</div><div class="source-line">&nbsp;1044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;last_tick = hrtimer_get_expires(&amp;ts-&gt;sched_timer);</div><div class="source-line">&nbsp;1045&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_sched_flag_set(ts, TS_FLAG_STOPPED);</div><div class="source-line">&nbsp;1046&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_tick_stop(<span class="c-number">1</span>, TICK_DEP_MASK_NONE);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L249" data-line-number="249" data-line-id="line_248" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_248')" ondblclick="handleDoubleClick(event, 'line_248')"><span class="line-number" onclick="updateAnchor('L249', event)" title="Click to copy anchor link">249</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">calc_load_nohz_fold</span><span class="hl-symbol">(</span>rq=<span class="hl-addr">0xffff88807ddad800</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tick_nohz_stop_tick+<span class="hl-addr">0x139</span>/<span class="hl-addr">0x310</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_248_content" style="display: none;"><div class="location-link"><strong>tick_nohz_stop_tick+0x138/0x310:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L1041" target="_blank">tick_nohz_stop_tick&nbsp;at&nbsp;kernel/time/tick-sched.c:1041</a><div class="source-line">&nbsp;1036&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* interrupts arrive which <span class="c-keyword">do</span> not cause a reschedule. In the first</div><div class="source-line">&nbsp;1037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* call we save the current tick time, so we can restart the</div><div class="source-line">&nbsp;1038&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* scheduler tick in tick_nohz_restart_sched_tick().</div><div class="source-line">&nbsp;1039&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1040&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!tick_sched_flag_test(ts, TS_FLAG_STOPPED)) {</div><div class="source-line current-line">&gt;1041&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calc_load_nohz_start();</div><div class="source-line">&nbsp;1042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet_vmstat();</div><div class="source-line"> 1043</div><div class="source-line">&nbsp;1044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;last_tick = hrtimer_get_expires(&amp;ts-&gt;sched_timer);</div><div class="source-line">&nbsp;1045&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_sched_flag_set(ts, TS_FLAG_STOPPED);</div><div class="source-line">&nbsp;1046&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_tick_stop(<span class="c-number">1</span>, TICK_DEP_MASK_NONE);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L250" data-line-number="250" data-line-id="line_249" data-cpu="3" data-pid="1" data-comm="ret=" onclick="handleLineClick(event, 'line_249')" ondblclick="handleDoubleClick(event, 'line_249')"><span class="line-number" onclick="updateAnchor('L250', event)" title="Click to copy anchor link">250</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.078</span> <span class="hl-unit">us</span>    |              <span class="hl-func">calc_load_fold_active</span><span class="hl-symbol">(</span>this_rq=<span class="hl-addr">0xffff88807ddad800</span>, adjust=0<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-calc_load_nohz_fold+<span class="hl-addr">0xc</span>/<span class="hl-addr">0x40</span> ret=-1 */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_249_content" style="display: none;"><div class="location-link"><strong>calc_load_nohz_fold+0xb/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/loadavg.c#L239" target="_blank">calc_load_nohz_fold&nbsp;at&nbsp;kernel/sched/loadavg.c:239</a><div class="source-line"> 234</div><div class="source-line">&nbsp;235&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">void</span> calc_load_nohz_fold(<span class="c-keyword">struct</span> rq *rq)</div><div class="source-line">&nbsp;236&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;237&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long delta;</div><div class="source-line"> 238</div><div class="source-line current-line">&gt;239&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta = calc_load_fold_active(rq, <span class="c-number">0</span>);</div><div class="source-line">&nbsp;240&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (delta) {</div><div class="source-line">&nbsp;241&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> idx = calc_load_write_idx();</div><div class="source-line"> 242</div><div class="source-line">&nbsp;243&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atomic_long_add(delta, &amp;calc_load_nohz[idx]);</div><div class="source-line">&nbsp;244&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container " id="L251" data-line-number="251" data-line-id="line_250" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L251', event)" title="Click to copy anchor link">251</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.302</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* calc_load_nohz_fold */</span></span></div><div class="line-container " id="L252" data-line-number="252" data-line-id="line_251" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L252', event)" title="Click to copy anchor link">252</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.463</span> <span class="hl-unit">us</span>    |          <span class="hl-symbol">}</span> <span class="hl-comment">/* calc_load_nohz_start */</span></span></div><div class="line-container expandable" id="L253" data-line-number="253" data-line-id="line_252" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_252')" ondblclick="handleDoubleClick(event, 'line_252')"><span class="line-number" onclick="updateAnchor('L253', event)" title="Click to copy anchor link">253</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |          <span class="hl-func">quiet_vmstat</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tick_nohz_stop_tick+<span class="hl-addr">0x13e</span>/<span class="hl-addr">0x310</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_252_content" style="display: none;"><div class="location-link"><strong>tick_nohz_stop_tick+0x13d/0x310:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L1042" target="_blank">tick_nohz_stop_tick&nbsp;at&nbsp;kernel/time/tick-sched.c:1042</a><div class="source-line">&nbsp;1037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* call we save the current tick time, so we can restart the</div><div class="source-line">&nbsp;1038&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* scheduler tick in tick_nohz_restart_sched_tick().</div><div class="source-line">&nbsp;1039&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1040&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!tick_sched_flag_test(ts, TS_FLAG_STOPPED)) {</div><div class="source-line">&nbsp;1041&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calc_load_nohz_start();</div><div class="source-line current-line">&gt;1042&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet_vmstat();</div><div class="source-line"> 1043</div><div class="source-line">&nbsp;1044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;last_tick = hrtimer_get_expires(&amp;ts-&gt;sched_timer);</div><div class="source-line">&nbsp;1045&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_sched_flag_set(ts, TS_FLAG_STOPPED);</div><div class="source-line">&nbsp;1046&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_tick_stop(<span class="c-number">1</span>, TICK_DEP_MASK_NONE);</div><div class="source-line">&nbsp;1047&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L254" data-line-number="254" data-line-id="line_253" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_253')" ondblclick="handleDoubleClick(event, 'line_253')"><span class="line-number" onclick="updateAnchor('L254', event)" title="Click to copy anchor link">254</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">need_update</span><span class="hl-symbol">(</span>cpu=3<span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-quiet_vmstat+<span class="hl-addr">0x32</span>/<span class="hl-addr">0x40</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_253_content" style="display: none;"><div class="location-link"><strong>quiet_vmstat+0x31/0x40:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L2096" target="_blank">quiet_vmstat&nbsp;at&nbsp;mm/vmstat.c:2096</a><div class="source-line">&nbsp;2091&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 2092</div><div class="source-line">&nbsp;2093&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!delayed_work_pending(this_cpu_ptr(&amp;vmstat_work)))</div><div class="source-line">&nbsp;2094&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 2095</div><div class="source-line current-line">&gt;2096&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!need_update(smp_processor_id()))</div><div class="source-line">&nbsp;2097&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 2098</div><div class="source-line">&nbsp;2099&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;2100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Just refresh counters and <span class="c-keyword">do</span> not care about the pending delayed</div><div class="source-line">&nbsp;2101&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* vmstat_update. It doesn't fire that often to matter and canceling</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L255" data-line-number="255" data-line-id="line_254" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_254')" ondblclick="handleDoubleClick(event, 'line_254')"><span class="line-number" onclick="updateAnchor('L255', event)" title="Click to copy anchor link">255</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.077</span> <span class="hl-unit">us</span>    |              <span class="hl-func">first_online_pgdat</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-need_update+<span class="hl-addr">0x13</span>/<span class="hl-addr">0xa0</span> ret=<span class="hl-addr">0xffff88807fffb2c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_254_content" style="display: none;"><div class="location-link"><strong>need_update+0x12/0xa0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L2063" target="_blank">need_update&nbsp;at&nbsp;mm/vmstat.c:2063</a><div class="source-line">&nbsp;2058&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> bool need_update(<span class="c-keyword">int</span> cpu)</div><div class="source-line">&nbsp;2059&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;2060&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pg_data_t *last_pgdat = <span class="kernel-macro">NULL</span>;</div><div class="source-line">&nbsp;2061&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> <span class="kernel-type">zone</span> *<span class="kernel-type">zone</span>;</div><div class="source-line"> 2062</div><div class="source-line current-line">&gt;2063&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;2064&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat *pzstats = per_cpu_ptr(<span class="kernel-type">zone</span>-&gt;per_cpu_zonestats, cpu);</div><div class="source-line">&nbsp;2065&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_nodestat *n;</div><div class="source-line"> 2066</div><div class="source-line">&nbsp;2067&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;2068&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The fast way of checking <span class="c-keyword">if</span> there are any vmstat diffs.</div><div style="height: 10px;"></div></div><div class="line-container " id="L256" data-line-number="256" data-line-id="line_255" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L256', event)" title="Click to copy anchor link">256</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.358</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* need_update ret=true */</span></span></div><div class="line-container expandable" id="L257" data-line-number="257" data-line-id="line_256" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_256')" ondblclick="handleDoubleClick(event, 'line_256')"><span class="line-number" onclick="updateAnchor('L257', event)" title="Click to copy anchor link">257</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">refresh_cpu_vm_stats</span><span class="hl-symbol">(</span>do_pagesets=<span class="hl-addr">0x0</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tick_nohz_stop_tick+<span class="hl-addr">0x13e</span>/<span class="hl-addr">0x310</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_256_content" style="display: none;"><div class="location-link"><strong>tick_nohz_stop_tick+0x13d/0x310:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L1042" target="_blank">tick_nohz_stop_tick&nbsp;at&nbsp;kernel/time/tick-sched.c:1042</a><div class="source-line">&nbsp;1037&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* call we save the current tick time, so we can restart the</div><div class="source-line">&nbsp;1038&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* scheduler tick in tick_nohz_restart_sched_tick().</div><div class="source-line">&nbsp;1039&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1040&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!tick_sched_flag_test(ts, TS_FLAG_STOPPED)) {</div><div class="source-line">&nbsp;1041&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calc_load_nohz_start();</div><div class="source-line current-line">&gt;1042&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet_vmstat();</div><div class="source-line"> 1043</div><div class="source-line">&nbsp;1044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts-&gt;last_tick = hrtimer_get_expires(&amp;ts-&gt;sched_timer);</div><div class="source-line">&nbsp;1045&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_sched_flag_set(ts, TS_FLAG_STOPPED);</div><div class="source-line">&nbsp;1046&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace_tick_stop(<span class="c-number">1</span>, TICK_DEP_MASK_NONE);</div><div class="source-line">&nbsp;1047&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L258" data-line-number="258" data-line-id="line_257" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_257')" ondblclick="handleDoubleClick(event, 'line_257')"><span class="line-number" onclick="updateAnchor('L258', event)" title="Click to copy anchor link">258</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |              <span class="hl-func">first_online_pgdat</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0x8e</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0xffff88807fffb2c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_257_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0x8d/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L820" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:820</a><div class="source-line">&nbsp;815&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> i;</div><div class="source-line">&nbsp;816&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_zone_diff[NR_VM_ZONE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;817&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_node_diff[NR_VM_NODE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;818&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> changes = <span class="c-number">0</span>;</div><div class="source-line"> 819</div><div class="source-line current-line">&gt;820&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat <span class="kernel-attr">__percpu</span> *pzstats = <span class="kernel-type">zone</span>-&gt;per_cpu_zonestats;</div><div class="source-line">&nbsp;822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_pages <span class="kernel-attr">__percpu</span> *pcp = <span class="kernel-type">zone</span>-&gt;per_cpu_pageset;</div><div class="source-line"> 823</div><div class="source-line">&nbsp;824&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_ZONE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L259" data-line-number="259" data-line-id="line_258" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_258')" ondblclick="handleDoubleClick(event, 'line_258')"><span class="line-number" onclick="updateAnchor('L259', event)" title="Click to copy anchor link">259</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_zone</span><span class="hl-symbol">(</span>zone=<span class="hl-addr">0xffff88807fffb2c0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0xae</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0xffff88807fffba00</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_258_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0xad/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L820" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:820</a><div class="source-line">&nbsp;815&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> i;</div><div class="source-line">&nbsp;816&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_zone_diff[NR_VM_ZONE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;817&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_node_diff[NR_VM_NODE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;818&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> changes = <span class="c-number">0</span>;</div><div class="source-line"> 819</div><div class="source-line current-line">&gt;820&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat <span class="kernel-attr">__percpu</span> *pzstats = <span class="kernel-type">zone</span>-&gt;per_cpu_zonestats;</div><div class="source-line">&nbsp;822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_pages <span class="kernel-attr">__percpu</span> *pcp = <span class="kernel-type">zone</span>-&gt;per_cpu_pageset;</div><div class="source-line"> 823</div><div class="source-line">&nbsp;824&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_ZONE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L260" data-line-number="260" data-line-id="line_259" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_259')" ondblclick="handleDoubleClick(event, 'line_259')"><span class="line-number" onclick="updateAnchor('L260', event)" title="Click to copy anchor link">260</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.075</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_zone</span><span class="hl-symbol">(</span>zone=<span class="hl-addr">0xffff88807fffba00</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0xae</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0xffff88807fffc140</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_259_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0xad/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L820" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:820</a><div class="source-line">&nbsp;815&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> i;</div><div class="source-line">&nbsp;816&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_zone_diff[NR_VM_ZONE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;817&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_node_diff[NR_VM_NODE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;818&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> changes = <span class="c-number">0</span>;</div><div class="source-line"> 819</div><div class="source-line current-line">&gt;820&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat <span class="kernel-attr">__percpu</span> *pzstats = <span class="kernel-type">zone</span>-&gt;per_cpu_zonestats;</div><div class="source-line">&nbsp;822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_pages <span class="kernel-attr">__percpu</span> *pcp = <span class="kernel-type">zone</span>-&gt;per_cpu_pageset;</div><div class="source-line"> 823</div><div class="source-line">&nbsp;824&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_ZONE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L261" data-line-number="261" data-line-id="line_260" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_260')" ondblclick="handleDoubleClick(event, 'line_260')"><span class="line-number" onclick="updateAnchor('L261', event)" title="Click to copy anchor link">261</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.075</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_zone</span><span class="hl-symbol">(</span>zone=<span class="hl-addr">0xffff88807fffc140</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0xae</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0xffff88807fffc880</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_260_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0xad/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L820" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:820</a><div class="source-line">&nbsp;815&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> i;</div><div class="source-line">&nbsp;816&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_zone_diff[NR_VM_ZONE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;817&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_node_diff[NR_VM_NODE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;818&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> changes = <span class="c-number">0</span>;</div><div class="source-line"> 819</div><div class="source-line current-line">&gt;820&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat <span class="kernel-attr">__percpu</span> *pzstats = <span class="kernel-type">zone</span>-&gt;per_cpu_zonestats;</div><div class="source-line">&nbsp;822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_pages <span class="kernel-attr">__percpu</span> *pcp = <span class="kernel-type">zone</span>-&gt;per_cpu_pageset;</div><div class="source-line"> 823</div><div class="source-line">&nbsp;824&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_ZONE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L262" data-line-number="262" data-line-id="line_261" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_261')" ondblclick="handleDoubleClick(event, 'line_261')"><span class="line-number" onclick="updateAnchor('L262', event)" title="Click to copy anchor link">262</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">next_zone</span><span class="hl-symbol">(</span>zone=<span class="hl-addr">0xffff88807fffc880</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0xae</span>/<span class="hl-addr">0x270</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_261_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0xad/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L820" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:820</a><div class="source-line">&nbsp;815&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> i;</div><div class="source-line">&nbsp;816&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_zone_diff[NR_VM_ZONE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;817&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_node_diff[NR_VM_NODE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;818&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> changes = <span class="c-number">0</span>;</div><div class="source-line"> 819</div><div class="source-line current-line">&gt;820&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat <span class="kernel-attr">__percpu</span> *pzstats = <span class="kernel-type">zone</span>-&gt;per_cpu_zonestats;</div><div class="source-line">&nbsp;822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_pages <span class="kernel-attr">__percpu</span> *pcp = <span class="kernel-type">zone</span>-&gt;per_cpu_pageset;</div><div class="source-line"> 823</div><div class="source-line">&nbsp;824&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_ZONE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L263" data-line-number="263" data-line-id="line_262" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_262')" ondblclick="handleDoubleClick(event, 'line_262')"><span class="line-number" onclick="updateAnchor('L263', event)" title="Click to copy anchor link">263</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.088</span> <span class="hl-unit">us</span>    |                <span class="hl-func">next_online_pgdat</span><span class="hl-symbol">(</span>pgdat=<span class="hl-addr">0xffff88807fffb2c0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0xae</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0xffff88813fff92c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_262_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0xad/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L820" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:820</a><div class="source-line">&nbsp;815&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> i;</div><div class="source-line">&nbsp;816&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_zone_diff[NR_VM_ZONE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;817&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_node_diff[NR_VM_NODE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;818&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> changes = <span class="c-number">0</span>;</div><div class="source-line"> 819</div><div class="source-line current-line">&gt;820&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat <span class="kernel-attr">__percpu</span> *pzstats = <span class="kernel-type">zone</span>-&gt;per_cpu_zonestats;</div><div class="source-line">&nbsp;822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_pages <span class="kernel-attr">__percpu</span> *pcp = <span class="kernel-type">zone</span>-&gt;per_cpu_pageset;</div><div class="source-line"> 823</div><div class="source-line">&nbsp;824&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_ZONE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div style="height: 10px;"></div></div><div class="line-container " id="L264" data-line-number="264" data-line-id="line_263" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L264', event)" title="Click to copy anchor link">264</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.246</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* next_zone ret=<span class="hl-addr">0xffff88813fff92c0</span> */</span></span></div><div class="line-container expandable" id="L265" data-line-number="265" data-line-id="line_264" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_264')" ondblclick="handleDoubleClick(event, 'line_264')"><span class="line-number" onclick="updateAnchor('L265', event)" title="Click to copy anchor link">265</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.083</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_zone</span><span class="hl-symbol">(</span>zone=<span class="hl-addr">0xffff88813fff92c0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0xae</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0xffff88813fff9a00</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_264_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0xad/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L820" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:820</a><div class="source-line">&nbsp;815&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> i;</div><div class="source-line">&nbsp;816&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_zone_diff[NR_VM_ZONE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;817&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_node_diff[NR_VM_NODE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;818&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> changes = <span class="c-number">0</span>;</div><div class="source-line"> 819</div><div class="source-line current-line">&gt;820&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat <span class="kernel-attr">__percpu</span> *pzstats = <span class="kernel-type">zone</span>-&gt;per_cpu_zonestats;</div><div class="source-line">&nbsp;822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_pages <span class="kernel-attr">__percpu</span> *pcp = <span class="kernel-type">zone</span>-&gt;per_cpu_pageset;</div><div class="source-line"> 823</div><div class="source-line">&nbsp;824&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_ZONE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L266" data-line-number="266" data-line-id="line_265" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_265')" ondblclick="handleDoubleClick(event, 'line_265')"><span class="line-number" onclick="updateAnchor('L266', event)" title="Click to copy anchor link">266</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.075</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_zone</span><span class="hl-symbol">(</span>zone=<span class="hl-addr">0xffff88813fff9a00</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0xae</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0xffff88813fffa140</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_265_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0xad/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L820" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:820</a><div class="source-line">&nbsp;815&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> i;</div><div class="source-line">&nbsp;816&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_zone_diff[NR_VM_ZONE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;817&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_node_diff[NR_VM_NODE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;818&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> changes = <span class="c-number">0</span>;</div><div class="source-line"> 819</div><div class="source-line current-line">&gt;820&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat <span class="kernel-attr">__percpu</span> *pzstats = <span class="kernel-type">zone</span>-&gt;per_cpu_zonestats;</div><div class="source-line">&nbsp;822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_pages <span class="kernel-attr">__percpu</span> *pcp = <span class="kernel-type">zone</span>-&gt;per_cpu_pageset;</div><div class="source-line"> 823</div><div class="source-line">&nbsp;824&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_ZONE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L267" data-line-number="267" data-line-id="line_266" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_266')" ondblclick="handleDoubleClick(event, 'line_266')"><span class="line-number" onclick="updateAnchor('L267', event)" title="Click to copy anchor link">267</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.074</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_zone</span><span class="hl-symbol">(</span>zone=<span class="hl-addr">0xffff88813fffa140</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0xae</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0xffff88813fffa880</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_266_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0xad/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L820" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:820</a><div class="source-line">&nbsp;815&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> i;</div><div class="source-line">&nbsp;816&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_zone_diff[NR_VM_ZONE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;817&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_node_diff[NR_VM_NODE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;818&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> changes = <span class="c-number">0</span>;</div><div class="source-line"> 819</div><div class="source-line current-line">&gt;820&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat <span class="kernel-attr">__percpu</span> *pzstats = <span class="kernel-type">zone</span>-&gt;per_cpu_zonestats;</div><div class="source-line">&nbsp;822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_pages <span class="kernel-attr">__percpu</span> *pcp = <span class="kernel-type">zone</span>-&gt;per_cpu_pageset;</div><div class="source-line"> 823</div><div class="source-line">&nbsp;824&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_ZONE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L268" data-line-number="268" data-line-id="line_267" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_267')" ondblclick="handleDoubleClick(event, 'line_267')"><span class="line-number" onclick="updateAnchor('L268', event)" title="Click to copy anchor link">268</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">next_zone</span><span class="hl-symbol">(</span>zone=<span class="hl-addr">0xffff88813fffa880</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0xae</span>/<span class="hl-addr">0x270</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_267_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0xad/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L820" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:820</a><div class="source-line">&nbsp;815&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> i;</div><div class="source-line">&nbsp;816&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_zone_diff[NR_VM_ZONE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;817&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_node_diff[NR_VM_NODE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;818&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> changes = <span class="c-number">0</span>;</div><div class="source-line"> 819</div><div class="source-line current-line">&gt;820&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat <span class="kernel-attr">__percpu</span> *pzstats = <span class="kernel-type">zone</span>-&gt;per_cpu_zonestats;</div><div class="source-line">&nbsp;822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_pages <span class="kernel-attr">__percpu</span> *pcp = <span class="kernel-type">zone</span>-&gt;per_cpu_pageset;</div><div class="source-line"> 823</div><div class="source-line">&nbsp;824&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_ZONE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L269" data-line-number="269" data-line-id="line_268" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_268')" ondblclick="handleDoubleClick(event, 'line_268')"><span class="line-number" onclick="updateAnchor('L269', event)" title="Click to copy anchor link">269</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.100</span> <span class="hl-unit">us</span>    |                <span class="hl-func">next_online_pgdat</span><span class="hl-symbol">(</span>pgdat=<span class="hl-addr">0xffff88813fff92c0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0xae</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0x0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_268_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0xad/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L820" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:820</a><div class="source-line">&nbsp;815&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> i;</div><div class="source-line">&nbsp;816&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_zone_diff[NR_VM_ZONE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;817&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> global_node_diff[NR_VM_NODE_STAT_ITEMS] = { <span class="c-number">0</span>, };</div><div class="source-line">&nbsp;818&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> changes = <span class="c-number">0</span>;</div><div class="source-line"> 819</div><div class="source-line current-line">&gt;820&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_populated_zone(<span class="kernel-type">zone</span>) {</div><div class="source-line">&nbsp;821&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_zonestat <span class="kernel-attr">__percpu</span> *pzstats = <span class="kernel-type">zone</span>-&gt;per_cpu_zonestats;</div><div class="source-line">&nbsp;822&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_pages <span class="kernel-attr">__percpu</span> *pcp = <span class="kernel-type">zone</span>-&gt;per_cpu_pageset;</div><div class="source-line"> 823</div><div class="source-line">&nbsp;824&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_ZONE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;825&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div style="height: 10px;"></div></div><div class="line-container " id="L270" data-line-number="270" data-line-id="line_269" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L270', event)" title="Click to copy anchor link">270</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.253</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* next_zone ret=<span class="hl-addr">0x0</span> */</span></span></div><div class="line-container expandable" id="L271" data-line-number="271" data-line-id="line_270" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_270')" ondblclick="handleDoubleClick(event, 'line_270')"><span class="line-number" onclick="updateAnchor('L271', event)" title="Click to copy anchor link">271</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |              <span class="hl-func">first_online_pgdat</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0x1b1</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0xffff88807fffb2c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_270_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0x1b0/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L876" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:876</a><div class="source-line">&nbsp;871&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;872&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line">&nbsp;873&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;874&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 875</div><div class="source-line current-line">&gt;876&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_online_pgdat(pgdat) {</div><div class="source-line">&nbsp;877&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_nodestat <span class="kernel-attr">__percpu</span> *p = pgdat-&gt;per_cpu_nodestats;</div><div class="source-line"> 878</div><div class="source-line">&nbsp;879&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_NODE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;880&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div class="source-line"> 881</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L272" data-line-number="272" data-line-id="line_271" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_271')" ondblclick="handleDoubleClick(event, 'line_271')"><span class="line-number" onclick="updateAnchor('L272', event)" title="Click to copy anchor link">272</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_online_pgdat</span><span class="hl-symbol">(</span>pgdat=<span class="hl-addr">0xffff88807fffb2c0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0x215</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0xffff88813fff92c0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_271_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0x214/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L876" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:876</a><div class="source-line">&nbsp;871&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;872&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line">&nbsp;873&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;874&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 875</div><div class="source-line current-line">&gt;876&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_online_pgdat(pgdat) {</div><div class="source-line">&nbsp;877&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_nodestat <span class="kernel-attr">__percpu</span> *p = pgdat-&gt;per_cpu_nodestats;</div><div class="source-line"> 878</div><div class="source-line">&nbsp;879&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_NODE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;880&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div class="source-line"> 881</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L273" data-line-number="273" data-line-id="line_272" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_272')" ondblclick="handleDoubleClick(event, 'line_272')"><span class="line-number" onclick="updateAnchor('L273', event)" title="Click to copy anchor link">273</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.157</span> <span class="hl-unit">us</span>    |              <span class="hl-func">next_online_pgdat</span><span class="hl-symbol">(</span>pgdat=<span class="hl-addr">0xffff88813fff92c0</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0x215</span>/<span class="hl-addr">0x270</span> ret=<span class="hl-addr">0x0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_272_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0x214/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L876" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:876</a><div class="source-line">&nbsp;871&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;872&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line">&nbsp;873&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;874&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 875</div><div class="source-line current-line">&gt;876&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_online_pgdat(pgdat) {</div><div class="source-line">&nbsp;877&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> per_cpu_nodestat <span class="kernel-attr">__percpu</span> *p = pgdat-&gt;per_cpu_nodestats;</div><div class="source-line"> 878</div><div class="source-line">&nbsp;879&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; NR_VM_NODE_STAT_ITEMS; i++) {</div><div class="source-line">&nbsp;880&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">int</span> v;</div><div class="source-line"> 881</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L274" data-line-number="274" data-line-id="line_273" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_273')" ondblclick="handleDoubleClick(event, 'line_273')"><span class="line-number" onclick="updateAnchor('L274', event)" title="Click to copy anchor link">274</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.241</span> <span class="hl-unit">us</span>    |              <span class="hl-func">fold_diff</span><span class="hl-symbol">(</span>zone_diff=<span class="hl-addr">0xffffc900000d7d3c</span>, node_diff=<span class="hl-addr">0xffffc900000d7d64</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-refresh_cpu_vm_stats+<span class="hl-addr">0x228</span>/<span class="hl-addr">0x270</span> ret=5 */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_273_content" style="display: none;"><div class="location-link"><strong>refresh_cpu_vm_stats+0x227/0x270:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/mm/vmstat.c#L890" target="_blank">refresh_cpu_vm_stats&nbsp;at&nbsp;mm/vmstat.c:890</a><div class="source-line">&nbsp;885&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global_node_diff[i] += v;</div><div class="source-line">&nbsp;886&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;887&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;888&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 889</div><div class="source-line current-line">&gt;890&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changes += fold_diff(global_zone_diff, global_node_diff);</div><div class="source-line">&nbsp;891&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> changes;</div><div class="source-line">&nbsp;892&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 893</div><div class="source-line">&nbsp;894&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;895&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Fold the data <span class="c-keyword">for</span> an offline cpu into the global array.</div><div style="height: 10px;"></div></div><div class="line-container " id="L275" data-line-number="275" data-line-id="line_274" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L275', event)" title="Click to copy anchor link">275</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">3.234</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* refresh_cpu_vm_stats ret=5 */</span></span></div><div class="line-container " id="L276" data-line-number="276" data-line-id="line_275" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L276', event)" title="Click to copy anchor link">276</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">3.856</span> <span class="hl-unit">us</span>    |          <span class="hl-symbol">}</span> <span class="hl-comment">/* quiet_vmstat */</span></span></div><div class="line-container expandable" id="L277" data-line-number="277" data-line-id="line_276" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_276')" ondblclick="handleDoubleClick(event, 'line_276')"><span class="line-number" onclick="updateAnchor('L277', event)" title="Click to copy anchor link">277</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |          <span class="hl-func">hrtimer_start_range_ns</span><span class="hl-symbol">(</span>timer=<span class="hl-addr">0xffff88807dd9c898</span>, tim=94100000000, delta_ns=<span class="hl-addr">0x0</span>, mode=10<span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-tick_nohz_stop_tick+<span class="hl-addr">0xd7</span>/<span class="hl-addr">0x310</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_276_content" style="display: none;"><div class="location-link"><strong>tick_nohz_stop_tick+0xd6/0x310:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/hrtimer.h#L259" target="_blank">hrtimer_start&nbsp;at&nbsp;include/linux/hrtimer.h:259</a><div class="source-line">&nbsp;254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*		softirq based mode is considered <span class="c-keyword">for</span> debug purpose only!</div><div class="source-line">&nbsp;255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;256&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> hrtimer_start(<span class="c-keyword">struct</span> hrtimer *timer, ktime_t tim,</div><div class="source-line">&nbsp;257&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">const</span> <span class="c-keyword">enum</span> hrtimer_mode mode)</div><div class="source-line">&nbsp;258&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;259&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_start_range_ns(timer, tim, <span class="c-number">0</span>, mode);</div><div class="source-line">&nbsp;260&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 261</div><div class="source-line">&nbsp;262&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">extern</span> <span class="c-keyword">int</span> hrtimer_cancel(<span class="c-keyword">struct</span> hrtimer *timer);</div><div class="source-line">&nbsp;263&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">extern</span> <span class="c-keyword">int</span> hrtimer_try_to_cancel(<span class="c-keyword">struct</span> hrtimer *timer);</div><div class="source-line"> 264</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/tick-sched.c#L1064" target="_blank">(inlined&nbsp;by)&nbsp;tick_nohz_stop_tick&nbsp;at&nbsp;kernel/time/tick-sched.c:1064</a><div class="source-line">&nbsp;1059&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_program_event(KTIME_MAX, <span class="c-number">1</span>);</div><div class="source-line">&nbsp;1060&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line">&nbsp;1061&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1062</div><div class="source-line">&nbsp;1063&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (tick_sched_flag_test(ts, TS_FLAG_HIGHRES)) {</div><div class="source-line current-line">&gt;1064&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_start(&amp;ts-&gt;sched_timer, expires,</div><div class="source-line">&nbsp;1065&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HRTIMER_MODE_ABS_PINNED_HARD);</div><div class="source-line">&nbsp;1066&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="c-keyword">else</span> {</div><div class="source-line">&nbsp;1067&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_set_expires(&amp;ts-&gt;sched_timer, expires);</div><div class="source-line">&nbsp;1068&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_program_event(expires, <span class="c-number">1</span>);</div><div class="source-line">&nbsp;1069&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L278" data-line-number="278" data-line-id="line_277" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_277')" ondblclick="handleDoubleClick(event, 'line_277')"><span class="line-number" onclick="updateAnchor('L278', event)" title="Click to copy anchor link">278</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">lock_hrtimer_base</span><span class="hl-symbol">(</span>timer=<span class="hl-addr">0xffff88807dd9c898</span>, flags=<span class="hl-addr">0xffffc900000d7e38</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-hrtimer_start_range_ns+<span class="hl-addr">0x4d</span>/<span class="hl-addr">0xb0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_277_content" style="display: none;"><div class="location-link"><strong>hrtimer_start_range_ns+0x4c/0xb0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1320" target="_blank">hrtimer_start_range_ns&nbsp;at&nbsp;kernel/time/hrtimer.c:1320</a><div class="source-line">&nbsp;1315&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!IS_ENABLED(CONFIG_PREEMPT_RT))</div><div class="source-line">&nbsp;1316&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WARN_ON_ONCE(!(mode &amp; HRTIMER_MODE_SOFT) ^ !timer-&gt;is_soft);</div><div class="source-line">&nbsp;1317&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span></div><div class="source-line">&nbsp;1318&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WARN_ON_ONCE(!(mode &amp; HRTIMER_MODE_HARD) ^ !timer-&gt;is_hard);</div><div class="source-line"> 1319</div><div class="source-line current-line">&gt;1320&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base = lock_hrtimer_base(timer, &amp;flags);</div><div class="source-line"> 1321</div><div class="source-line">&nbsp;1322&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (__hrtimer_start_range_ns(timer, tim, delta_ns, mode, base))</div><div class="source-line">&nbsp;1323&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_reprogram(timer, <span class="kernel-macro">true</span>);</div><div class="source-line"> 1324</div><div class="source-line">&nbsp;1325&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unlock_hrtimer_base(timer, &amp;flags);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L279" data-line-number="279" data-line-id="line_278" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_278')" ondblclick="handleDoubleClick(event, 'line_278')"><span class="line-number" onclick="updateAnchor('L279', event)" title="Click to copy anchor link">279</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">_raw_spin_lock_irqsave</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-lock_hrtimer_base+<span class="hl-addr">0x25</span>/<span class="hl-addr">0x50</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_278_content" style="display: none;"><div class="location-link"><strong>lock_hrtimer_base+0x24/0x50:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L164" target="_blank">lock_hrtimer_base&nbsp;at&nbsp;kernel/time/hrtimer.c:164</a><div class="source-line">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> hrtimer_clock_base *base;</div><div class="source-line"> 160</div><div class="source-line">&nbsp;161&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">for</span> (;;) {</div><div class="source-line">&nbsp;162&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base = READ_ONCE(timer-&gt;base);</div><div class="source-line">&nbsp;163&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (likely(base != &amp;migration_base)) {</div><div class="source-line current-line">&gt;164&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_lock_irqsave(&amp;base-&gt;cpu_base-&gt;lock, *flags);</div><div class="source-line">&nbsp;165&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (likely(base == timer-&gt;base))</div><div class="source-line">&nbsp;166&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> base;</div><div class="source-line">&nbsp;167&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* The timer has migrated to another CPU: */</div><div class="source-line">&nbsp;168&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock_irqrestore(&amp;base-&gt;cpu_base-&gt;lock, *flags);</div><div class="source-line">&nbsp;169&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L280" data-line-number="280" data-line-id="line_279" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_279')" ondblclick="handleDoubleClick(event, 'line_279')"><span class="line-number" onclick="updateAnchor('L280', event)" title="Click to copy anchor link">280</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.079</span> <span class="hl-unit">us</span>    |                <span class="hl-func">preempt_count_add</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock_irqsave+<span class="hl-addr">0x26</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_279_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock_irqsave+0x25/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L109" target="_blank">__raw_spin_lock_irqsave&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:109</a><div class="source-line">&nbsp;104&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> unsigned long __raw_spin_lock_irqsave(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;105&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;106&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags;</div><div class="source-line"> 107</div><div class="source-line">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_save(flags);</div><div class="source-line current-line">&gt;109&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line">&nbsp;111&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> flags;</div><div class="source-line">&nbsp;113&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 114</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L162" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_lock_irqsave&nbsp;at&nbsp;kernel/locking/spinlock.c:162</a><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 158</div><div class="source-line">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQSAVE</div><div class="source-line">&nbsp;160&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline unsigned long __lockfunc _raw_spin_lock_irqsave(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;161&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;162&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> __raw_spin_lock_irqsave(lock);</div><div class="source-line">&nbsp;163&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;164&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock_irqsave);</div><div class="source-line">&nbsp;165&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 166</div><div class="source-line">&nbsp;167&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L281" data-line-number="281" data-line-id="line_280" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_280')" ondblclick="handleDoubleClick(event, 'line_280')"><span class="line-number" onclick="updateAnchor('L281', event)" title="Click to copy anchor link">281</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.079</span> <span class="hl-unit">us</span>    |                <span class="hl-func">do_raw_spin_lock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_lock_irqsave+<span class="hl-addr">0x4a</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_280_content" style="display: none;"><div class="location-link"><strong>_raw_spin_lock_irqsave+0x49/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L111" target="_blank">__raw_spin_lock_irqsave&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:111</a><div class="source-line">&nbsp;106&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags;</div><div class="source-line"> 107</div><div class="source-line">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_save(flags);</div><div class="source-line">&nbsp;109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_disable();</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_acquire(&amp;lock-&gt;dep_map, <span class="c-number">0</span>, <span class="c-number">0</span>, _RET_IP_);</div><div class="source-line current-line">&gt;111&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK_CONTENDED(lock, do_raw_spin_trylock, do_raw_spin_lock);</div><div class="source-line">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> flags;</div><div class="source-line">&nbsp;113&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 114</div><div class="source-line">&nbsp;115&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_lock_irq(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L162" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_lock_irqsave&nbsp;at&nbsp;kernel/locking/spinlock.c:162</a><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 158</div><div class="source-line">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQSAVE</div><div class="source-line">&nbsp;160&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline unsigned long __lockfunc _raw_spin_lock_irqsave(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;161&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;162&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> __raw_spin_lock_irqsave(lock);</div><div class="source-line">&nbsp;163&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;164&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_lock_irqsave);</div><div class="source-line">&nbsp;165&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 166</div><div class="source-line">&nbsp;167&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_LOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container " id="L282" data-line-number="282" data-line-id="line_281" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L282', event)" title="Click to copy anchor link">282</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.425</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_lock_irqsave ret=<span class="hl-addr">0x82</span> */</span></span></div><div class="line-container " id="L283" data-line-number="283" data-line-id="line_282" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L283', event)" title="Click to copy anchor link">283</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.578</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* lock_hrtimer_base ret=<span class="hl-addr">0xffff88807dd9bfc0</span> */</span></span></div><div class="line-container expandable" id="L284" data-line-number="284" data-line-id="line_283" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_283')" ondblclick="handleDoubleClick(event, 'line_283')"><span class="line-number" onclick="updateAnchor('L284', event)" title="Click to copy anchor link">284</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">__hrtimer_start_range_ns</span><span class="hl-symbol">(</span>timer=<span class="hl-addr">0xffff88807dd9c898</span>, tim=94100000000, delta_ns=<span class="hl-addr">0x0</span>, mode=10, base=<span class="hl-addr">0xffff88807dd9bfc0</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-hrtimer_start_range_ns+<span class="hl-addr">0x61</span>/<span class="hl-addr">0xb0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_283_content" style="display: none;"><div class="location-link"><strong>hrtimer_start_range_ns+0x60/0xb0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1322" target="_blank">hrtimer_start_range_ns&nbsp;at&nbsp;kernel/time/hrtimer.c:1322</a><div class="source-line">&nbsp;1317&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span></div><div class="source-line">&nbsp;1318&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WARN_ON_ONCE(!(mode &amp; HRTIMER_MODE_HARD) ^ !timer-&gt;is_hard);</div><div class="source-line"> 1319</div><div class="source-line">&nbsp;1320&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base = lock_hrtimer_base(timer, &amp;flags);</div><div class="source-line"> 1321</div><div class="source-line current-line">&gt;1322&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (__hrtimer_start_range_ns(timer, tim, delta_ns, mode, base))</div><div class="source-line">&nbsp;1323&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_reprogram(timer, <span class="kernel-macro">true</span>);</div><div class="source-line"> 1324</div><div class="source-line">&nbsp;1325&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unlock_hrtimer_base(timer, &amp;flags);</div><div class="source-line">&nbsp;1326&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;1327&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL_GPL(hrtimer_start_range_ns);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L285" data-line-number="285" data-line-id="line_284" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_284')" ondblclick="handleDoubleClick(event, 'line_284')"><span class="line-number" onclick="updateAnchor('L285', event)" title="Click to copy anchor link">285</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.146</span> <span class="hl-unit">us</span>    |              <span class="hl-func">__remove_hrtimer</span><span class="hl-symbol">(</span>timer=<span class="hl-addr">0xffff88807dd9c898</span>, base=<span class="hl-addr">0xffff88807dd9bfc0</span>, newstate=<span class="hl-addr">0x1</span>, reprogram=0<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__hrtimer_start_range_ns+<span class="hl-addr">0x141</span>/<span class="hl-addr">0x220</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_284_content" style="display: none;"><div class="location-link"><strong>__hrtimer_start_range_ns+0x140/0x220:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1163" target="_blank">remove_hrtimer&nbsp;at&nbsp;kernel/time/hrtimer.c:1163</a><div class="source-line">&nbsp;1158&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!restart)</div><div class="source-line">&nbsp;1159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state = HRTIMER_STATE_INACTIVE;</div><div class="source-line">&nbsp;1160&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">else</span></div><div class="source-line">&nbsp;1161&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reprogram &amp;= !keep_local;</div><div class="source-line"> 1162</div><div class="source-line current-line">&gt;1163&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__remove_hrtimer(timer, base, state, reprogram);</div><div class="source-line">&nbsp;1164&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="c-number">1</span>;</div><div class="source-line">&nbsp;1165&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;1166&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="c-number">0</span>;</div><div class="source-line">&nbsp;1167&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1168</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1246" target="_blank">(inlined&nbsp;by)&nbsp;__hrtimer_start_range_ns&nbsp;at&nbsp;kernel/time/hrtimer.c:1246</a><div class="source-line">&nbsp;1241&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* skip reprogramming, keep the timer local and enforce</div><div class="source-line">&nbsp;1242&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* reprogramming later <span class="c-keyword">if</span> it was the first expiring timer.  This</div><div class="source-line">&nbsp;1243&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* avoids programming the underlying clock event twice (once at</div><div class="source-line">&nbsp;1244&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* removal and once after enqueue).</div><div class="source-line">&nbsp;1245&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;1246&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remove_hrtimer(timer, base, <span class="kernel-macro">true</span>, force_local);</div><div class="source-line"> 1247</div><div class="source-line">&nbsp;1248&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (mode &amp; HRTIMER_MODE_REL)</div><div class="source-line">&nbsp;1249&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tim = ktime_add_safe(tim, __hrtimer_cb_get_time(base-&gt;clockid));</div><div class="source-line"> 1250</div><div class="source-line">&nbsp;1251&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tim = hrtimer_update_lowres(timer, tim, mode);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L286" data-line-number="286" data-line-id="line_285" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_285')" ondblclick="handleDoubleClick(event, 'line_285')"><span class="line-number" onclick="updateAnchor('L286', event)" title="Click to copy anchor link">286</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.077</span> <span class="hl-unit">us</span>    |              <span class="hl-func">ktime_add_safe</span><span class="hl-symbol">(</span>lhs=94100000000, rhs=0<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__hrtimer_start_range_ns+<span class="hl-addr">0x6f</span>/<span class="hl-addr">0x220</span> ret=94100000000 */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_285_content" style="display: none;"><div class="location-link"><strong>__hrtimer_start_range_ns+0x6e/0x220:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/hrtimer.h#L112" target="_blank">hrtimer_set_expires_range_ns&nbsp;at&nbsp;include/linux/hrtimer.h:112</a><div class="source-line">&nbsp;107&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 108</div><div class="source-line">&nbsp;109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> hrtimer_set_expires_range_ns(<span class="c-keyword">struct</span> hrtimer *timer, ktime_t time, <span class="kernel-type">u64</span> delta)</div><div class="source-line">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;111&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer-&gt;_softexpires = time;</div><div class="source-line current-line">&gt;112&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer-&gt;node.expires = ktime_add_safe(time, ns_to_ktime(delta));</div><div class="source-line">&nbsp;113&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 114</div><div class="source-line">&nbsp;115&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> hrtimer_set_expires_tv64(<span class="c-keyword">struct</span> hrtimer *timer, <span class="kernel-type">s64</span> tv64)</div><div class="source-line">&nbsp;116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;117&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer-&gt;node.expires = tv64;</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1253" target="_blank">(inlined&nbsp;by)&nbsp;__hrtimer_start_range_ns&nbsp;at&nbsp;kernel/time/hrtimer.c:1253</a><div class="source-line">&nbsp;1248&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (mode &amp; HRTIMER_MODE_REL)</div><div class="source-line">&nbsp;1249&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tim = ktime_add_safe(tim, __hrtimer_cb_get_time(base-&gt;clockid));</div><div class="source-line"> 1250</div><div class="source-line">&nbsp;1251&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tim = hrtimer_update_lowres(timer, tim, mode);</div><div class="source-line"> 1252</div><div class="source-line current-line">&gt;1253&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_set_expires_range_ns(timer, tim, delta_ns);</div><div class="source-line"> 1254</div><div class="source-line">&nbsp;1255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Switch the timer base, <span class="c-keyword">if</span> necessary: */</div><div class="source-line">&nbsp;1256&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!force_local) {</div><div class="source-line">&nbsp;1257&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_base = switch_hrtimer_base(timer, base,</div><div class="source-line">&nbsp;1258&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode &amp; HRTIMER_MODE_PINNED);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L287" data-line-number="287" data-line-id="line_286" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_286')" ondblclick="handleDoubleClick(event, 'line_286')"><span class="line-number" onclick="updateAnchor('L287', event)" title="Click to copy anchor link">287</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.113</span> <span class="hl-unit">us</span>    |              <span class="hl-func">enqueue_hrtimer</span><span class="hl-symbol">(</span>timer=<span class="hl-addr">0xffff88807dd9c898</span>, base=<span class="hl-addr">0xffff88807dd9bfc0</span>, mode=10<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__hrtimer_start_range_ns+<span class="hl-addr">0x88</span>/<span class="hl-addr">0x220</span> ret=true */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_286_content" style="display: none;"><div class="location-link"><strong>__hrtimer_start_range_ns+0x87/0x220:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1263" target="_blank">__hrtimer_start_range_ns&nbsp;at&nbsp;kernel/time/hrtimer.c:1263</a><div class="source-line">&nbsp;1258&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode &amp; HRTIMER_MODE_PINNED);</div><div class="source-line">&nbsp;1259&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="c-keyword">else</span> {</div><div class="source-line">&nbsp;1260&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_base = base;</div><div class="source-line">&nbsp;1261&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1262</div><div class="source-line current-line">&gt;1263&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first = enqueue_hrtimer(timer, new_base, mode);</div><div class="source-line">&nbsp;1264&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!force_local) {</div><div class="source-line">&nbsp;1265&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;1266&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If the current CPU base is online, then the timer is</div><div class="source-line">&nbsp;1267&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* never queued on a remote CPU <span class="c-keyword">if</span> it would be the first</div><div class="source-line">&nbsp;1268&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* expiring timer there.</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L288" data-line-number="288" data-line-id="line_287" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_287')" ondblclick="handleDoubleClick(event, 'line_287')"><span class="line-number" onclick="updateAnchor('L288', event)" title="Click to copy anchor link">288</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |              <span class="hl-func">hrtimer_force_reprogram</span><span class="hl-symbol">(</span>cpu_base=<span class="hl-addr">0xffff88807dd9bf40</span>, skip_equal=1<span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__hrtimer_start_range_ns+<span class="hl-addr">0x96</span>/<span class="hl-addr">0x220</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_287_content" style="display: none;"><div class="location-link"><strong>__hrtimer_start_range_ns+0x95/0x220:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1291" target="_blank">__hrtimer_start_range_ns&nbsp;at&nbsp;kernel/time/hrtimer.c:1291</a><div class="source-line">&nbsp;1286&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;1287&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Timer was forced to stay on the current CPU to avoid</div><div class="source-line">&nbsp;1288&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* reprogramming on removal and enqueue. Force reprogram the</div><div class="source-line">&nbsp;1289&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hardware by evaluating the new first expiring timer.</div><div class="source-line">&nbsp;1290&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;1291&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_force_reprogram(new_base-&gt;cpu_base, <span class="c-number">1</span>);</div><div class="source-line">&nbsp;1292&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="c-number">0</span>;</div><div class="source-line">&nbsp;1293&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1294</div><div class="source-line">&nbsp;1295&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;1296&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hrtimer_start_range_ns - (re)start an hrtimer</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L289" data-line-number="289" data-line-id="line_288" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_288')" ondblclick="handleDoubleClick(event, 'line_288')"><span class="line-number" onclick="updateAnchor('L289', event)" title="Click to copy anchor link">289</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                <span class="hl-func">hrtimer_update_next_event</span><span class="hl-symbol">(</span>cpu_base=<span class="hl-addr">0xffff88807dd9bf40</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-hrtimer_force_reprogram+<span class="hl-addr">0x11</span>/<span class="hl-addr">0x30</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_288_content" style="display: none;"><div class="location-link"><strong>hrtimer_force_reprogram+0x10/0x30:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L691" target="_blank">hrtimer_force_reprogram&nbsp;at&nbsp;kernel/time/hrtimer.c:691</a><div class="source-line">&nbsp;686&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">void</span></div><div class="source-line">&nbsp;687&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_force_reprogram(<span class="c-keyword">struct</span> hrtimer_cpu_base *cpu_base, <span class="c-keyword">int</span> skip_equal)</div><div class="source-line">&nbsp;688&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;689&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ktime_t expires_next;</div><div class="source-line"> 690</div><div class="source-line current-line">&gt;691&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires_next = hrtimer_update_next_event(cpu_base);</div><div class="source-line"> 692</div><div class="source-line">&nbsp;693&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (skip_equal &amp;&amp; expires_next == cpu_base-&gt;expires_next)</div><div class="source-line">&nbsp;694&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line"> 695</div><div class="source-line">&nbsp;696&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__hrtimer_reprogram(cpu_base, cpu_base-&gt;next_timer, expires_next);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L290" data-line-number="290" data-line-id="line_289" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_289')" ondblclick="handleDoubleClick(event, 'line_289')"><span class="line-number" onclick="updateAnchor('L290', event)" title="Click to copy anchor link">290</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                  <span class="hl-func">__hrtimer_get_next_event</span><span class="hl-symbol">(</span>cpu_base=<span class="hl-addr">0xffff88807dd9bf40</span>, active_mask=<span class="hl-addr">0xf0</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-hrtimer_update_next_event+<span class="hl-addr">0x28</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_289_content" style="display: none;"><div class="location-link"><strong>hrtimer_update_next_event+0x27/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L606" target="_blank">hrtimer_update_next_event&nbsp;at&nbsp;kernel/time/hrtimer.c:606</a><div class="source-line">&nbsp;601&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If the soft interrupt has already been activated, ignore the</div><div class="source-line">&nbsp;602&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* soft bases. They will be handled in the already raised soft</div><div class="source-line">&nbsp;603&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* interrupt.</div><div class="source-line">&nbsp;604&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;605&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!cpu_base-&gt;softirq_activated) {</div><div class="source-line current-line">&gt;606&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;soft = __hrtimer_get_next_event(cpu_base, HRTIMER_ACTIVE_SOFT);</div><div class="source-line">&nbsp;607&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;608&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Update the soft expiry time. clock_settime() might have</div><div class="source-line">&nbsp;609&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* affected it.</div><div class="source-line">&nbsp;610&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;611&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpu_base-&gt;softirq_expires_next = soft;</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L291" data-line-number="291" data-line-id="line_290" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_290')" ondblclick="handleDoubleClick(event, 'line_290')"><span class="line-number" onclick="updateAnchor('L291', event)" title="Click to copy anchor link">291</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                    <span class="hl-func">__hrtimer_next_event_base</span><span class="hl-symbol">(</span>cpu_base=<span class="hl-addr">0xffff88807dd9bf40</span>, exclude=<span class="hl-addr">0x0</span>, active=<span class="hl-addr">0x0</span>, expires_next=9223372036854775807<span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__hrtimer_get_next_event+<span class="hl-addr">0x6c</span>/<span class="hl-addr">0x80</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_290_content" style="display: none;"><div class="location-link"><strong>__hrtimer_get_next_event+0x6b/0x80:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L580" target="_blank">__hrtimer_get_next_event&nbsp;at&nbsp;kernel/time/hrtimer.c:580</a><div class="source-line">&nbsp;575&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ktime_t expires_next = KTIME_MAX;</div><div class="source-line"> 576</div><div class="source-line">&nbsp;577&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (!cpu_base-&gt;softirq_activated &amp;&amp; (active_mask &amp; HRTIMER_ACTIVE_SOFT)) {</div><div class="source-line">&nbsp;578&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;active = cpu_base-&gt;active_bases &amp; HRTIMER_ACTIVE_SOFT;</div><div class="source-line">&nbsp;579&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpu_base-&gt;softirq_next_timer = <span class="kernel-macro">NULL</span>;</div><div class="source-line current-line">&gt;580&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires_next = __hrtimer_next_event_base(cpu_base, <span class="kernel-macro">NULL</span>,</div><div class="source-line">&nbsp;581&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;active, KTIME_MAX);</div><div class="source-line"> 582</div><div class="source-line">&nbsp;583&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_timer = cpu_base-&gt;softirq_next_timer;</div><div class="source-line">&nbsp;584&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 585</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L292" data-line-number="292" data-line-id="line_291" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_291')" ondblclick="handleDoubleClick(event, 'line_291')"><span class="line-number" onclick="updateAnchor('L292', event)" title="Click to copy anchor link">292</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.081</span> <span class="hl-unit">us</span>    |                      <span class="hl-func">__next_base</span><span class="hl-symbol">(</span>cpu_base=<span class="hl-addr">0xffff88807dd9bf40</span>, active=<span class="hl-addr">0xffffc900000d7d7c</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__hrtimer_next_event_base+<span class="hl-addr">0x29</span>/<span class="hl-addr">0x90</span> ret=<span class="hl-addr">0x0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_291_content" style="display: none;"><div class="location-link"><strong>__hrtimer_next_event_base+0x28/0x90:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L512" target="_blank">__hrtimer_next_event_base&nbsp;at&nbsp;kernel/time/hrtimer.c:512</a><div class="source-line">&nbsp;507&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ktime_t expires_next)</div><div class="source-line">&nbsp;508&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;509&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> hrtimer_clock_base *base;</div><div class="source-line">&nbsp;510&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ktime_t expires;</div><div class="source-line"> 511</div><div class="source-line current-line">&gt;512&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_active_base(base, cpu_base, active) {</div><div class="source-line">&nbsp;513&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> timerqueue_node *next;</div><div class="source-line">&nbsp;514&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> hrtimer *timer;</div><div class="source-line"> 515</div><div class="source-line">&nbsp;516&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next = timerqueue_getnext(&amp;base-&gt;active);</div><div class="source-line">&nbsp;517&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer = container_of(next, <span class="c-keyword">struct</span> hrtimer, node);</div><div style="height: 10px;"></div></div><div class="line-container " id="L293" data-line-number="293" data-line-id="line_292" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L293', event)" title="Click to copy anchor link">293</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.241</span> <span class="hl-unit">us</span>    |                    <span class="hl-symbol">}</span> <span class="hl-comment">/* __hrtimer_next_event_base ret=9223372036854775807 */</span></span></div><div class="line-container " id="L294" data-line-number="294" data-line-id="line_293" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L294', event)" title="Click to copy anchor link">294</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.412</span> <span class="hl-unit">us</span>    |                  <span class="hl-symbol">}</span> <span class="hl-comment">/* __hrtimer_get_next_event ret=9223372036854775807 */</span></span></div><div class="line-container expandable" id="L295" data-line-number="295" data-line-id="line_294" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_294')" ondblclick="handleDoubleClick(event, 'line_294')"><span class="line-number" onclick="updateAnchor('L295', event)" title="Click to copy anchor link">295</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                  <span class="hl-func">__hrtimer_get_next_event</span><span class="hl-symbol">(</span>cpu_base=<span class="hl-addr">0xffff88807dd9bf40</span>, active_mask=<span class="hl-addr">0xf</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-hrtimer_update_next_event+<span class="hl-addr">0x3c</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_294_content" style="display: none;"><div class="location-link"><strong>hrtimer_update_next_event+0x3b/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L614" target="_blank">hrtimer_update_next_event&nbsp;at&nbsp;kernel/time/hrtimer.c:614</a><div class="source-line">&nbsp;609&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* affected it.</div><div class="source-line">&nbsp;610&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;611&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpu_base-&gt;softirq_expires_next = soft;</div><div class="source-line">&nbsp;612&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 613</div><div class="source-line current-line">&gt;614&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires_next = __hrtimer_get_next_event(cpu_base, HRTIMER_ACTIVE_HARD);</div><div class="source-line">&nbsp;615&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;616&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If a softirq timer is expiring first, update cpu_base-&gt;next_timer</div><div class="source-line">&nbsp;617&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* and program the hardware with the soft expiry time.</div><div class="source-line">&nbsp;618&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;619&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (expires_next &gt; soft) {</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L296" data-line-number="296" data-line-id="line_295" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_295')" ondblclick="handleDoubleClick(event, 'line_295')"><span class="line-number" onclick="updateAnchor('L296', event)" title="Click to copy anchor link">296</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                    <span class="hl-func">__hrtimer_next_event_base</span><span class="hl-symbol">(</span>cpu_base=<span class="hl-addr">0xffff88807dd9bf40</span>, exclude=<span class="hl-addr">0x0</span>, active=<span class="hl-addr">0x3</span>, expires_next=9223372036854775807<span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-hrtimer_update_next_event+<span class="hl-addr">0x3c</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_295_content" style="display: none;"><div class="location-link"><strong>hrtimer_update_next_event+0x3b/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L614" target="_blank">hrtimer_update_next_event&nbsp;at&nbsp;kernel/time/hrtimer.c:614</a><div class="source-line">&nbsp;609&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* affected it.</div><div class="source-line">&nbsp;610&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;611&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpu_base-&gt;softirq_expires_next = soft;</div><div class="source-line">&nbsp;612&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 613</div><div class="source-line current-line">&gt;614&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expires_next = __hrtimer_get_next_event(cpu_base, HRTIMER_ACTIVE_HARD);</div><div class="source-line">&nbsp;615&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;616&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If a softirq timer is expiring first, update cpu_base-&gt;next_timer</div><div class="source-line">&nbsp;617&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* and program the hardware with the soft expiry time.</div><div class="source-line">&nbsp;618&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;619&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (expires_next &gt; soft) {</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L297" data-line-number="297" data-line-id="line_296" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_296')" ondblclick="handleDoubleClick(event, 'line_296')"><span class="line-number" onclick="updateAnchor('L297', event)" title="Click to copy anchor link">297</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |                      <span class="hl-func">__next_base</span><span class="hl-symbol">(</span>cpu_base=<span class="hl-addr">0xffff88807dd9bf40</span>, active=<span class="hl-addr">0xffffc900000d7d94</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__hrtimer_next_event_base+<span class="hl-addr">0x29</span>/<span class="hl-addr">0x90</span> ret=<span class="hl-addr">0xffff88807dd9bfc0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_296_content" style="display: none;"><div class="location-link"><strong>__hrtimer_next_event_base+0x28/0x90:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L512" target="_blank">__hrtimer_next_event_base&nbsp;at&nbsp;kernel/time/hrtimer.c:512</a><div class="source-line">&nbsp;507&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ktime_t expires_next)</div><div class="source-line">&nbsp;508&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;509&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> hrtimer_clock_base *base;</div><div class="source-line">&nbsp;510&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ktime_t expires;</div><div class="source-line"> 511</div><div class="source-line current-line">&gt;512&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_active_base(base, cpu_base, active) {</div><div class="source-line">&nbsp;513&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> timerqueue_node *next;</div><div class="source-line">&nbsp;514&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> hrtimer *timer;</div><div class="source-line"> 515</div><div class="source-line">&nbsp;516&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next = timerqueue_getnext(&amp;base-&gt;active);</div><div class="source-line">&nbsp;517&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer = container_of(next, <span class="c-keyword">struct</span> hrtimer, node);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L298" data-line-number="298" data-line-id="line_297" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_297')" ondblclick="handleDoubleClick(event, 'line_297')"><span class="line-number" onclick="updateAnchor('L298', event)" title="Click to copy anchor link">298</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.076</span> <span class="hl-unit">us</span>    |                      <span class="hl-func">__next_base</span><span class="hl-symbol">(</span>cpu_base=<span class="hl-addr">0xffff88807dd9bf40</span>, active=<span class="hl-addr">0xffffc900000d7d94</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__hrtimer_next_event_base+<span class="hl-addr">0x29</span>/<span class="hl-addr">0x90</span> ret=<span class="hl-addr">0xffff88807dd9c040</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_297_content" style="display: none;"><div class="location-link"><strong>__hrtimer_next_event_base+0x28/0x90:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L512" target="_blank">__hrtimer_next_event_base&nbsp;at&nbsp;kernel/time/hrtimer.c:512</a><div class="source-line">&nbsp;507&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ktime_t expires_next)</div><div class="source-line">&nbsp;508&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;509&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> hrtimer_clock_base *base;</div><div class="source-line">&nbsp;510&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ktime_t expires;</div><div class="source-line"> 511</div><div class="source-line current-line">&gt;512&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_active_base(base, cpu_base, active) {</div><div class="source-line">&nbsp;513&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> timerqueue_node *next;</div><div class="source-line">&nbsp;514&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> hrtimer *timer;</div><div class="source-line"> 515</div><div class="source-line">&nbsp;516&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next = timerqueue_getnext(&amp;base-&gt;active);</div><div class="source-line">&nbsp;517&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer = container_of(next, <span class="c-keyword">struct</span> hrtimer, node);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L299" data-line-number="299" data-line-id="line_298" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_298')" ondblclick="handleDoubleClick(event, 'line_298')"><span class="line-number" onclick="updateAnchor('L299', event)" title="Click to copy anchor link">299</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.080</span> <span class="hl-unit">us</span>    |                      <span class="hl-func">__next_base</span><span class="hl-symbol">(</span>cpu_base=<span class="hl-addr">0xffff88807dd9bf40</span>, active=<span class="hl-addr">0xffffc900000d7d94</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-__hrtimer_next_event_base+<span class="hl-addr">0x29</span>/<span class="hl-addr">0x90</span> ret=<span class="hl-addr">0x0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_298_content" style="display: none;"><div class="location-link"><strong>__hrtimer_next_event_base+0x28/0x90:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L512" target="_blank">__hrtimer_next_event_base&nbsp;at&nbsp;kernel/time/hrtimer.c:512</a><div class="source-line">&nbsp;507&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ktime_t expires_next)</div><div class="source-line">&nbsp;508&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;509&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> hrtimer_clock_base *base;</div><div class="source-line">&nbsp;510&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ktime_t expires;</div><div class="source-line"> 511</div><div class="source-line current-line">&gt;512&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_each_active_base(base, cpu_base, active) {</div><div class="source-line">&nbsp;513&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> timerqueue_node *next;</div><div class="source-line">&nbsp;514&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">struct</span> hrtimer *timer;</div><div class="source-line"> 515</div><div class="source-line">&nbsp;516&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next = timerqueue_getnext(&amp;base-&gt;active);</div><div class="source-line">&nbsp;517&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer = container_of(next, <span class="c-keyword">struct</span> hrtimer, node);</div><div style="height: 10px;"></div></div><div class="line-container " id="L300" data-line-number="300" data-line-id="line_299" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L300', event)" title="Click to copy anchor link">300</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.618</span> <span class="hl-unit">us</span>    |                    <span class="hl-symbol">}</span> <span class="hl-comment">/* __hrtimer_next_event_base ret=94100000000 */</span></span></div><div class="line-container " id="L301" data-line-number="301" data-line-id="line_300" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L301', event)" title="Click to copy anchor link">301</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.781</span> <span class="hl-unit">us</span>    |                  <span class="hl-symbol">}</span> <span class="hl-comment">/* __hrtimer_get_next_event ret=94100000000 */</span></span></div><div class="line-container " id="L302" data-line-number="302" data-line-id="line_301" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L302', event)" title="Click to copy anchor link">302</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.436</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* hrtimer_update_next_event ret=94100000000 */</span></span></div><div class="line-container expandable" id="L303" data-line-number="303" data-line-id="line_302" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_302')" ondblclick="handleDoubleClick(event, 'line_302')"><span class="line-number" onclick="updateAnchor('L303', event)" title="Click to copy anchor link">303</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                __hrtimer_reprogram.constprop.0<span class="hl-symbol">(</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__hrtimer_start_range_ns+<span class="hl-addr">0x96</span>/<span class="hl-addr">0x220</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_302_content" style="display: none;"><div class="location-link"><strong>__hrtimer_start_range_ns+0x95/0x220:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1291" target="_blank">__hrtimer_start_range_ns&nbsp;at&nbsp;kernel/time/hrtimer.c:1291</a><div class="source-line">&nbsp;1286&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;1287&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Timer was forced to stay on the current CPU to avoid</div><div class="source-line">&nbsp;1288&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* reprogramming on removal and enqueue. Force reprogram the</div><div class="source-line">&nbsp;1289&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hardware by evaluating the new first expiring timer.</div><div class="source-line">&nbsp;1290&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;1291&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_force_reprogram(new_base-&gt;cpu_base, <span class="c-number">1</span>);</div><div class="source-line">&nbsp;1292&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="c-number">0</span>;</div><div class="source-line">&nbsp;1293&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1294</div><div class="source-line">&nbsp;1295&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;1296&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hrtimer_start_range_ns - (re)start an hrtimer</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L304" data-line-number="304" data-line-id="line_303" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_303')" ondblclick="handleDoubleClick(event, 'line_303')"><span class="line-number" onclick="updateAnchor('L304', event)" title="Click to copy anchor link">304</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                  <span class="hl-func">tick_program_event</span><span class="hl-symbol">(</span>expires=94100000000, force=1<span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__hrtimer_start_range_ns+<span class="hl-addr">0x96</span>/<span class="hl-addr">0x220</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_303_content" style="display: none;"><div class="location-link"><strong>__hrtimer_start_range_ns+0x95/0x220:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1291" target="_blank">__hrtimer_start_range_ns&nbsp;at&nbsp;kernel/time/hrtimer.c:1291</a><div class="source-line">&nbsp;1286&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;1287&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Timer was forced to stay on the current CPU to avoid</div><div class="source-line">&nbsp;1288&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* reprogramming on removal and enqueue. Force reprogram the</div><div class="source-line">&nbsp;1289&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hardware by evaluating the new first expiring timer.</div><div class="source-line">&nbsp;1290&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;1291&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_force_reprogram(new_base-&gt;cpu_base, <span class="c-number">1</span>);</div><div class="source-line">&nbsp;1292&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="c-number">0</span>;</div><div class="source-line">&nbsp;1293&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1294</div><div class="source-line">&nbsp;1295&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;1296&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hrtimer_start_range_ns - (re)start an hrtimer</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L305" data-line-number="305" data-line-id="line_304" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_304')" ondblclick="handleDoubleClick(event, 'line_304')"><span class="line-number" onclick="updateAnchor('L305', event)" title="Click to copy anchor link">305</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |                    <span class="hl-func">clockevents_program_event</span><span class="hl-symbol">(</span>dev=<span class="hl-addr">0xffff88807dd97a00</span>, expires=94100000000, force=<span class="hl-addr">0x1</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-__hrtimer_start_range_ns+<span class="hl-addr">0x96</span>/<span class="hl-addr">0x220</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_304_content" style="display: none;"><div class="location-link"><strong>__hrtimer_start_range_ns+0x95/0x220:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1291" target="_blank">__hrtimer_start_range_ns&nbsp;at&nbsp;kernel/time/hrtimer.c:1291</a><div class="source-line">&nbsp;1286&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div class="source-line">&nbsp;1287&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Timer was forced to stay on the current CPU to avoid</div><div class="source-line">&nbsp;1288&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* reprogramming on removal and enqueue. Force reprogram the</div><div class="source-line">&nbsp;1289&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hardware by evaluating the new first expiring timer.</div><div class="source-line">&nbsp;1290&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line current-line">&gt;1291&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_force_reprogram(new_base-&gt;cpu_base, <span class="c-number">1</span>);</div><div class="source-line">&nbsp;1292&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> <span class="c-number">0</span>;</div><div class="source-line">&nbsp;1293&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1294</div><div class="source-line">&nbsp;1295&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;1296&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hrtimer_start_range_ns - (re)start an hrtimer</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L306" data-line-number="306" data-line-id="line_305" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_305')" ondblclick="handleDoubleClick(event, 'line_305')"><span class="line-number" onclick="updateAnchor('L306', event)" title="Click to copy anchor link">306</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.172</span> <span class="hl-unit">us</span>    |                      <span class="hl-func">ktime_get</span><span class="hl-symbol">(</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-clockevents_program_event+<span class="hl-addr">0x51</span>/<span class="hl-addr">0xf0</span> ret=93933560950 */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_305_content" style="display: none;"><div class="location-link"><strong>clockevents_program_event+0x50/0xf0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/clockevents.c#L326" target="_blank">clockevents_program_event&nbsp;at&nbsp;kernel/time/clockevents.c:326</a><div class="source-line"> 321</div><div class="source-line">&nbsp;322&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Shortcut <span class="c-keyword">for</span> clockevent devices that can deal with ktime. */</div><div class="source-line">&nbsp;323&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (dev-&gt;features &amp; CLOCK_EVT_FEAT_KTIME)</div><div class="source-line">&nbsp;324&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> dev-&gt;set_next_ktime(expires, dev);</div><div class="source-line"> 325</div><div class="source-line current-line">&gt;326&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta = ktime_to_ns(ktime_sub(expires, ktime_get()));</div><div class="source-line">&nbsp;327&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (delta &lt;= <span class="c-number">0</span>)</div><div class="source-line">&nbsp;328&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> force ? clockevents_program_min_delta(dev) : -ETIME;</div><div class="source-line"> 329</div><div class="source-line">&nbsp;330&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta = min(delta, (int64_t) dev-&gt;max_delta_ns);</div><div class="source-line">&nbsp;331&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta = max(delta, (int64_t) dev-&gt;min_delta_ns);</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L307" data-line-number="307" data-line-id="line_306" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_306')" ondblclick="handleDoubleClick(event, 'line_306')"><span class="line-number" onclick="updateAnchor('L307', event)" title="Click to copy anchor link">307</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.113</span> <span class="hl-unit">us</span>    |                      <span class="hl-func">lapic_next_deadline</span><span class="hl-symbol">(</span>delta=<span class="hl-addr">0x29e7844</span>, evt=<span class="hl-addr">0xffff88807dd97a00</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-clockevents_program_event+<span class="hl-addr">0x8d</span>/<span class="hl-addr">0xf0</span> ret=0 */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_306_content" style="display: none;"><div class="location-link"><strong>clockevents_program_event+0x8c/0xf0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/clockevents.c#L334" target="_blank">clockevents_program_event&nbsp;at&nbsp;kernel/time/clockevents.c:334</a><div class="source-line"> 329</div><div class="source-line">&nbsp;330&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta = min(delta, (int64_t) dev-&gt;max_delta_ns);</div><div class="source-line">&nbsp;331&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta = max(delta, (int64_t) dev-&gt;min_delta_ns);</div><div class="source-line"> 332</div><div class="source-line">&nbsp;333&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clc = ((unsigned long long) delta * dev-&gt;mult) &gt;&gt; dev-&gt;shift;</div><div class="source-line current-line">&gt;334&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rc = dev-&gt;set_next_event((unsigned long) clc, dev);</div><div class="source-line"> 335</div><div class="source-line">&nbsp;336&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span> (rc &amp;&amp; force) ? clockevents_program_min_delta(dev) : rc;</div><div class="source-line">&nbsp;337&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 338</div><div class="source-line">&nbsp;339&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</div><div style="height: 10px;"></div></div><div class="line-container " id="L308" data-line-number="308" data-line-id="line_307" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L308', event)" title="Click to copy anchor link">308</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.617</span> <span class="hl-unit">us</span>    |                    <span class="hl-symbol">}</span> <span class="hl-comment">/* clockevents_program_event ret=0 */</span></span></div><div class="line-container " id="L309" data-line-number="309" data-line-id="line_308" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L309', event)" title="Click to copy anchor link">309</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">1.803</span> <span class="hl-unit">us</span>    |                  <span class="hl-symbol">}</span> <span class="hl-comment">/* tick_program_event ret=0 */</span></span></div><div class="line-container " id="L310" data-line-number="310" data-line-id="line_309" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L310', event)" title="Click to copy anchor link">310</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">2.011</span> <span class="hl-unit">us</span>    |                <span class="hl-symbol">}</span> <span class="hl-comment">/* __hrtimer_reprogram.constprop.0 ret=<span class="hl-addr">0x0</span> */</span></span></div><div class="line-container " id="L311" data-line-number="311" data-line-id="line_310" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L311', event)" title="Click to copy anchor link">311</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">3.681</span> <span class="hl-unit">us</span>    |              <span class="hl-symbol">}</span> <span class="hl-comment">/* hrtimer_force_reprogram */</span></span></div><div class="line-container " id="L312" data-line-number="312" data-line-id="line_311" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L312', event)" title="Click to copy anchor link">312</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">4.447</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* __hrtimer_start_range_ns ret=0 */</span></span></div><div class="line-container expandable" id="L313" data-line-number="313" data-line-id="line_312" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_312')" ondblclick="handleDoubleClick(event, 'line_312')"><span class="line-number" onclick="updateAnchor('L313', event)" title="Click to copy anchor link">313</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>               |            <span class="hl-func">_raw_spin_unlock_irqrestore</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span>, flags=<span class="hl-addr">0x82</span><span class="hl-symbol">)</span> <span class="hl-symbol">{</span> <span class="hl-comment">/* <-hrtimer_start_range_ns+<span class="hl-addr">0x75</span>/<span class="hl-addr">0xb0</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_312_content" style="display: none;"><div class="location-link"><strong>hrtimer_start_range_ns+0x74/0xb0:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1013" target="_blank">unlock_hrtimer_base&nbsp;at&nbsp;kernel/time/hrtimer.c:1013</a><div class="source-line">&nbsp;1008&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div><div class="source-line">&nbsp;1009&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span></div><div class="source-line">&nbsp;1010&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">void</span> unlock_hrtimer_base(<span class="c-keyword">const</span> <span class="c-keyword">struct</span> hrtimer *timer, unsigned long *flags)</div><div class="source-line">&nbsp;1011&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kernel-attr">__releases</span>(&amp;timer-&gt;base-&gt;cpu_base-&gt;lock)</div><div class="source-line">&nbsp;1012&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;1013&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_spin_unlock_irqrestore(&amp;timer-&gt;base-&gt;cpu_base-&gt;lock, *flags);</div><div class="source-line">&nbsp;1014&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 1015</div><div class="source-line">&nbsp;1016&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;1017&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hrtimer_forward() - forward the timer expiry</div><div class="source-line">&nbsp;1018&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @timer:	hrtimer to forward</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/time/hrtimer.c#L1325" target="_blank">(inlined&nbsp;by)&nbsp;hrtimer_start_range_ns&nbsp;at&nbsp;kernel/time/hrtimer.c:1325</a><div class="source-line">&nbsp;1320&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base = lock_hrtimer_base(timer, &amp;flags);</div><div class="source-line"> 1321</div><div class="source-line">&nbsp;1322&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (__hrtimer_start_range_ns(timer, tim, delta_ns, mode, base))</div><div class="source-line">&nbsp;1323&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrtimer_reprogram(timer, <span class="kernel-macro">true</span>);</div><div class="source-line"> 1324</div><div class="source-line current-line">&gt;1325&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unlock_hrtimer_base(timer, &amp;flags);</div><div class="source-line">&nbsp;1326&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;1327&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL_GPL(hrtimer_start_range_ns);</div><div class="source-line"> 1328</div><div class="source-line">&nbsp;1329&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</div><div class="source-line">&nbsp;1330&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* hrtimer_try_to_cancel - try to deactivate a timer</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L314" data-line-number="314" data-line-id="line_313" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_313')" ondblclick="handleDoubleClick(event, 'line_313')"><span class="line-number" onclick="updateAnchor('L314', event)" title="Click to copy anchor link">314</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.082</span> <span class="hl-unit">us</span>    |              <span class="hl-func">do_raw_spin_unlock</span><span class="hl-symbol">(</span>lock=<span class="hl-addr">0xffff88807dd9bf40</span><span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock_irqrestore+<span class="hl-addr">0x27</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_313_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock_irqrestore+0x26/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L150" target="_blank">__raw_spin_unlock_irqrestore&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:150</a><div class="source-line"> 145</div><div class="source-line">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irqrestore(raw_spinlock_t *lock,</div><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line current-line">&gt;150&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_restore(flags);</div><div class="source-line">&nbsp;152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 154</div><div class="source-line">&nbsp;155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irq(raw_spinlock_t *lock)</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L194" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock_irqrestore&nbsp;at&nbsp;kernel/locking/spinlock.c:194</a><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div class="source-line">&nbsp;192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock_irqrestore(raw_spinlock_t *lock, unsigned long flags)</div><div class="source-line">&nbsp;193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;194&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock_irqrestore(lock, flags);</div><div class="source-line">&nbsp;195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock_irqrestore);</div><div class="source-line">&nbsp;197&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 198</div><div class="source-line">&nbsp;199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container expandable" id="L315" data-line-number="315" data-line-id="line_314" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_314')" ondblclick="handleDoubleClick(event, 'line_314')"><span class="line-number" onclick="updateAnchor('L315', event)" title="Click to copy anchor link">315</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.077</span> <span class="hl-unit">us</span>    |              <span class="hl-func">preempt_count_sub</span><span class="hl-symbol">(</span>val=1<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-_raw_spin_unlock_irqrestore+<span class="hl-addr">0x3c</span>/<span class="hl-addr">0x60</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_314_content" style="display: none;"><div class="location-link"><strong>_raw_spin_unlock_irqrestore+0x3b/0x60:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/include/linux/spinlock_api_smp.h#L152" target="_blank">__raw_spin_unlock_irqrestore&nbsp;at&nbsp;include/linux/spinlock_api_smp.h:152</a><div class="source-line">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long flags)</div><div class="source-line">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><div class="source-line">&nbsp;150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_raw_spin_unlock(lock);</div><div class="source-line">&nbsp;151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_restore(flags);</div><div class="source-line current-line">&gt;152&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preempt_enable();</div><div class="source-line">&nbsp;153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 154</div><div class="source-line">&nbsp;155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">static</span> <span class="c-keyword">inline</span> <span class="c-keyword">void</span> __raw_spin_unlock_irq(raw_spinlock_t *lock)</div><div class="source-line">&nbsp;156&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_release(&amp;lock-&gt;dep_map, _RET_IP_);</div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/locking/spinlock.c#L194" target="_blank">(inlined&nbsp;by)&nbsp;_raw_spin_unlock_irqrestore&nbsp;at&nbsp;kernel/locking/spinlock.c:194</a><div class="source-line">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 190</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE</div><div class="source-line">&nbsp;192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noinline <span class="c-keyword">void</span> __lockfunc _raw_spin_unlock_irqrestore(raw_spinlock_t *lock, unsigned long flags)</div><div class="source-line">&nbsp;193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="source-line current-line">&gt;194&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__raw_spin_unlock_irqrestore(lock, flags);</div><div class="source-line">&nbsp;195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line">&nbsp;196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORT_SYMBOL(_raw_spin_unlock_irqrestore);</div><div class="source-line">&nbsp;197&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif</div><div class="source-line"> 198</div><div class="source-line">&nbsp;199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ifndef CONFIG_INLINE_SPIN_UNLOCK_IRQ</div><div style="height: 10px;"></div></div><div class="line-container " id="L316" data-line-number="316" data-line-id="line_315" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L316', event)" title="Click to copy anchor link">316</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.422</span> <span class="hl-unit">us</span>    |            <span class="hl-symbol">}</span> <span class="hl-comment">/* _raw_spin_unlock_irqrestore */</span></span></div><div class="line-container " id="L317" data-line-number="317" data-line-id="line_316" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L317', event)" title="Click to copy anchor link">317</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">5.767</span> <span class="hl-unit">us</span>    |          <span class="hl-symbol">}</span> <span class="hl-comment">/* hrtimer_start_range_ns */</span></span></div><div class="line-container " id="L318" data-line-number="318" data-line-id="line_317" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L318', event)" title="Click to copy anchor link">318</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span> + <span class="hl-time">17.930</span> <span class="hl-unit">us</span>   |        <span class="hl-symbol">}</span> <span class="hl-comment">/* tick_nohz_stop_tick */</span></span></div><div class="line-container expandable" id="L319" data-line-number="319" data-line-id="line_318" data-cpu="3" data-pid="" data-comm="" onclick="handleLineClick(event, 'line_318')" ondblclick="handleDoubleClick(event, 'line_318')"><span class="line-number" onclick="updateAnchor('L319', event)" title="Click to copy anchor link">319</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span>   <span class="hl-time">0.091</span> <span class="hl-unit">us</span>    |        <span class="hl-func">nohz_balance_enter_idle</span><span class="hl-symbol">(</span>cpu=3<span class="hl-symbol">)</span><span class="hl-symbol">;</span> <span class="hl-comment">/* <-cpuidle_idle_call+<span class="hl-addr">0x114</span>/<span class="hl-addr">0x150</span> */</span></span><span class="expand-btn">+</span></div><div class="expanded-content" id="line_318_content" style="display: none;"><div class="location-link"><strong>cpuidle_idle_call+0x113/0x150:</strong></div><a class="location-link" href="https://elixir.bootlin.com/linux/v6.18/source/kernel/sched/idle.c#L188" target="_blank">cpuidle_idle_call&nbsp;at&nbsp;kernel/sched/idle.c:188</a><div class="source-line">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_irq_enable();</div><div class="source-line">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">return</span>;</div><div class="source-line">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 186</div><div class="source-line">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">if</span> (cpuidle_not_available(drv, dev)) {</div><div class="source-line current-line">&gt;188&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_nohz_idle_stop_tick();</div><div class="source-line"> 189</div><div class="source-line">&nbsp;190&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default_idle_call();</div><div class="source-line">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c-keyword">goto</span> exit_idle;</div><div class="source-line">&nbsp;192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="source-line"> 193</div><div style="height: 10px;"></div></div><div class="line-container " id="L320" data-line-number="320" data-line-id="line_319" data-cpu="3" data-pid="" data-comm=""><span class="line-number" onclick="updateAnchor('L320', event)" title="Click to copy anchor link">320</span><span class="line-content"><span class="hl-cpu"> 3<span class="hl-symbol">)</span></span> + <span class="hl-time">24.545</span> <span class="hl-unit">us</span>   |      <span class="hl-symbol">}</span> <span class="hl-comment">/* tick_nohz_idle_stop_tick */</span></span></div>
        </div>
    </div>

    <div class="keyboard-hint" id="keyboardHint">
        <button class="keyboard-hint-close" onclick="closeKeyboardHint()">×</button>
        <h3>Keyboard Shortcuts</h3>
        <ul>
            <li><kbd>j</kbd>/<kbd>k</kbd> or <kbd>↓</kbd>/<kbd>↑</kbd>: Move to next/prev expandable line</li>
            <li><kbd>h</kbd>/<kbd>l</kbd>: Scroll left/right</li>
            <li><kbd>Enter</kbd>: Expand/collapse</li>
            <li><kbd>Space</kbd>: Scroll down</li>
            <li><kbd>Esc</kbd>: Clear selection</li>
        </ul>
    </div>

    <script>
        // 标记是否正在进行文本选择
        let isSelectingText = false;
        // 记录鼠标按下时的位置和时间
        let mouseDownInfo = { x: 0, y: 0, time: 0 };
        // 记录当前高亮行
        let highlightedLine = null;
        // 当前主题
        let currentTheme = localStorage.getItem('theme') || 'light';
        // 记录展开状态
        let expandedLines = JSON.parse(localStorage.getItem('expandedLines')) || {};
        // 双击选择相关变量
        let lastClickTime = 0;
        let lastClickTarget = null;
        let doubleClickTimer = null;
        let clickTimer = null;
        let doubleClickState = 0; // 0: 初始状态, 1: 第一次双击选中单词, 2: 第二次双击选中整行
        // 键盘导航相关变量
        let keyboardSelectedLine = null;
        let keyboardSelectedIndex = -1;
        let allLines = [];
        let expandableLines = [];
        let expandableLineIndices = [];
        let keyboardHintTimer = null;
        // 记录当前滚动位置
        let scrollPositionBeforeClick = { x: 0, y: 0 };
        // 是否显示过键盘提示
        let keyboardHintShown = localStorage.getItem('keyboardHintShown') === 'true';
        // 总行数（从summary中获取）
        let total_lines = 0;

        // 过滤功能相关变量
        let currentFilter = { cpu: [], pid: [], comm: [] };

        // 初始化主题
        document.documentElement.setAttribute('data-theme', currentTheme);
        
        // 初始化展开状态
        function restoreExpandedState() {
            for (const [lineId, isExpanded] of Object.entries(expandedLines)) {
                if (isExpanded) {
                    const content = document.getElementById(lineId + '_content');
                    const btn = document.querySelector('#' + lineId + '_container .expand-btn');
                    const container = document.getElementById(lineId + '_container');
                    
                    if (content && btn && container) {
                        content.style.display = 'block';
                        if (btn) btn.textContent = '-';
                        container.classList.add('selected');
                    }
                }
            }
        }
        
        // 保存展开状态
        function saveExpandedState(lineId, isExpanded) {
            expandedLines[lineId] = isExpanded;
            localStorage.setItem('expandedLines', JSON.stringify(expandedLines));
        }
        
        // 初始化键盘导航
        function initKeyboardNavigation() {
            // 使用updateExpandableLines来初始化所有变量
            updateExpandableLines();
            
            // 如果有可展开行，设置默认选中第一个可展开行
            if (expandableLineIndices.length > 0) {
                setKeyboardSelectedLine(expandableLineIndices[0], false);
            } else if (allLines.length > 0) {
                // 如果没有可展开行，选中第一行
                setKeyboardSelectedLine(0, false);
            }
            
            // 初始显示键盘提示，但只在第一次加载页面时
            if (!keyboardHintShown) {
                showKeyboardHint();
                localStorage.setItem('keyboardHintShown', 'true');
                keyboardHintShown = true;
            }
        }
        
        // 显示键盘提示
        function showKeyboardHint() {
            const hint = document.getElementById('keyboardHint');
            hint.style.display = 'block';
            
            // 8秒后自动隐藏
            if (keyboardHintTimer) {
                clearTimeout(keyboardHintTimer);
            }
            keyboardHintTimer = setTimeout(() => {
                hint.style.display = 'none';
            }, 8000);
        }
        
        // 关闭键盘提示
        function closeKeyboardHint() {
            const hint = document.getElementById('keyboardHint');
            hint.style.display = 'none';
            if (keyboardHintTimer) {
                clearTimeout(keyboardHintTimer);
                keyboardHintTimer = null;
            }
        }

        // 应用过滤器（支持正则表达式）
        function applyFilter() {
            const cpuInput = document.getElementById('filterCpu')?.value.trim() || '';
            const pidInput = document.getElementById('filterPid')?.value.trim() || '';
            const commInput = document.getElementById('filterComm')?.value.trim() || '';

            // 编译正则表达式
            let cpuRegex = null, pidRegex = null, commRegex = null;

            try {
                if (cpuInput) cpuRegex = new RegExp(cpuInput);
            } catch (e) {
                console.warn('Invalid CPU regex:', cpuInput);
            }

            try {
                if (pidInput) pidRegex = new RegExp(pidInput);
            } catch (e) {
                console.warn('Invalid PID regex:', pidInput);
            }

            try {
                if (commInput) commRegex = new RegExp(commInput);
            } catch (e) {
                console.warn('Invalid Comm regex:', commInput);
            }

            // 检查是否有任何过滤条件
            const hasFilter = cpuRegex || pidRegex || commRegex;

            // 获取所有行
            const allLines = document.querySelectorAll('.line-container');
            let visibleCount = 0;

            allLines.forEach(line => {
                const cpu = line.getAttribute('data-cpu');
                const pid = line.getAttribute('data-pid');
                const comm = line.getAttribute('data-comm');
                const rawLine = line.querySelector('.line-content')?.textContent || '';

                let show = true;

                // 如果有过滤条件，隐藏无效行（空行、分隔线等）
                if (hasFilter) {
                    // 检查是否是空行或分隔线
                    const trimmed = rawLine.trim();
                    if (trimmed === '' || trimmed.match(/^[-]+$/)) {
                        show = false;
                    }
                }

                // 检查CPU过滤（正则表达式）
                if (show && cpuRegex && cpu !== null && cpu !== '') {
                    if (!cpuRegex.test(cpu)) {
                        show = false;
                    }
                }

                // 检查PID过滤（正则表达式）
                if (show && pidRegex && pid !== null && pid !== '') {
                    if (!pidRegex.test(pid)) {
                        show = false;
                    }
                }

                // 检查Comm过滤（正则表达式）
                if (show && commRegex && comm) {
                    if (!commRegex.test(comm)) {
                        show = false;
                    }
                }

                line.style.display = show ? '' : 'none';
                if (show) visibleCount++;
            });

            // 更新展开行列表（只包含可见的）
            updateExpandableLines();

            // 应用过滤后，确保所有隐藏行的展开内容都被折叠
            // 方法1：直接处理所有展开的内容
            const allExpandedContents = document.querySelectorAll('.expanded-content');
            allExpandedContents.forEach(content => {
                // .expanded-content 是 .line-container 的兄弟元素，不是子元素
                // 需要找到前一个兄弟元素
                const prevSibling = content.previousElementSibling;
                const isLineContainer = prevSibling && prevSibling.classList.contains('line-container');
                const isParentHidden = isLineContainer && prevSibling.style.display === 'none';
                const isContentVisible = content.style.display === 'block';

                if (isParentHidden && isContentVisible) {
                    content.style.display = 'none';
                    const btn = prevSibling.querySelector('.expand-btn');
                    if (btn) btn.textContent = '+';
                    prevSibling.classList.remove('selected');
                }
            });

            // 方法2：同时折叠所有展开的行（双重保险）
            const expandableLines = document.querySelectorAll('.line-container.expandable');
            expandableLines.forEach(line => {
                // 找到下一个兄弟元素作为展开内容
                const nextSibling = line.nextElementSibling;
                const content = nextSibling && nextSibling.classList.contains('expanded-content') ? nextSibling : null;
                const btn = line.querySelector('.expand-btn');
                const isExpanded = content && content.style.display === 'block';

                if (isExpanded) {
                    content.style.display = 'none';
                    btn.textContent = '+';
                    line.classList.remove('selected');
                }
            });

            // 更新信息面板中的可见行数
            // 更新摘要中的过滤行数显示（放在 Modules 后面）
            const visibleLinesContainer = document.getElementById('visibleLinesContainer');
            const summaryVisibleLines = document.getElementById('summaryVisibleLines');

            if (visibleLinesContainer && summaryVisibleLines) {
                if (visibleCount < total_lines) {
                    // 显示过滤后的行数
                    visibleLinesContainer.style.display = 'inline';
                    summaryVisibleLines.textContent = visibleCount;
                } else {
                    // 隐藏过滤行数（因为没有过滤）
                    visibleLinesContainer.style.display = 'none';
                }
            }

            console.log(`Filter applied: ${visibleCount} lines visible`);
        }

        // 清除过滤器
        function clearFilter() {
            const cpuInput = document.getElementById('filterCpu');
            const pidInput = document.getElementById('filterPid');
            const commInput = document.getElementById('filterComm');

            if (cpuInput) cpuInput.value = '';
            if (pidInput) pidInput.value = '';
            if (commInput) commInput.value = '';

            currentFilter = { cpu: [], pid: [], comm: [] };

            const allLines = document.querySelectorAll('.line-container');
            allLines.forEach(line => {
                line.style.display = ''; // 恢复所有行，包括无效行

                // 恢复展开状态
                const lineId = line.getAttribute('data-line-id');
                if (lineId) {
                    const content = document.getElementById(lineId + '_content');
                    const btn = line.querySelector('.expand-btn');
                    if (content && btn) {
                        // 检查是否应该展开
                        const isExpanded = localStorage.getItem(`expanded_${lineId}`) === 'true';
                        if (isExpanded) {
                            content.style.display = 'block';
                            btn.textContent = '-';
                            line.classList.add('selected');
                        } else {
                            content.style.display = 'none';
                            btn.textContent = '+';
                            line.classList.remove('selected');
                        }
                    }
                }
            });

            // 更新展开行列表
            updateExpandableLines();

            // 隐藏可见行数显示
            const visibleLinesContainer = document.getElementById('visibleLinesContainer');
            if (visibleLinesContainer) {
                visibleLinesContainer.style.display = 'none';
            }

            console.log('Filter cleared');
        }

        // 更新展开行列表（只包含可见的）
        function updateExpandableLines() {
            // 重新获取所有行（包括隐藏的）
            allLines = Array.from(document.querySelectorAll('.line-container'));
            expandableLines = Array.from(document.querySelectorAll('.line-container.expandable'))
                .filter(line => line.style.display !== 'none');
            expandableLineIndices = [];
            allLines.forEach((line, index) => {
                if (line.classList.contains('expandable') && line.style.display !== 'none') {
                    expandableLineIndices.push(index);
                }
            });
        }

        // 自动补全功能
        function initAutocomplete() {
            const inputs = [
                { id: 'filterCpu', suggestionsId: 'cpuSuggestions' },
                { id: 'filterPid', suggestionsId: 'pidSuggestions' },
                { id: 'filterComm', suggestionsId: 'commSuggestions' }
            ];

            inputs.forEach(({ id, suggestionsId }) => {
                const input = document.getElementById(id);
                const suggestionsDiv = document.getElementById(suggestionsId);

                // 如果输入框不存在，跳过
                if (!input || !suggestionsDiv) return;

                // 获取建议列表
                const suggestions = input.getAttribute('data-suggestions') || '';
                const suggestionList = suggestions ? suggestions.split(',') : [];

                // 点击输入框时显示所有建议
                input.addEventListener('focus', function() {
                    if (suggestionList.length > 0) {
                        suggestionsDiv.innerHTML = suggestionList.slice(0, 10).map(item =>
                            `<div class="suggestion-item" data-value="${item}">${item}</div>`
                        ).join('');
                        suggestionsDiv.classList.add('active');
                    }
                });

                // 输入时过滤建议
                input.addEventListener('input', function() {
                    const value = this.value.toLowerCase().trim();

                    // 如果输入框为空，显示所有建议
                    if (value.length === 0) {
                        if (suggestionList.length > 0) {
                            suggestionsDiv.innerHTML = suggestionList.slice(0, 10).map(item =>
                                `<div class="suggestion-item" data-value="${item}">${item}</div>`
                            ).join('');
                            suggestionsDiv.classList.add('active');
                        } else {
                            suggestionsDiv.classList.remove('active');
                            suggestionsDiv.innerHTML = '';
                        }
                        return;
                    }

                    // 过滤建议
                    const filtered = suggestionList.filter(item =>
                        item.toLowerCase().includes(value)
                    );

                    if (filtered.length > 0) {
                        suggestionsDiv.innerHTML = filtered.slice(0, 10).map(item =>
                            `<div class="suggestion-item" data-value="${item}">${item}</div>`
                        ).join('');
                        suggestionsDiv.classList.add('active');
                    } else {
                        suggestionsDiv.classList.remove('active');
                        suggestionsDiv.innerHTML = '';
                    }
                });

                // 点击建议项 - 智能添加到正则表达式
                suggestionsDiv.addEventListener('click', function(e) {
                    if (e.target.classList.contains('suggestion-item')) {
                        const value = e.target.getAttribute('data-value');
                        const current = input.value.trim();

                        if (current) {
                            // 如果当前内容已经是正则表达式，智能添加
                            if (current.includes('|') || current.includes('[') || current.includes('(')) {
                                // 已经是复杂正则，添加为备选
                                input.value = current + '|' + value;
                            } else if (current.includes(',')) {
                                // 已经是逗号分隔，继续用逗号
                                input.value = current + ',' + value;
                            } else {
                                // 简单值，转换为"或"关系
                                input.value = current + '|' + value;
                            }
                        } else {
                            input.value = value;
                        }
                        suggestionsDiv.classList.remove('active');
                        suggestionsDiv.innerHTML = '';
                        input.focus();
                    }
                });

                // 失去焦点时隐藏建议（延迟以允许点击）
                input.addEventListener('blur', function() {
                    setTimeout(() => {
                        suggestionsDiv.classList.remove('active');
                    }, 200);
                });

                // 键盘导航
                input.addEventListener('keydown', function(e) {
                    // 回车键触发过滤
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        // 如果有选中的建议项，先选择它
                        if (suggestionsDiv.classList.contains('active')) {
                            const current = suggestionsDiv.querySelector('.suggestion-item.selected');
                            if (current) {
                                const value = current.getAttribute('data-value');
                                const currentVal = this.value.trim();
                                if (currentVal) {
                                    // 智能添加：如果已经是正则表达式，用|，否则用逗号
                                    if (currentVal.includes('|') || currentVal.includes('[') || currentVal.includes('(')) {
                                        this.value = currentVal + '|' + value;
                                    } else if (currentVal.includes(',')) {
                                        this.value = currentVal + ',' + value;
                                    } else {
                                        this.value = currentVal + '|' + value;
                                    }
                                } else {
                                    this.value = value;
                                }
                                suggestionsDiv.classList.remove('active');
                                suggestionsDiv.innerHTML = '';
                                return;
                            }
                        }
                        // 没有选中的建议项，触发过滤
                        applyFilter();
                        return;
                    }

                    if (!suggestionsDiv.classList.contains('active')) return;

                    const items = suggestionsDiv.querySelectorAll('.suggestion-item');
                    if (items.length === 0) return;

                    if (e.key === 'ArrowDown') {
                        e.preventDefault();
                        const current = suggestionsDiv.querySelector('.suggestion-item.selected');
                        if (current) {
                            current.classList.remove('selected');
                            const next = current.nextElementSibling;
                            if (next) {
                                next.classList.add('selected');
                                next.scrollIntoView({ block: 'nearest' });
                            }
                        } else {
                            items[0].classList.add('selected');
                        }
                    } else if (e.key === 'ArrowUp') {
                        e.preventDefault();
                        const current = suggestionsDiv.querySelector('.suggestion-item.selected');
                        if (current) {
                            current.classList.remove('selected');
                            const prev = current.previousElementSibling;
                            if (prev) {
                                prev.classList.add('selected');
                                prev.scrollIntoView({ block: 'nearest' });
                            }
                        }
                    } else if (e.key === 'Escape') {
                        suggestionsDiv.classList.remove('active');
                        suggestionsDiv.innerHTML = '';
                    }
                });
            });
        }

        // 设置键盘选中的行
        function setKeyboardSelectedLine(index, scrollIntoView = true) {
            // 清除之前的选择
            if (keyboardSelectedLine) {
                keyboardSelectedLine.classList.remove('keyboard-selected');
            }
            
            if (index < 0) index = 0;
            if (index >= allLines.length) index = allLines.length - 1;
            
            keyboardSelectedIndex = index;
            keyboardSelectedLine = allLines[index];
            
            // 添加新的选择样式
            if (keyboardSelectedLine) {
                keyboardSelectedLine.classList.add('keyboard-selected');
                
                // 只有在需要滚动时才滚动
                if (scrollIntoView) {
                    // 获取当前行的位置
                    const rect = keyboardSelectedLine.getBoundingClientRect();
                    const windowHeight = window.innerHeight;
                    
                    // 计算行在视口中的位置
                    const lineTop = rect.top;
                    const lineBottom = rect.bottom;
                    const lineHeight = rect.height;
                    
                    // 判断是否需要滚动到中间
                    // 如果当前行接近视口底部（距离底部小于2行高度），则滚动到中间
                    // 如果当前行接近视口顶部（距离顶部小于1行高度），也滚动到中间
                    const nearBottom = windowHeight - lineBottom < lineHeight * 2;
                    const nearTop = lineTop < lineHeight;
                    
                    if (nearBottom || nearTop || lineTop < 0 || lineBottom > windowHeight) {
                        // 如果接近边界或不在视口中，滚动到中间
                        keyboardSelectedLine.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    } else {
                        // 否则，使用nearest，尽可能少滚动
                        keyboardSelectedLine.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }
            }
        }
        
        // 导航到下一个可展开行
        function navigateToExpandableLine(direction) {
            if (expandableLineIndices.length === 0) {
                return; // 没有可展开行
            }
            
            let currentExpandableIndex = -1;
            
            // 找到当前行在可展开行列表中的位置
            for (let i = 0; i < expandableLineIndices.length; i++) {
                if (expandableLineIndices[i] === keyboardSelectedIndex) {
                    currentExpandableIndex = i;
                    break;
                }
            }
            
            // 如果当前行不是可展开行，找到最近的可展开行
            if (currentExpandableIndex === -1) {
                if (direction > 0) {
                    // 向下查找
                    for (let i = 0; i < expandableLineIndices.length; i++) {
                        if (expandableLineIndices[i] > keyboardSelectedIndex) {
                            currentExpandableIndex = i;
                            break;
                        }
                    }
                    // 如果没找到，从第一个开始
                    if (currentExpandableIndex === -1) {
                        currentExpandableIndex = 0;
                    }
                } else {
                    // 向上查找
                    for (let i = expandableLineIndices.length - 1; i >= 0; i--) {
                        if (expandableLineIndices[i] < keyboardSelectedIndex) {
                            currentExpandableIndex = i;
                            break;
                        }
                    }
                    // 如果没找到，从最后一个开始
                    if (currentExpandableIndex === -1) {
                        currentExpandableIndex = expandableLineIndices.length - 1;
                    }
                }
            }
            
            // 计算下一个索引
            let nextIndex = currentExpandableIndex + direction;
            
            // 处理循环
            if (nextIndex < 0) {
                nextIndex = expandableLineIndices.length - 1; // 循环到最后一个
            } else if (nextIndex >= expandableLineIndices.length) {
                nextIndex = 0; // 循环到第一个
            }
            
            // 设置新的选中行
            setKeyboardSelectedLine(expandableLineIndices[nextIndex], true);
        }
        
        // 处理行点击事件 - 现在只处理单击
        function handleLineClick(event, lineId) {
            // 记录点击前的滚动位置
            scrollPositionBeforeClick = {
                x: window.scrollX,
                y: window.scrollY
            };
            
            // 阻止默认行为，防止可能的滚动
            event.preventDefault();
            
            // 检查是否正在进行文本选择
            const selection = window.getSelection();
            const hasSelection = selection.toString().trim().length > 0;
            
            // 检查鼠标移动距离，判断是否是拖动选择
            const mouseUpInfo = { x: event.clientX, y: event.clientY, time: Date.now() };
            const distance = Math.sqrt(
                Math.pow(mouseUpInfo.x - mouseDownInfo.x, 2) + 
                Math.pow(mouseUpInfo.y - mouseDownInfo.y, 2)
            );
            const timeDiff = mouseUpInfo.time - mouseDownInfo.time;
            
            // 如果存在文本选择，并且是拖动操作，则不触发展开/收起
            if (hasSelection && (distance > 5 || timeDiff > 200)) {
                // 高亮被选中的行
                highlightSelectedLines();
                return;
            }
            
            // 清除之前的点击定时器
            if (clickTimer) {
                clearTimeout(clickTimer);
                clickTimer = null;
            }
            
            // 如果是双击事件的一部分，则不执行单击
            if (doubleClickTimer) {
                clearTimeout(doubleClickTimer);
                doubleClickTimer = null;
                return;
            }
            
            // 设置键盘选中行，但不滚动
            // 根据 data-line-id 查找对应的行元素
            let clickedLine = null;
            const allLineElements = Array.from(document.querySelectorAll('.line-container'));
            for (let line of allLineElements) {
                if (line.getAttribute('data-line-id') === lineId) {
                    clickedLine = line;
                    break;
                }
            }
            
            if (clickedLine) {
                const lineIndex = allLineElements.findIndex(line => line === clickedLine);
                if (lineIndex >= 0) {
                    setKeyboardSelectedLine(lineIndex, false);
                }
            }
            
            // 设置延迟执行单击事件，以便在双击时可以取消
            clickTimer = setTimeout(() => {
                toggleExpand(lineId, event);
                clickTimer = null;
            }, 200);
        }
        
        // 处理双击事件
        function handleDoubleClick(event, lineId) {
            // 阻止事件冒泡
            event.stopPropagation();
            
            // 清除单击定时器
            if (clickTimer) {
                clearTimeout(clickTimer);
                clickTimer = null;
            }
            
            // 检查是否点击的是.line-content
            const lineContent = event.target.closest('.line-content');
            if (!lineContent) return;
            
            // 检查是否在可展开行内
            const lineContainer = event.target.closest('.line-container');
            if (!lineContainer) return;
            
            const now = Date.now();
            const timeDiff = now - lastClickTime;
            const target = event.target;
            
            if (timeDiff < 500 && target === lastClickTarget) {
                // 快速双击相同目标
                doubleClickState = (doubleClickState + 1) % 3;
                
                if (doubleClickState === 1) {
                    // 第一次双击：选中单词（浏览器默认行为）
                    // 我们让浏览器处理默认的双击选中单词行为
                    
                    // 设置定时器，在一定时间后重置状态
                    if (doubleClickTimer) {
                        clearTimeout(doubleClickTimer);
                    }
                    doubleClickTimer = setTimeout(() => {
                        doubleClickState = 0;
                        doubleClickTimer = null;
                    }, 500);
                    
                    return;
                } else if (doubleClickState === 2) {
                    // 第二次双击：选中整行文本
                    event.preventDefault();
                    
                    // 获取行内容
                    const lineText = lineContent.textContent;
                    
                    // 创建选择范围
                    const range = document.createRange();
                    range.selectNodeContents(lineContent);
                    
                    // 清除当前选择
                    const selection = window.getSelection();
                    selection.removeAllRanges();
                    selection.addRange(range);
                    
                    // 高亮被选中的行
                    highlightSelectedLines();
                    
                    // 重置双击状态
                    doubleClickState = 0;
                    if (doubleClickTimer) {
                        clearTimeout(doubleClickTimer);
                        doubleClickTimer = null;
                    }
                }
            } else {
                // 新的双击序列
                doubleClickState = 1;
                
                // 第一次双击：让浏览器默认选中单词
                // 我们只需要记录时间和目标
                
                // 设置定时器，在一定时间后重置状态
                if (doubleClickTimer) {
                    clearTimeout(doubleClickTimer);
                }
                doubleClickTimer = setTimeout(() => {
                    doubleClickState = 0;
                    doubleClickTimer = null;
                }, 500);
            }
            
            lastClickTime = now;
            lastClickTarget = target;
        }
        
        // 切换展开/收起状态 - 只影响当前行，不滚动
        function toggleExpand(lineId, event) {
            // 保存当前滚动位置
            const scrollX = window.scrollX;
            const scrollY = window.scrollY;
            
            const content = document.getElementById(lineId + '_content');
            const btn = document.querySelector('[data-line-id="' + lineId + '"] .expand-btn');
            const container = document.querySelector('[data-line-id="' + lineId + '"]');
            
            // 使用getComputedStyle获取计算后的显示状态
            const computedStyle = window.getComputedStyle(content);
            const isCurrentlyVisible = computedStyle.display === 'block';
            
            if (isCurrentlyVisible) {
                // 收起当前行
                content.style.display = 'none';
                if (btn) btn.textContent = '+';
                container.classList.remove('selected');
                saveExpandedState(lineId, false);
            } else {
                // 展开当前行
                content.style.display = 'block';
                if (btn) btn.textContent = '-';
                container.classList.add('selected');
                saveExpandedState(lineId, true);
            }
            
            // 恢复滚动位置
            setTimeout(() => {
                window.scrollTo(scrollX, scrollY);
            }, 0);
        }
        
        // 切换主题
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            localStorage.setItem('theme', currentTheme);
        }
        
        // 切换信息面板展开/折叠
        function toggleInfoPanel() {
            const panel = document.getElementById('infoPanel');
            const toggleBtn = document.querySelector('.info-toggle-btn');
            const icon = toggleBtn.querySelector('.info-toggle-icon');
            const isExpanded = panel.classList.contains('show');
            
            if (isExpanded) {
                panel.classList.remove('show');
                icon.classList.remove('expanded');
                localStorage.setItem('infoPanelExpanded', 'false');
            } else {
                panel.classList.add('show');
                icon.classList.add('expanded');
                localStorage.setItem('infoPanelExpanded', 'true');
            }
        }
        
        // 初始化信息面板状态
        function initInfoPanel() {
            const expanded = localStorage.getItem('infoPanelExpanded') === 'true';
            if (expanded) {
                const panel = document.getElementById('infoPanel');
                const toggleBtn = document.querySelector('.info-toggle-btn');
                const icon = toggleBtn.querySelector('.info-toggle-icon');
                panel.classList.add('show');
                icon.classList.add('expanded');
            }
        }
        
        // 高亮被选中的行
        function highlightSelectedLines() {
            // 清除之前的高亮
            if (highlightedLine) {
                highlightedLine.classList.remove('highlighted');
            }
            
            // 获取当前选择
            const selection = window.getSelection();
            if (selection.rangeCount > 0 && selection.toString().trim().length > 0) {
                const range = selection.getRangeAt(0);
                const container = range.commonAncestorContainer;
                
                // 向上查找包含的行容器
                let current = container;
                while (current && current.nodeType === Node.ELEMENT_NODE) {
                    if (current.classList && current.classList.contains('line-container')) {
                        current.classList.add('highlighted');
                        highlightedLine = current;
                        break;
                    }
                    current = current.parentElement;
                }
            }
        }
        
        // 复制可见内容（纯文本模式，只复制 trace 内容）
        function copyVisibleContent(event) {
            const lines = document.querySelectorAll('.line-container');

            // 构建文本，只复制 trace 内容（不包含行号）
            const textLines = [];
            lines.forEach(line => {
                const lineContent = line.querySelector('.line-content').textContent;
                textLines.push(lineContent);
            });
            const textToCopy = textLines.join('\n');

            // 复制到剪贴板
            if (navigator.clipboard) {
                navigator.clipboard.writeText(textToCopy).then(() => {
                    // 显示成功提示
                    const originalText = event.target.textContent;
                    event.target.textContent = 'Copied!';
                    event.target.style.background = 'rgba(34, 197, 94, 0.8)';
                    setTimeout(() => {
                        event.target.textContent = originalText;
                        event.target.style.background = '';
                    }, 1000);
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    // 降级方案
                    fallbackCopy(textToCopy, event.target);
                });
            } else {
                // 老浏览器降级
                fallbackCopy(textToCopy, event.target);
            }
        }

        // 降级复制方案
        function fallbackCopy(text, button) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.top = '-1000px';
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                // 显示成功提示
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.background = 'rgba(34, 197, 94, 0.8)';
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                }, 1000);
            } catch (err) {
                console.error('Fallback copy failed: ', err);
                button.textContent = 'Failed';
                setTimeout(() => {
                    button.textContent = 'Copy';
                }, 1000);
            }
            document.body.removeChild(textArea);
        }
        
        // 滚动到顶部
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // 监听滚动，更新进度条
        function updateProgressBar() {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById("progressBar").style.width = scrolled + "%";
        }
        
        // 记录鼠标按下事件
        document.addEventListener('mousedown', function(event) {
            mouseDownInfo = {
                x: event.clientX,
                y: event.clientY,
                time: Date.now()
            };
        });
        
        // 监听文本选择变化
        document.addEventListener('selectionchange', function() {
            const selection = window.getSelection();
            isSelectingText = selection.toString().trim().length > 0;
            
            if (isSelectingText) {
                highlightSelectedLines();
            } else {
                // 清除高亮
                if (highlightedLine) {
                    highlightedLine.classList.remove('highlighted');
                    highlightedLine = null;
                }
            }
        });
        
        // 添加键盘快捷键支持
        document.addEventListener('keydown', function(event) {
            console.log('🔑 Keydown event:', 'key=', event.key, 'keyCode=', event.keyCode, 'code=', event.code);
            
            // 检查是否在输入框中
            if (event.target.matches('input, textarea, select')) {
                console.log('⏸ 在输入框中，跳过处理');
                return;
            }
            
            // DEBUG: 记录所有按键（可以注释掉）
            // console.log('Keydown:', event.key, 'keyCode:', event.keyCode);

            
            // Enter键特殊处理：在链接上按Enter时，用来展开/收起，而不是打开链接
            if (event.key === 'Enter' || event.keyCode === 13) {
                let handled = false;
                
                // 检查当前焦点是否在可展开行内（包括链接）
                let focusedLine = null;
                let element = event.target;
                
                // 向上查找包含 expandable 类的行容器
                while (element && element !== document.body) {
                    if (element.classList && element.classList.contains('line-container') && element.classList.contains('expandable')) {
                        focusedLine = element;
                        break;
                    }
                    element = element.parentElement;
                }
                
                // 如果找到可展开行，触发展开/收起
                if (focusedLine) {
                    event.preventDefault();
                    const lineId = focusedLine.getAttribute('data-line-id');
                    if (lineId) {
                        toggleExpand(lineId, event);
                        handled = true;
                    }
                }
                
                // 如果当前没有焦点在链接上，使用键盘选中的行
                // 但只有在有可见的可展开行时才处理
                if (!handled && keyboardSelectedLine && keyboardSelectedLine.classList.contains('expandable') &&
                    keyboardSelectedLine.style.display !== 'none') {
                    event.preventDefault();
                    const lineId = keyboardSelectedLine.getAttribute('data-line-id');
                    if (lineId) {
                        toggleExpand(lineId, event);
                        handled = true;
                    }
                }
                
                // 如果没有可展开行被处理，但 keyboardSelectedLine 不可展开，尝试展开当前行
                // 但只有在该行可见时才处理
                if (!handled && keyboardSelectedLine && keyboardSelectedLine.style.display !== 'none') {
                    event.preventDefault();
                    const lineId = keyboardSelectedLine.getAttribute('data-line-id');
                    if (lineId) {
                        toggleExpand(lineId, event);
                    }
                }
                
                if (handled) {
                    return;
                }
            }
            
            // 按下ESC键取消选择
            if (event.key === 'Escape' || event.keyCode === 27) {
                // 清除高亮
                if (highlightedLine) {
                    highlightedLine.classList.remove('highlighted');
                    highlightedLine = null;
                }
                // 清除文本选择
                window.getSelection().removeAllRanges();
            }
            
            // VIM风格导航键和方向键
            let handled = false;
            const keyLower = event.key.toLowerCase();
            
            // 处理垂直移动（j/k 和上下箭头键）- 只导航到可展开行
            // 只有在有可见的可展开行时才处理
            if (keyLower === 'j' || event.key === 'ArrowDown') {
                event.preventDefault();
                handled = true;
                if (expandableLineIndices.length > 0 && expandableLines.length > 0) {
                    navigateToExpandableLine(1); // 向下导航
                }
            } else if (keyLower === 'k' || event.key === 'ArrowUp') {
                event.preventDefault();
                handled = true;
                if (expandableLineIndices.length > 0 && expandableLines.length > 0) {
                    navigateToExpandableLine(-1); // 向上导航
                }
            }
            
            // 处理水平滚动（h/l 键）
            // 支持大小写，Shift+h 和 Shift+l 也有效
            if (keyLower === 'h') {
                console.log('👈 检测到 h 键，执行左滚动');
                event.preventDefault();
                handled = true;
                // 向左滚动容器
                var container = document.querySelector('.container');
                if (container) {
                    container.scrollBy({ left: -100, behavior: 'smooth' });
                    console.log('✓ 容器已左滚，当前 scrollLeft:', container.scrollLeft);
                }
            } else if (keyLower === 'l') {
                console.log('👉 检测到 l 键，执行右滚动');
                event.preventDefault();
                handled = true;
                // 向右滚动容器
                var container = document.querySelector('.container');
                if (container) {
                    container.scrollBy({ left: 100, behavior: 'smooth' });
                    console.log('✓ 容器已右滚，当前 scrollLeft:', container.scrollLeft);
                }
            }
            
            // 处理其他功能键
            if (!handled) {
                switch (event.key) {
                        
                    case ' ': // 空格键向下滚动
                        if (!event.target.matches('input, textarea')) {
                            event.preventDefault();
                            window.scrollBy({ top: window.innerHeight * 0.8, behavior: 'smooth' });
                        }
                        break;
                        
                    case 'g': // gg: 跳转到顶部
                        if (!event.shiftKey) {
                            event.preventDefault();
                            if (event.repeat) break;
                            if (expandableLineIndices.length > 0) {
                                setKeyboardSelectedLine(expandableLineIndices[0], true);
                            } else if (allLines.length > 0) {
                                setKeyboardSelectedLine(0, true);
                            }
                        }
                        break;
                        
                    case 'G': // Shift+G: 跳转到底部
                        if (event.shiftKey) {
                            event.preventDefault();
                            if (event.repeat) break;
                            if (expandableLineIndices.length > 0) {
                                setKeyboardSelectedLine(expandableLineIndices[expandableLineIndices.length - 1], true);
                            } else if (allLines.length > 0) {
                                setKeyboardSelectedLine(allLines.length - 1, true);
                            }
                        }
                        break;
                        
                    case 'Home': // Home键跳转到顶部
                        event.preventDefault();
                        if (expandableLineIndices.length > 0) {
                            setKeyboardSelectedLine(expandableLineIndices[0], true);
                        } else if (allLines.length > 0) {
                            setKeyboardSelectedLine(0, true);
                        }
                        break;
                        
                    case 'End': // End键跳转到底部
                        event.preventDefault();
                        if (expandableLineIndices.length > 0) {
                            setKeyboardSelectedLine(expandableLineIndices[expandableLineIndices.length - 1], true);
                        } else if (allLines.length > 0) {
                            setKeyboardSelectedLine(allLines.length - 1, true);
                        }
                        break;
                        
                    case 'PageDown': // PageDown向下翻页
                        event.preventDefault();
                        window.scrollBy({ top: window.innerHeight * 0.9, behavior: 'smooth' });
                        break;
                        
                    case 'PageUp': // PageUp向上翻页
                        event.preventDefault();
                        window.scrollBy({ top: -window.innerHeight * 0.9, behavior: 'smooth' });
                        break;
                        
                    case '?': // 问号键显示键盘提示
                        event.preventDefault();
                        showKeyboardHint();
                        break;
                }
            }
            
            
            // Ctrl+A 选中所有文本
            if ((event.ctrlKey || event.metaKey) && event.key === 'a') {
                // 防止默认的全选行为，因为我们需要选择特定的内容
                event.preventDefault();
                
                // 选中所有行内容
                const allLineContents = document.querySelectorAll('.line-content');
                if (allLineContents.length > 0) {
                    const range = document.createRange();
                    const selection = window.getSelection();
                    
                    // 清除当前选择
                    selection.removeAllRanges();
                    
                    // 从第一个行内容开始
                    range.setStart(allLineContents[0], 0);
                    // 到最后一个行内容结束
                    range.setEnd(allLineContents[allLineContents.length - 1], allLineContents[allLines.length - 1].childNodes.length);
                    
                    selection.addRange(range);
                    highlightSelectedLines();
                }
            }
        });
        
        // 获取当前可见的行
        function getVisibleLines() {
            const viewportTop = window.scrollY;
            const viewportBottom = viewportTop + window.innerHeight;
            const visibleLines = [];
            
            allLines.forEach(line => {
                const rect = line.getBoundingClientRect();
                const lineTop = rect.top + window.scrollY;
                const lineBottom = rect.bottom + window.scrollY;
                
                // 检查行是否在视口中
                if (lineBottom > viewportTop && lineTop < viewportBottom) {
                    visibleLines.push(line);
                }
            });
            
            return visibleLines;
        }
        
        
        // 恢复视图状态
        function restoreViewState() {
            const savedState = localStorage.getItem('viewState');
            if (savedState) {
                const state = JSON.parse(savedState);
                window.scrollTo(0, state.scrollPosition);
            }
        }
        
        // 全局变量跟踪异步任务
        let expandCollapseTask = null;
        let isTaskRunning = false;
        let isWaitingForStop = false;

        // 禁用/启用两个按钮
        function setButtonsDisabled(disabled) {
            const expandBtn = document.querySelector('button[onclick="expandAll()"]');
            const collapseBtn = document.querySelector('button[onclick="collapseAll()"]');

            if (expandBtn) expandBtn.disabled = disabled;
            if (collapseBtn) collapseBtn.disabled = disabled;
        }

        // 等待任务完全停止
        function waitForTaskStop() {
            return new Promise((resolve) => {
                if (!isTaskRunning && !expandCollapseTask) {
                    resolve();
                    return;
                }

                const checkInterval = setInterval(() => {
                    if (!isTaskRunning && !expandCollapseTask) {
                        clearInterval(checkInterval);
                        resolve();
                    }
                }, 10);
            });
        }

        // 展开所有可展开行（异步执行，支持取消）
        async function expandAll() {
            const btn = event.target;

            // 如果正在等待停止，忽略点击
            if (isWaitingForStop) {
                return;
            }

            // 保存原始文本
            let originalText = btn.getAttribute('data-original-text');
            if (!originalText) {
                originalText = btn.textContent;
                btn.setAttribute('data-original-text', originalText);
            }

            // 如果有任务在运行，停止它并等待，然后返回（不发起新任务）
            if (expandCollapseTask) {
                isWaitingForStop = true;
                setButtonsDisabled(true);
                expandCollapseTask.cancel();
                await waitForTaskStop();
                isWaitingForStop = false;
                setButtonsDisabled(false);

                // 恢复按钮文本
                btn.textContent = originalText;
                return;
            }

            // 没有任务在运行，开始新的 Expand 任务 - 只对可见的行操作
            const expandableLines = Array.from(document.querySelectorAll('.line-container.expandable'))
                .filter(container => container.style.display !== 'none');
            const total = expandableLines.length;

            if (total === 0) return;

            // 显示进度
            btn.textContent = `Expanding... 000%`;
            isTaskRunning = true;

            let processed = 0;
            const batchSize = 50;
            let cancelled = false;

            // 创建任务对象
            expandCollapseTask = {
                type: 'expand',
                cancel: function() {
                    cancelled = true;
                    btn.textContent = originalText;
                    isTaskRunning = false;
                    expandCollapseTask = null;
                }
            };

            function processBatch() {
                if (cancelled) {
                    isTaskRunning = false;
                    expandCollapseTask = null;
                    return;
                }

                const batch = expandableLines.slice(processed, processed + batchSize);

                batch.forEach(container => {
                    if (cancelled) return;

                    const lineId = container.getAttribute('data-line-id');
                    const content = document.getElementById(lineId + '_content');
                    const expandBtn = container.querySelector('.expand-btn');
                    const isVisible = container.style.display !== 'none';

                    if (content && isVisible) {
                        content.style.display = 'block';
                        if (expandBtn) expandBtn.textContent = '-';
                        container.classList.add('selected');
                        saveExpandedState(lineId, true);
                    }
                });

                processed += batch.length;

                // 更新进度（固定长度百分比）
                const percent = Math.round((processed / total) * 100);
                const percentStr = percent.toString().padStart(3, ' ');
                btn.textContent = `Expanding... ${percentStr}%`;

                if (processed < total && !cancelled) {
                    requestAnimationFrame(processBatch);
                } else {
                    if (!cancelled) {
                        btn.textContent = originalText;
                        isTaskRunning = false;
                        expandCollapseTask = null;
                    }
                }
            }

            requestAnimationFrame(processBatch);
        }

        // 收起所有可展开行（异步执行，支持取消）
        async function collapseAll() {
            const btn = event.target;

            // 如果正在等待停止，忽略点击
            if (isWaitingForStop) {
                return;
            }

            // 保存原始文本
            let originalText = btn.getAttribute('data-original-text');
            if (!originalText) {
                originalText = btn.textContent;
                btn.setAttribute('data-original-text', originalText);
            }

            // 如果有任务在运行，停止它并等待，然后返回（不发起新任务）
            if (expandCollapseTask) {
                isWaitingForStop = true;
                setButtonsDisabled(true);
                expandCollapseTask.cancel();
                await waitForTaskStop();
                isWaitingForStop = false;
                setButtonsDisabled(false);

                // 恢复按钮文本
                btn.textContent = originalText;

                // 清除高亮
                if (highlightedLine) {
                    highlightedLine.classList.remove('highlighted');
                    highlightedLine = null;
                }
                return;
            }

            // 没有任务在运行，开始新的 Collapse 任务 - 只对可见的行操作
            const expandableLines = Array.from(document.querySelectorAll('.line-container.expandable'))
                .filter(container => container.style.display !== 'none');
            const total = expandableLines.length;

            if (total === 0) {
                // 清除高亮
                if (highlightedLine) {
                    highlightedLine.classList.remove('highlighted');
                    highlightedLine = null;
                }
                return;
            }

            // 显示进度
            btn.textContent = `Collapsing... 000%`;
            isTaskRunning = true;

            let processed = 0;
            const batchSize = 50;
            let cancelled = false;

            // 创建任务对象
            expandCollapseTask = {
                type: 'collapse',
                cancel: function() {
                    cancelled = true;
                    btn.textContent = originalText;
                    isTaskRunning = false;
                    expandCollapseTask = null;
                }
            };

            function processBatch() {
                if (cancelled) {
                    isTaskRunning = false;
                    expandCollapseTask = null;
                    return;
                }

                const batch = expandableLines.slice(processed, processed + batchSize);

                batch.forEach(container => {
                    if (cancelled) return;

                    const lineId = container.getAttribute('data-line-id');
                    const content = document.getElementById(lineId + '_content');
                    const expandBtn = container.querySelector('.expand-btn');
                    const isVisible = container.style.display !== 'none';

                    if (content && isVisible) {
                        content.style.display = 'none';
                        if (expandBtn) expandBtn.textContent = '+';
                        container.classList.remove('selected');
                        saveExpandedState(lineId, false);
                    }
                });

                processed += batch.length;

                // 更新进度（固定长度百分比）
                const percent = Math.round((processed / total) * 100);
                const percentStr = percent.toString().padStart(3, ' ');
                btn.textContent = `Collapsing... ${percentStr}%`;

                if (processed < total && !cancelled) {
                    requestAnimationFrame(processBatch);
                } else {
                    if (!cancelled) {
                        btn.textContent = originalText;
                        isTaskRunning = false;
                        expandCollapseTask = null;

                        // 清除高亮
                        if (highlightedLine) {
                            highlightedLine.classList.remove('highlighted');
                            highlightedLine = null;
                        }
                    }
                }
            }

            requestAnimationFrame(processBatch);
        }
        
        // 更新锚点并复制到剪贴板
        function updateAnchor(anchorId, event) {
            event.stopPropagation();
            
            // 更新URL hash
            window.location.hash = anchorId;
            
            // 获取当前完整URL
            const fullUrl = window.location.href;
            
            // 尝试复制到剪贴板（静默操作，不显示任何反馈）
            navigator.clipboard.writeText(fullUrl).catch(() => {
                // 降级方案
                const textArea = document.createElement('textarea');
                textArea.value = fullUrl;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
            });
        }
        
        // 处理锚点导航
        function handleAnchorNavigation() {
            const hash = window.location.hash.substring(1);
            if (hash) {
                // 尝试查找锚点元素
                const element = document.getElementById(hash);
                if (element && element.classList.contains('line-container')) {
                    // 如果是行容器，清除其他高亮，然后高亮此行
                    const allLines = document.querySelectorAll('.line-container');
                    allLines.forEach(line => line.classList.remove('highlighted'));
                    element.classList.add('highlighted');
                    
                    // 平滑滚动到该行
                    setTimeout(() => {
                        element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 100);
                    
                    // 设置键盘选中
                    const lineId = element.getAttribute('data-line-id');
                    const lineIndex = allLines.length > 0 ? Array.from(allLines).findIndex(line => line.getAttribute('data-line-id') === lineId) : -1;
                    if (lineIndex >= 0) {
                        setKeyboardSelectedLine(lineIndex, false);
                    }
                }
            }
        }
        
        // 初始加载时
        window.addEventListener('load', function() {
            // 恢复主题
            document.documentElement.setAttribute('data-theme', currentTheme);

            // 初始化总行数
            const linesSpan = document.querySelector('.summary span');
            if (linesSpan) {
                const linesText = linesSpan.textContent;
                const match = linesText.match(/Lines: (\d+)/);
                if (match) {
                    total_lines = parseInt(match[1]);
                }
            }

            // 恢复展开状态
            restoreExpandedState();

            // 移除自动滚动，保持当前视图位置
            // restoreViewState(); // 注释掉，避免自动滚动

            // 初始化信息面板
            initInfoPanel();

            // 监听滚动事件
            window.addEventListener('scroll', updateProgressBar);

            // 初始化键盘导航
            initKeyboardNavigation();

            // 初始化自动补全（如果过滤框存在）
            if (document.getElementById('filterCpu')) {
                initAutocomplete();
            }

            // 处理锚点导航
            handleAnchorNavigation();
        });
        
        // 监听hash变化，支持动态锚点导航
        window.addEventListener('hashchange', function() {
            handleAnchorNavigation();
        });
    </script>
</body>
</html>
